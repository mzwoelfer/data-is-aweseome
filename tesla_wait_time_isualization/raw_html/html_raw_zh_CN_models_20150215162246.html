<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--[if lt IE 7 ]> <html class="no-js ie6" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN" dir="ltr"> <![endif]-->
<!--[if IE 7 ]>   <html class="no-js ie7" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN" dir="ltr"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN" dir="ltr"> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN" dir="ltr"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN" dir="ltr"> <!--<![endif]-->

<head><script type="text/javascript" src="/_static/js/bundle-playback.js?v=4R5OHjEN" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=txqj7nKC" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://www.tesla.cn/models/design","20150215162246","https://web.archive.org/","web","/_static/",
	      "1424017366");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=S1zqJCYt" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Model S Design Studio | Tesla Motors</title>
    <!--[if IE ]><meta http-equiv="X-UA-Compatible" content="IE=Edge" /><![endif]-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="shortcut icon" href="/web/20150215162246im_/http://www.tesla.cn/sites/all/themes/tesla/favicon.ico" type="image/x-icon"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="shortcut icon" href="/web/20150215162246im_/http://www.tesla.cn/sites/all/themes/tesla/favicon.ico" type="image/x-icon"/>

                <meta name="viewport" content="width=1024"/>
                <meta name="apple-mobile-web-app-capable" content="yes"/>
                <!--[if IE]><meta http-equiv="imagetoolbar" content="false" /><![endif]-->
                <meta property="og:description" content="Model S is the world's first premium electric sedan. Designed from the ground up as an electric car, Model S provides an unprecedented driving range of up to 300 miles and can accelerate from 0 to 60 in 5.6 seconds without burning a drop of gasoline."/><meta property="og:image" content="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/images/models/share_thumb.png"/><link rel="image_src" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/images/models/share_thumb.png"/>
<meta name="keywords" content="Tesla,Motors,EV,tesla motors,telsa,roadster,roadster sport,model s,electric vehicle,electric vehicles,evs"/>
<meta name="dcterms.date" content="2010-10-04T00:00:00Z"/>
<meta name="description" content="Model S is the world's first premium electric sedan. Designed from the ground up as an electric car, Model S provides an unprecedented driving range of up to 300 miles and can accelerate from 0 to 60 in 5.6 seconds without burning a drop of gasoline. The Tesla Model S - the first premium electric sedan, available 2012. Reserve yours today."/>
<link rel="canonical" href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/models/design"/>
<meta name="revisit-after" content="1 day"/>
    <meta property="fb:page_id" content="18790602800"/>
    <!-- <link rel="apple-touch-icon" href="apple-touch-icon.png" /> -->

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-60x60.png">

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon.png">
    <!-- For the iPad mini and the first- and second-generation iPad on iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-72x72.png">
    <!-- For the iPad mini and the first- and second-generation iPad on iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-76x76.png">
    <!-- For iPhone with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-114x114.png">
    <!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-120x120.png">
    <!-- For iPad with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-144x144.png">
    <!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/apple-touch-icon-152x152.png">

    <link rel="icon" sizes="196x196" type="image/png" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/favicon-196x196.png">
    <link rel="icon" sizes="160x160" type="image/png" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/favicon-160x160.png">
    <link rel="icon" sizes="96x96" type="image/png" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/favicon-96x96.png">
    <link rel="icon" sizes="16x16" type="image/png" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/assets/img/icons/favicon-32x32.png">

    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/tesla_theme/assets/img/icons/mstile-144x144.png">
    <meta name="google-site-verification" content="oOCqAljoM8Q2UUMNE95zkj5rWG_oa5w8VbSgkK3y8Kg"/>

    <link type="text/css" rel="stylesheet" media="all" href="/web/20150215162246cs_/http://www.tesla.cn/sites/default/files/css/css_adf84a3e6d45f18c4c45d7b4b8bba718.css"/>
<link type="text/css" rel="stylesheet" media="print" href="/web/20150215162246cs_/http://www.tesla.cn/sites/default/files/css/css_12c7e76c169f2df036b4a0a39e4a8129.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/web/20150215162246cs_/http://www.tesla.cn/sites/all/themes/tesla/configurator/css/min/web_styles.min.css?j"/>
    <style type="text/css">
    /*panel styles css*/
        </style>
    

                

                
        <script>
var Tesla = Tesla || {};
Tesla.user = {"username":"","email":"","first_name":"","last_name":""};
</script>

                <script type="text/javascript">
        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fc1ea3cb22510d833e51ad0f7f37fdbfa' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <!-- Gridsum tracking code begin. -->
    <script type="text/javascript">
        (function(){
            var s = document.createElement('script');
            s.type = 'text/javascript';
            s.async = true;
            s.src = (location.protocol == 'https:' ? 'https://web.archive.org/web/20150215162246/https://ssl.' : 'https://web.archive.org/web/20150215162246/http://static.') + 'gridsumdissector.com/js/Clients/GWD-002511-27F5C6/gs.js';
            var firstScript = document.getElementsByTagName('script')[0];
            firstScript.parentNode.insertBefore(s, firstScript);
        })();
    </script>
    <!--Gridsum tracking code end. -->
    
        <script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/default/files/js/js_c6a49ad3d9e66230b5d652507007b47d.js"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/modules/block_edit/block_edit.js?j"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/financing_page/javascripts/calculators.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/tco/tco.defaults.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/tco/tco_configurator_wrapper.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/configurator/js/tesla_engine/src/engine.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/configurator/js/tesla_engine/src/price_calculator.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/configurator/js/tesla_engine/src/configurator_utilities.js?1423993974"></script>
<script type="text/javascript" src="/web/20150215162246js_/http://www.tesla.cn/sites/all/themes/tesla/configurator/js/scripts.min.js?1423993974"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","block_edit":{"hover_links":1},"jcarousel":{"ajaxPath":"\/jcarousel\/ajax\/views"},"tesla":{"resType":null,"rn":null,"resCountry":null,"resConfigModel":null,"cfgOrigin":null,"resInvited":null,"resStatus":null,"orderStarted":null,"configSetPrices":"{\"pricing_date\":\"1\/12\/2015 7:51 AM\",\"currency_code\":\"CNY\",\"vat_percent\":17.00,\"recycling_fee\":null,\"models\":{\"ms\":{\"base_price\":648000.00,\"price_book_name\":\"CN 2015 JANUARY\",\"options\":{\"SC01\":{\"dependent_overrides\":{\"PBT85\":{\"price\":\"0.00\",\"price_indicator\":\"Included\",\"override_indicator\":\"Included\",\"after_delivery_price\":\"23400\"},\"BT60\":{\"price\":\"19000.00\",\"price_indicator\":\"Optional\",\"override_indicator\":\"Optional\",\"after_delivery_price\":\"23400\"},\"BT85\":{\"price_indicator\":\"Included\",\"override_indicator\":\"Included\",\"price\":\"0\",\"after_delivery_price\":\"23400\"}},\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"BT85\":{\"price_indicator\":\"Optional\",\"price\":86000.00,\"list_price\":86000.00,\"is_default\":false},\"SC00\":{\"dependent_overrides\":{\"BT85\":{\"price_indicator\":\"Included\",\"override_indicator\":\"Included\"}},\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"DRLH\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"TM00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PF00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PBSB\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PBCW\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"PMSS\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"PMMB\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"PMSG\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"PMAB\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"PPMR\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"PPSW\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"RFBK\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"RFBC\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"RFPO\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"WT19\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"WT21\":{\"price_indicator\":\"Optional\",\"price\":39500.00,\"list_price\":39500.00,\"is_default\":false},\"IDPB\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"IDLW\":{\"price_indicator\":\"Optional\",\"price\":5700.00,\"list_price\":5700.00,\"is_default\":false},\"TP02\":{\"price_indicator\":\"Optional\",\"price\":37300.00,\"list_price\":37300.00,\"is_default\":false},\"TP00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"AU01\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"AU00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"SU01\":{\"price_indicator\":\"Optional\",\"price\":19700.00,\"list_price\":19700.00,\"is_default\":false},\"SU00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"TR00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PS01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PS00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"CH00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"SP00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"LP01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"LP00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"CW01\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"CW00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PK01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"PK00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"YF01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"YF00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"BS00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PBT85\":{\"price_indicator\":\"Optional\",\"price\":204500.00,\"list_price\":204500.00,\"is_default\":false},\"COL1\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"COL2\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"COL3\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"PPSR\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"WTTB\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"WTSP\":{\"price_indicator\":\"Optional\",\"price\":39500.00,\"list_price\":39500.00,\"is_default\":false},\"QPBT\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"QPMB\":{\"dependent_overrides\":{\"BT60\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"BT85\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"PBT85\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"}},\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QPMG\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QPMT\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QXMB\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QXMG\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QXMT\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"QZMB\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"QZMG\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"QZMT\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"QYMB\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"QYMG\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"QYMT\":{\"price_indicator\":\"Optional\",\"price\":21900.00,\"list_price\":21900.00,\"is_default\":false},\"IX00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"IX01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"IDCF\":{\"price_indicator\":\"Optional\",\"price\":7000.00,\"list_price\":7000.00,\"is_default\":false},\"BC0B\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"BC0R\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"UTMF\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"UTAW\":{\"dependent_overrides\":{\"BT85\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"PBT85\":{\"price\":\"0\",\"price_indicator\":\"Included\"},\"BT60\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"P85D\":{\"price\":\"0\",\"price_indicator\":\"Included\"}},\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"FG00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"FG01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"FG02\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X001\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X002\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X004\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X012\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X013\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X014\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X019\":{\"price_indicator\":\"Optional\",\"price\":8800.00,\"list_price\":8800.00,\"is_default\":false},\"X021\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X028\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"X029\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X030\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"X031\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"PA00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"HP00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"IDHG\":{\"price_indicator\":\"Optional\",\"price\":5700.00,\"list_price\":5700.00,\"is_default\":false},\"IDHM\":{\"price_indicator\":\"Optional\",\"price\":5700.00,\"list_price\":5700.00,\"is_default\":false},\"AF00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"AF01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"CH01\":{\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"HP01\":{\"price_indicator\":\"Optional\",\"price\":6700.00,\"list_price\":6700.00,\"is_default\":false},\"SR01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"SR02\":{\"price_indicator\":\"Optional\",\"price\":17600.00,\"list_price\":17600.00,\"is_default\":false},\"MP01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"MX01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"DV2W\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"DV4W\":{\"dependent_overrides\":{\"P85D\":{\"price\":\"0\",\"price_indicator\":\"Included\"},\"BT85\":{\"price\":\"43900\",\"price_indicator\":\"Optional\"},\"PBT85\":{\"price\":\"97000\",\"price_indicator\":\"Optional\"}},\"price_indicator\":\"Optional\",\"price\":43900.00,\"list_price\":43900.00,\"is_default\":false},\"BT60\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"CDM0\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"DSH5\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"DSH7\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"PMNG\":{\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"UTAB\":{\"dependent_overrides\":{\"P85D\":{\"price\":\"0\",\"price_indicator\":\"Included\"},\"BT60\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"BT85\":{\"price\":\"13200\",\"price_indicator\":\"Optional\"},\"PBT85\":{\"price\":\"0\",\"price_indicator\":\"Included\"}},\"price_indicator\":\"Optional\",\"price\":13200.00,\"list_price\":13200.00,\"is_default\":false},\"DA00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"DA01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PI00\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"PX01\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":false},\"PI01\":{\"price_indicator\":\"Optional\",\"price\":30700.00,\"list_price\":30700.00,\"is_default\":false},\"ME02\":{\"price_indicator\":\"Included\",\"price\":0.00,\"list_price\":0.00,\"is_default\":true},\"P85D\":{\"price_indicator\":\"Optional\",\"price\":301500.00,\"list_price\":301500.00,\"is_default\":false},\"QREB\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QRET\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QREG\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QRLB\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QRLT\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QRLG\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"WTSG\":{\"price_indicator\":\"Optional\",\"price\":39500.00,\"list_price\":39500.00,\"is_default\":false},\"WTSS\":{\"price_indicator\":\"Optional\",\"price\":39500.00,\"list_price\":39500.00,\"is_default\":false},\"CW02\":{\"dependent_overrides\":{\"SR02\":{\"price\":\"0\",\"price_indicator\":\"Included\"}},\"price_indicator\":\"Optional\",\"price\":6600.00,\"list_price\":6600.00,\"is_default\":false},\"QNEB\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QNET\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QNEG\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QNLB\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QNLT\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false},\"QNLG\":{\"price_indicator\":\"Optional\",\"price\":31000.00,\"list_price\":31000.00,\"is_default\":false}}}}}","configSetLocale":null,"configSetPreConfigure":[],"configurationAccepted":null,"showDoneButtonOverlay":null,"earliestDeliveryData":"{\"BT60\":\" April\",\"BT85\":\" April\",\"PBT85\":\" April\",\"BT60D\":\" May\",\"BT85D\":\" May\",\"P85D\":\" May\"}","isResNull":null,"isFreePriceGalleryPage":0,"isLoResPage":0,"isProduction":true,"staticHosts":"static01-www.tesla.cn,static02-www.tesla.cn,static03-www.tesla.cn,static04-www.tesla.cn","debugLevel":0,"country":"CN","region":"CN","locale":"zh_CN","localePrefix":"\/cn"}});
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
Shadowbox.init({overlayOpacity:'0.7',flashVars:{'autostart':'true','skin':'sites/all/themes/tesla/js/shadowbox/libraries/mediaplayer/beelden.zip'}});
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var Tesla = Tesla || {};
Tesla.Smartling = Tesla.Smartling || {};

//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
TC = TC || {}; TC.global = TC.global || {};
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
TC.global.configPath = '/sites/all/themes/tesla/configurator/config_web.json'
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
TC.global.modelFilter ='ms';
//--><!]]>
</script>
</head>

<body id="page-models-design" class="not-front not-logged-in page-models no-sidebars i18n-zh_CN                show-grids">

        <!--[if lte IE 6]><script src="/sites/all/themes/tesla/js/ie6/warning.js"></script><script>window.onload=function(){e("/sites/all/themes/tesla/js/ie6/")}</script><![endif]-->
                 <!-- !!!!!!!!!! Do not insert any content before this tag -->
                 <div class="wrapper">
                         <div id="content-wrapper">
<!--**************** ############## **********  NAVIGATION *****************-->
                    <div id="main-nav">

        <div id="main-nav-back" class="short">
            <div id="main-nav-wrapper">

                <div id="branding" class="">
                    <div id="logo" class="">
                                                    <a href="/web/20150215162246/http://www.tesla.cn/" title="Home">
                                <img src="/web/20150215162246im_/http://www.tesla.cn/sites/all/themes/tesla/images/tesla_flag@2x.png" alt="Tesla logo" width="78" height="105"/>
                            </a>
                                            </div><!--End logo-->
                </div><!-- End branding -->

                <ul class="links main-menu short with-hover"><li class="menu-56568 active-trail header-only menu-model-s first"><a href="/web/20150215162246/http://www.tesla.cn/models" class="header-only menu-model-s" title="">Model S</a></li>
<li class="menu-56579 menu-model-x header-only"><a href="/web/20150215162246/http://www.tesla.cn/modelx" class="menu-model-x header-only" title="">Model X</a></li>
<li class="menu-67249"><a href="/web/20150215162246/http://www.tesla.cn/supercharger" title="">充电服务</a></li>
<li class="menu-56584 menu-enthusiasts"><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-enthusiasts">发现更多</a></li>
<li class="menu-56589"><a href="/web/20150215162246/http://www.tesla.cn/findus" title="">找到我们</a></li>
<li class="menu-56593"><a href="/web/20150215162246/http://www.tesla.cn/order" title="">购买</a></li>
<li class="menu-56598 menu-mytesla header-only last"><a href="/web/20150215162246/http://www.tesla.cn/mytesla" class="menu-mytesla header-only" title="">My Tesla</a></li>
<li class="menu-56603 menu-roadster hidden"><a href="/web/20150215162246/http://www.tesla.cn/roadster" class="menu-roadster hidden" title="">Roadster</a></li>
<li class="menu-56620 menu-about-tesla footer-only"><a href="/web/20150215162246/http://www.tesla.cn/about" class="menu-about-tesla footer-only" title="">关于特斯拉汽车公司</a></li>
</ul>
                
            </div><!-- End main-nav-wrapper-->

        </div><!-- End main nav back -->

        <div id="slide-nav-main">
            <div id="slide-nav-wrapper">
                <div class="subnav menu-56568 active-trail first header-only menu-model-s"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/models/design" title="">订购</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/models/drive" title="">试驾</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/models/specs" class="menu-specs" title="">规格</a></li> </ul><ul><li><a href="/web/20150215162246/http://www.tesla.cn/models/photo-gallery" class="menu-gallery" title="">图集</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/models/walkthrough" title="">视频</a></li> </ul></div><div class="subnav menu-56579 menu-model-x header-only"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/modelx" title="" class="active">特性</a></li> </ul></div><div class="subnav menu-67249"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/supercharger" title="" class="active">超级充电站</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/destinationcharger" title="">目的地充电站</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/homecharger" title="">家庭充电</a></li> </ul></div><div class="subnav menu-56584 menu-enthusiasts"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-blog active" title="">博客</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/gallery" title="">相片和视频</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/events" title="">活动</a></li><li><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/enthusiasts/blogs/tag/customers" title="">车主故事</a></li> </ul></div><div class="subnav menu-56589"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/findus/stores" title="">体验中心</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/findus/service" title="">服务中心</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/contact" class="menu-contact" title="">联系我们</a></li> </ul></div><div class="subnav menu-56593"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/order" title="" class="active">订购您的特斯拉</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/incentives" title="">激励政策</a></li><li><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/sites/default/files/pdfs/accessories_digital_brochure_cn.pdf" target="_blank" title="">原厂附件</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/financing/faq" title="">金融常见问题解答</a></li> </ul></div><div class="subnav menu-56598 menu-mytesla header-only"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/mytesla" class="active">我的订单</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/myprofile">账户信息</a></li> </ul></div><div class="subnav menu-56603 menu-roadster hidden"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/roadster/gallery" title="">Gallery</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/roadster/charging" title="">Charging</a></li> </ul></div><div class="subnav menu-56620 last menu-about-tesla footer-only"><ul><li><a href="/web/20150215162246/http://www.tesla.cn/executives" class="menu-executives footer-only" title="">管理团队</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-press footer-only" title="">新闻中心</a></li><li><a href="/web/20150215162246/http://www.tesla.cn/careers" title="">工作机会</a></li><li><a href="https://web.archive.org/web/20150215162246/http://ir.teslamotors.com/" class="menu-investors footer-only" target="_blank" title="">投资者关系</a></li> </ul><ul><li><a href="https://web.archive.org/web/20150215162246/https://suppliers.teslamotors.com/" class="menu-suppliers footer-only" target="_blank" title="">供应商</a></li> </ul></div>            </div>
        </div><!-- End slide-nav-->

        <div id="ribbon" class="short">
            <div id="secon-nav-wrapper">
                <ul class="links secondary-menu"><li class="menu-56569 active-trail first active"><a href="/web/20150215162246/http://www.tesla.cn/models/design" title="" class="active">订购</a></li>
<li class="menu-56576"><a href="/web/20150215162246/http://www.tesla.cn/models/drive" title="">试驾</a></li>
<li class="menu-56575 menu-specs"><a href="/web/20150215162246/http://www.tesla.cn/models/specs" class="menu-specs" title="">规格</a></li>
<li class="menu-56572 menu-gallery"><a href="/web/20150215162246/http://www.tesla.cn/models/photo-gallery" class="menu-gallery" title="">图集</a></li>
<li class="menu-56573 last"><a href="/web/20150215162246/http://www.tesla.cn/models/walkthrough" title="">视频</a></li>
</ul>            </div>
        </div><!-- End ribbon -->

        
        
    </div>


        
                <div id="page" class="container-12 clear-block">

                        <div id="main" class="clear-block column grid-12 ">

                                
                                
                                <div id="main-content" class="region clear-block">
                                        <div class="panel-display panel-1col clear-block">
  <div class="panel-panel panel-col">
    <div><div class="panel-pane pane-block pane-tesla-16">
  
  
  
  <div class="pane-content">
        <!-- "DS Main" -->
    <style type="text/css">
        /* Style adjustments for landscape mode goes here */
        @media all and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) {
            #page{
                overflow:hidden;
                width:1024px;
            }
        }
    </style>
    <div id="hero-background">
        <div id="hero-scaler"></div>
    </div>
    <div id="dialogueOverlay" class="clearfix">
            <div id="formContainer" class="clearfix"></div>
    </div>
    <div class="landingLogo"></div>
    <div id="configMain">

        <div id="viewContainer"></div>

        <div id="show_hide" class="middle"></div>
        <div id="roadViewMenu" class="clearfix"></div>
        <div id="controls" class="clearfix"></div>

        <div id="menu">
                <div id="detail"></div>
                <div id="tray" class="clearfix"></div>
                <div id="dash" class="clearfix"></div>
        </div>

    <div id="side_menu" class="hidden"></div>
    </div>
        <!-- No longer going to use this block of code as of August 1, 2013. Taking it out and putting it into an _.underscore template. - Manny B. (July 2013) -->

        <!-- WEB-1323: Odopod Code Integration (20120424) - start -->
        <div id="model_s_summary" class="clearfix hidden">
            <div id="summary-header" class="clearfix"></div>
            <div id="summary-footer" class="clearfix"></div>
            <div id="summary-list"></div>

                        <div id="summary-sub-panel">

                <div id="resaleValueGuaranteeContainer">
                    <h1>Resale Value Guarantee</h1>
                    <p id="resale_value_guarantee_txt"></p>
                </div>

                <div id="evIncentivesContainer">
                    <h1>Ev Incentives</h1>
                    <p id="incentives_txt"></p>
                </div>

                <div id="reserveYoursContainer">
                    <h1>RESERVE YOURS TODAY</h1>
                    <p>Reservations start at <span id="res-price"></span> and are fully refundable. Change your design anytime.</p>
                    <a class="reserve-button" href="javascript:void();"><h3>RESERVE</h3></a>
                </div>

            </div>            <div id="summaryIncentiveLinks">
                <a href="#" class="print">
                    Print<span class="icon"></span>
                </a>
                <a href="#" class="share">
                    Share<span class="icon"></span>
                </a>
            </div>

        </div>
        <div id="spinner_container"></div>
        <div id="content_body" class="center-wrapper clear-block">
            <div id="model_s_options" class="options_section">
            </div>
        </div>
        <div id="disclaimer_footer_text" class="center-wrapper clear-block">
            <p id="general_disclaimer"></p>
            <p id="price_disclaimer"></p>
            <p id="vat_disclaimer"></p>
            <p id="wheel_disclaimer"></p>
            <p id="rear_seat_disclaimer"></p>
            <p id="performance_disclaimer"></p>
            <p id="supercharger_disclaimer"></p>
            <p id="insurance_disclaimer"></p>
            <p id="financing_disclaimer"></p>
        </div>
        <!-- WEB-1323: Odopod Code Integration (20120424) - end -->        <!-- "DS Info Container" -->
        <div id="infoContainer"></div><script id="template-paint" type="text/template">
    <%
    if (paint.template.name == "outter" && paint.template.level === 1) {
    %>
    <div class="detail_pane clearfix" id="detail_pane_<%= paint.data.code %>"></div>
    <%
    }
    else if ( paint.template.name == "inner" && paint.template.level === 2 ) {
    %>

       <%
        _.each(paint.includes, function(i) {
            var currentCode = paint.options[i].code;

            if( !(currentCode === "COL5") ) {
        %>
        <div class="radioGroup <%= paint.options[i].name.toLowerCase() %>">
            <ul>
            <%
            _.each(paint.options[i].meta.value_list, function(ii) {
                if ( !ii.hidden  ) {
            %>
                <li>
                    <a href="#" class="paintSwatch" id="paintSwatch_<%= ii.fallbackValue %>" data-option="<%= ii.params.option %>" data-value="<%= ii.params.value %>">
                        <div class="outline"></div>
                        <div class="paintSwatchMask">
                            <img src="<%= ii.swatchPath %>" style="margin-left: <%= ii.margin_left %>">
                        </div>
                        <h4><%= ii.name %></h4>
                    </a>
                </li>
            <%
                }
            });
            %>
            </ul>
            <a class="infoButton" href="#"></a>
            <h3 class="paintTitles"><%= paint.options[i].name %></h3>
            <span id="price_<%= i %>" class="price paintTitles cash-price <%= paint.options[i].meta.toggleClass %>"><%= TC.price(paint.options[i].getPrice()) %></span>
            <span id="price_<%= (i + 1 * 1.1) %>" class="price paintTitles financed-price finance-cash-hidden"><%= TC.price(paint.options[i].getFinancedPrice(), true) %></span>
        </div>
        <%
        if( paint.options[i].meta.splitter && i < (_.size(paint.includes)-1) ) {
        %>
            <%= paint.options[i].meta.splitter %>
        <%
        }
        %>
        <%
            } // end if
        // end for each
        }, paint.includes);
        %>
    <%
    }
    %>
</script>
<script id="template-roof" type="text/template">
    <%
    if (roof.template.name == "outter" && roof.template.level === 1) {
    %>
    <div class="detail_pane clearfix" id="detail_pane_<%= roof.data.code %>">
        <div class="radioGroup">
            <ul></ul>
        </div>
        <div class="detail_devide"></div>
        <div class="radioGroup">
            <ul></ul>
        </div>
    </div>
    <%
    }
    else if ( roof.template.name == "initRoofs" && roof.template.level === 2 ) {
    %>
       <%
       var prior_opt_cat_name, opt_cat_name, opt_list_size, opt_cat_key, set_divider, roof_class, h3_name;
        _.each(roof.options, function(option, key, list) {
        if ( key == 0 ) {
            opt_cat_name = option.category;
        }
        else {
            if ( option.category == prior_opt_cat_name ) {
                set_divider = false;
            }
            else {
                set_divider = true;
            }
        }
        roof_class = (set_divider) ? 'detail_devide' + ' ' + option.meta.params.option  : option.meta.params.option;
        %>
        <% if ( set_divider ) { %>
            <div class="detail_devide <%= option.meta.params.option %>"></div>
        <% } %>
        <li class="<%= option.meta.params.option %>">
            <h3><%= option.meta.groupTitle %><br/>
                <span id="price_<%= option.meta.i %>" class="price cash-price <%= option.meta.toggleClass %>"><%= TC.price(option.getPrice()) %></span>
                <span id="price_<%= (option.meta.i + 2 * 2.2) %>" class="price financed-price finance-cash-hidden"><%= TC.price(option.getFinancedPrice(), true) %></span>
            </h3>
            <a href="#" class="roofBox" id="roofBox_<%= option.code %>" data-option="<%= option.meta.params.option %>">
                <div class="outline"></div>
                <div class="swatchMask">
                    <img src="<%= option.meta.swatch.path %>" style="margin-top: <%= option.meta.margin_top %>; margin-left: <%= option.meta.margin_left %>">
                </div>
            </a>
            <h4><%= option.name %></h4>
        </li>
        <%
            prior_opt_cat_name = opt_cat_name;
        });
        %>
    <%
    }
    else if ( roof.template.name == "initSpoilerOptions" && roof.template.level === 2 ) {
    %>
       <%
        _.each(roof.options, function(option) {
        %>
        <li>
            <h3><%= option.meta.groupTitle %></h3>
            <a href="#" class="spoilerBox" id="spoilerBox_<%= option.code %>" data-option="<%= option.meta.params.option %>">
                <div class="outline"></div>
                <div class="swatchMask">
                    <img src="<%= option.meta.swatch.path %>" style="margin-top: <%= option.meta.margin_top %>; margin-left: <%= option.meta.margin_left %>">
                </div>
            </a>
            <h4><%= option.name %></h4>
        </li>
        <%
        });
        %>
    <%
    }
    %>
</script>
<script id="template-wheel" type="text/template">
    <%
    if (wheel.template.name == "outter" && wheel.template.level === 1) {
    %>
        <%
        if(TC.global.modelFilter === "rd"){
        %>
            <div class="detail_pane clearfix" id="detail_pane_<%= wheel.data.code %>">
                <div class="radioGroup">
                    <ul></ul>
                </div>
                <div class="detail_devide"></div>
                <div class="radioGroup">
                    <ul></ul>
                </div>
            </div>
        <%
        }
        else{
        %>
            <div class="detail_pane clearfix" id="detail_pane_<%= wheel.data.code %>">
                <div class="radioGroup">
                    <ul></ul>
                </div>
                <div class="radioGroup">
                    <ul></ul>
                </div>
            </div>
        <%
        }
        %>
    <%
    }
    else if ( wheel.template.name == "inner" && wheel.template.level === 2 ) {
    %>
        <%        
        var ui_pairs = [];
        var upgrade_wheels = [];
        var code_upgrade, code_uipair, tion_hidden_class, option_ui_class, has_ui_pair, is_ui_pair, is_upgrade_opt;
        _.each(wheel.options, function(option) {
            if ( option.upgrade_map ) {
                upgrade_wheels.push(option.upgrade_map);
            }
            if ( option.ui_pair ) {
                ui_pairs.push(option.ui_pair);
            }
            has_ui_pair    = (option.ui_pair) ? true : false;
            is_ui_pair     = (_.indexOf(ui_pairs, option.code) != -1) ? true : false;
            is_upgrade_opt = ( _.indexOf(upgrade_wheels, option.code) > -1 ) ? true : false;
            code_upgrade   = (option.upgrade_map) ? option.upgrade_map : '';
            code_uipair    = (is_ui_pair) ? option.code : '';
            
            option_ui_pair_class = (is_ui_pair) ? 'ui_pair' : '';
            option_upgrade_class = (is_upgrade_opt) ? 'upgrade' : '';
        %>
        <li id="<%= option.code %>" class="wheel <%= option_ui_pair_class %> <%= option_upgrade_class %> <%= option.meta.nineTeenIncher %>" data-upgrade="<%= code_upgrade %>" data-uipair="<%= code_uipair %>">
            <% if ( !has_ui_pair ) {  %>
                <div class="detail_devide"></div>
            <% } %>
            <% if ( !is_ui_pair ) { %>
                <a class="infoButton" href="#"></a>
                <h3 class=""><%= _.escape(option.name) %><br>
                    <span id="price_<%= option.meta.i %>" class="price cash-price <%= option.meta.toggleClass%>"><%= TC.price(option.getPrice()) %></span>
                    <span id="price_<%= (option.meta.i + 3 * 3.3) %>" class="price financed-price finance-cash-hidden"> <%= TC.price(option.getFinancedPrice(), true) %></span>
                </h3>
            <% } %>
            <a href="#" class="wheelBox" id="wheelBox_<%= option.code %>" data-option="<%= option.meta.params.option %>">
                <div class="outline"></div>
                <div class="swatchMask">
                    <img src="<%= option.meta.swatchPath %>" style="margin-left: <%= option.meta.margin_left %>">
                </div>
            </a>
        </li>
        <%
        });
        %>
    <%
    }
    %>
</script>
<script id="template-battery" type="text/template">
    <div class="category-group" id="options_category_<%= battery.category %>">
    </div>
</script>

<script id="template-battery-items" type="text/template">
    <%
        // outer params
        // @category
        // @description
        // @disclaimer
        // @numOptions

        var text_description  = ( battery.description === null ) ? "" : "<p>" + battery.description + "</p>";
        var class_num_options = ( battery.numOptions === 1 ) ? "solo" : "";
    %>
    <h2><%= battery.name %></h2>
        <%= text_description %>
        <div class="battery-list clearfix <%= class_num_options %>">
        <%
        _.each(battery.sub_battery, function(option) {
            var is_battery_selected = ( ENGINE.isOptionSet(option.code) ? " selected" : "" );
            var swatch_path         = (option.swatch.path === "" ? "https://web.archive.org/web/20150215162246/http://placehold.it/85x30" : option.swatch.path);
            var swatch_x_offset     = String(Number(option.swatch.x));
            var option_disclaimer   = "<p>" + ( option.disclaimer || "" ) + "</p>";
        %>
            <div class="battery-option clearfix <%= is_battery_selected %>" data-code="<%= option.code %>">
                <div class="inner-shadow">
                    <div class="battery-option-image <%= option.code %>"><img src="<%= swatch_path %>" style="margin-left: <%= swatch_x_offset %>px"></div>
                    <div class="battery-option-details">
                        <h3><%= option.name %></h3>
                        <div class="battery-option-description"><%= option.description %></div>
                    </div>
                    <div class="battery-option-footer">
                        <h4 class="cash-price hidden"><%= option.price_cash %></h4>
                        <h4 class="financed-price hidden"><%= option.price_finance %></h4>
                        <%= option_disclaimer %>
                    </div>
                </div>
            </div>
        <% }); %>
        </div>
        <p><%= battery.disclaimer %></p>
</script>
<script id="template-charger" type="text/template">
    <%
        // outer params
        // @category
        // @description
        // @disclaimer
        // @numOptions

        var descriptionText = charger.description === null ? "" : "<p>" + charger.description + "</p>";
    %>
    <div class="category-group" id="options_category_<%= charger.category %>">
        <h2><%= charger.name %></h2>
            <%= descriptionText %>
            <%
            // this should have sub categories
            _.each(charger.options, function(chgOptions) {
                var swatchLength = _.keys(chgOptions.swatch).length;
                var overlayStyle = ( swatchLength > 1 && _.isObject(chgOptions.swatch[0]) ) ? true : false;
                var overlayStyleClass = (overlayStyle) ? "overlay" : "nooverlay";
                var hasDependentOverrides = !_.isEmpty(chgOptions.dependentOverrides);
            %>
                <div class="charger-option clearfix shadow <%= chgOptions.markup.css.option %> <%= chgOptions.markup.css.disabled %> <%= chgOptions.markup.css.standard %>" data-code="<%= chgOptions.markup.atts.dataCode %>">
                    <div class="inner-shadow clearfix">
                        <div class="option-select" data-code="<%= chgOptions.markup.atts.dataCode %>">

                        <%
                        if ( hasDependentOverrides ) {
                            _.each(chgOptions.dependentOverrides, function(dependentoverridesData) {
                        %>
                            <%
                            // will this always be Standard in english? different footer if BT85 is selected
                            if (dependentoverridesData.override_indicator === "Included") {
                                //just show standard and checkbox unselectabe, no related batteries..
                            %>
                            <div class="option-footer charger-option-footer super <%= dependentoverridesData.name %>">
                                <div class="checkbox standard"></div>
                            </div>

                            <div class="option-details charger-option-details super <%= dependentoverridesData.name %>">

                                <h3><%= chgOptions.name %></h3>
                                <div class="charger-option-description"><%= chgOptions.description %></div>
                                <h4 class="cash-price hidden"><%= dependentoverridesData.price_indicator %></h4>
                                <h4 class="financed-price hidden"></h4>
                                <p class="disclaimer"><%= dependentoverridesData.override_disclaimer %></p>
                            </div>
                        <%
                        }
                        else {
                        %>
                            <div class="option-footer charger-option-footer super <%= dependentoverridesData.name %>">
                                <div class="checkbox"></div>
                            </div>
                            <div class="option-details charger-option-details super <%= dependentoverridesData.name %>">
                                <h3><%= chgOptions.name %></h3>
                                <div class="charger-option-description"><%= chgOptions.description %></div>
                                <h4 class="cash-price"><%= dependentoverridesData.meta.pi %></h4>
                                <h4 class="financed-price hidden"><%= dependentoverridesData.fi %></h4>
                                <p class="disclaimer"><%= dependentoverridesData.override_disclaimer %></p>
                            </div>
                        <%
                        }
                        %>
                        <%
                            });
                        }
                        else {
                        %>
                            <div class="option-footer charger-option-footer">
                                <div class="checkbox"></div>
                            </div>
                            <div class="option-details charger-option-details">
                                <h3><%= chgOptions.name %></h3>
                                <div class="charger-option-description"><%= chgOptions.description %></div>
                                <% if (chgOptions.markup.css.standard == "standard" && chgOptions.e.price == 0 ) { %>
                                <h4 class="cash-price hidden"><%= ENGINE._mapPriceIndictors('Included') %></h4>
                                <% } 
                                else {
                                %>
                                <h4 class="cash-price hidden"><%= TC.externalInterface.formatCurrency(chgOptions.e.price, true, false) %></h4>
                                <% } %>
                                <h4 class="financed-price hidden"></h4>
                                <p class="disclaimer"><%= chgOptions.disclaimer %></p>
                             </div>
                    <% } %>

                        </div> <!-- .option-select -->

                        <div class="option-image charger-option-image <%= overlayStyleClass %>">
                        <%
                            var swatchPath = (overlayStyle) ? chgOptions.swatch[0].path : chgOptions.swatch.path;
                        %>
                            <a href="<%= swatchPath %>" class="<%= overlayStyleClass %><%= chgOptions.code %> large" data-code="<%= chgOptions.code %>">
                                <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                                <%
                                    if (TC.modelSOptions.initLoad) {
                                        var md = TC.modelSOptions.getMediumImage(swatchPath);
                                        TC.modelSOptions.mediumDefault.push(md);
                                        if (!_.contains(TC.global.overlayOpts.notActive, chgOptions.code)) {
                                            var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                            TC.modelSOptions.largeDefault.push(ld);
                                        }
                                    }
                                %>
                            </a>
                            <%
                            if( overlayStyle ){
                                var counter = 0;
                            %>
                            <div class="thumbs <%= overlayStyleClass %>">
                                <%
                                var firstElement = true;
                                _.each(chgOptions.swatch, function(swatchThumbs) {
                                    var activeThumbClass = (counter < 1) ? "current active" : "";
                                    var swatchThumbVideo = (swatchThumbs.video) ? swatchThumbs.video : "";
                                    var swatchLinkPath = ( !(typeof(swatchThumbVideo) != "undefined") ) ? swatchThumbVideo : ( (swatchThumbs.path) ? swatchThumbs.path : "" );
                                    activeThumbClass = ( !(typeof(swatchThumbVideo) != "undefined") ) ? activeThumbClass + " video" : activeThumbClass;
                                %>
                                    <a href="<%= swatchLinkPath %>" class="<%= overlayStyleClass %><%= chgOptions.code %>" data-code="<%= chgOptions.code %>">
                                        <img class="thumb <%= activeThumbClass %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatchThumbs.path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad) {
                                                var sd = TC.modelSOptions.getSmallImage(swatchThumbs.path);
                                                TC.modelSOptions.smallDefault.push(sd);
                                                if (!firstElement) {
                                                    var mnd = TC.modelSOptions.getMediumImage(swatchThumbs.path);
                                                    TC.modelSOptions.mediumNonDefault.push(mnd);
                                                    var lnd = TC.modelSOptions.getLargeImage(swatchThumbs.path);
                                                    TC.modelSOptions.largeNonDefault.push(lnd);
                                                }
                                            }
                                        %>
                                    </a>
                                <%
                                    counter++;
                                    firstElement = false;
                                });
                                %>
                            </div> <!-- . thumbs -->
                            <!-- <div class="slides hidden" id="slides<%= chgOptions.code %>">
                                <%
                                _.each(chgOptions.swatch, function(swatchThumbs) {
                                    if ( typeof(swatchThumbs.video) != "undefined" && !($.isEmptyObject(swatchThumbs.video)) ) {
                                    %>
                                    <iframe src="<%= swatchThumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                    <%
                                    }
                                    else {
                                    %>
                                    <img src="<%= swatchThumbs.path %>" alt="Tesla Design Studio Image" />
                                    <%
                                    }
                                    %>
                                <%
                                });
                                %>
                            </div> . slides -->
                            <%
                            }
                            %>
                        </div>

                    </div> <!-- .inner-shadow -->
                </div> <!-- .charger-option -->

            <% }); %>
    </div> <!-- .category-group -->
</script>
<script id="template-interiorms-wrap" type="text/template">
    <%
    /**
    *
    * wrapper for interiorms tray
    * namespace: interiorwrap
    *
    **/
    %>
    <div class="detail_pane interior_container <%= interior_wrap.code %> clearfix" id="detail_pane_<%= interior_wrap.code %>"></div>
</script>

<script id="template-interiorms-base-container" type="text/template">
    <%
    /**
    *
    * base (category wrapper) for each interior sub-category,
    * e.g. C_INTBASE_PREMIUM, C_INTBASE_CUSTOM, C_INTBASE_PREMIUM
    * namespace: interior_base
    *
    **/
    var container_class = "intOptionsContainer";
    var signature_class = interior_base.is_signature ? 'signature' : '';
    var version_two_five_class_override = (TC.global.configuratorVer >= 2.5) ? '_2_5' : '';
    %>
    <div class="<%= container_class %> interior_container <%= interior_base.code %> <%= signature_class %> " id="intOptionsContainer_<%= interior_base.code %><%= version_two_five_class_override %>" data-group="<%= interior_base.code %>">
    </div>
</script>

<script id="template-interiorms-options-container" type="text/template">
    <%
    /**
    *
    * parse each interior tray option
    e.g. IPMB, IPMT, etc.
    namespace: interior
    *
    **/
    var container_class = "intOptionsSubContainer";
    var signature_class = interior_options.is_signature ? 'signature' : '';
    var version_two_five_class_override = (TC.global.configuratorVer >= 2.5) ? '_2_5' : '';
    %>

    <div class="<%= container_class %><%= version_two_five_class_override %> radioGroup<%= version_two_five_class_override %> interior_container <%= interior_options.code %> <%= signature_class %>" id="intOptionsContainer_<%= interior_options.code %><%= version_two_five_class_override %>" data-group="<%= interior_options.code %>">
        <h4><span class="cat-title"><%= interior_options.name %></span>
            <p class="price cash-price finance-cash-hidden"><%= interior_options.price %></p>
        </h4>
        <%
        if ( interior_options.has_options ) {
        %>
        <ul class="swatchList">
            <%
            var model_code = ENGINE.getModelCode();
            _.each(interior_options.options, function(opt_data, opt_code) {
                if ( ENGINE.isOptionVisible( opt_code ) ) {
                var interior_swatch = ENGINE.getOption(opt_code).getAssets({view:"UI_SWAT_TWO_FIVE"});
            %>
            <li class="<%= model_code %>" data-code="<%= opt_code %>">
                <a href="#" class="intSwatch" id="<%= opt_data.category %>-<%= opt_code %>" name="<%= opt_data.name %>" data-code="<%= opt_code %>">
                    <div class="outline"></div>
                    <div class="intSwatchMask">
                    <% if ( interior_swatch !== undefined ) { %>
                        <%
                        if ( interior_swatch.path !== undefined ) {
                        %>
                        <img src="<%= interior_swatch.path %>" style="margin-left:<%= interior_swatch.x %>px">
                        <%
                        } else if ( _.isObject(interior_swatch) && interior_swatch[0] !== undefined && interior_swatch[0].path !== undefined  ) {
                        %>
                        <img src="<%= interior_swatch[0].path %>" style="margin-left:<%= interior_swatch[0].x_offset %>px">
                        <%
                        }
                        %>
                    <%
                    }
                    %>
                    </div>
                    <h4><%= opt_data.name %></h4>
                </a>
            </li>
            <%
                }
            });
            %>
        </ul>
        <%
        }
        %>
    </div>

</script>

<script id="template-interiorms-upgrades" type="text/template">
    <%
    /**
    *
    * parse each upgrade option (checkbox)
    * e.g. SX01, SX03, etc.
    * namespace: interior_upgrades
    * data-upgrade attribute displays the corresponding interior category
    *
    **/
    var non_us_pricing_class = (ENGINE.showPricingMS() && ENGINE.getPricingCountry() != 'US' ) ? '' : 'finance-cash-hidden';
    %>
    <div class="column interior-opt upgrades fancy-checkboxes <%= interior_upgrades.parent %>" data-code="<%= interior_upgrades.code %>" data-toggle="<%= interior_upgrades.toggle_pair %>" data-parent="<%= interior_upgrades.parent %>">
        <%
        var has_options = interior_upgrades.has_options && !_.isEmpty(interior_upgrades.options);
        if ( has_options ) {
            _.each(interior_upgrades.options, function(opt_data, opt_code) {
        %>

        <label for="cb_interiorms_<%= opt_data.category.toLowerCase() %>" class="label_fancy_check" id="label_cb_interiorms_<%= opt_data.category.toLowerCase() %>" data-code="<%= opt_data.code %>"data-oncode="<%= opt_data.code %>" data-offcode="<%= opt_data.toggle_pair %>" data-toggle="<%= opt_data.toggle_pair %>" >
            <span id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_fancy" class="fancy_check" style="">
                <input type="checkbox" name="cb_interiorms_<%= opt_data.category.toLowerCase() %>" id="cb_interiorms_<%= opt_data.category.toLowerCase() %>" class="hidden" value="<%= opt_data.code %>">
            </span>
            <h2>
                <%= opt_data.name %>
                <% if ( /YF01/.test(opt_data.code) ) { %>
                    <a class="infoButton right" href="#"></a>
                <% } %>
                <%
                if ( opt_data.price != 0 ) {
                %>
                <span class="opt-price price cash-price <%= non_us_pricing_class %>"><%= TC.externalInterface.formatCurrency(opt_data.price, true, false) %></span>
                <%
                }
                %>
            </h2>
        </label>
        <%
            });
        }
        %>
    </div>
</script>

<script id="template-interiorms-pkg" type="text/template">
    <%
    /**
    *
    * parse each package option (checkbox)
    * e.g. PI01, PI02, PI03.
    * namespace: interior_pkg
    * data-upgrade attribute displays the corresponding interior category
    *
    **/
    var non_us_pricing_class = (ENGINE.showPricingMS() && ENGINE.getPricingCountry() != 'US' ) ? '' : 'finance-cash-hidden';
    var version_two_five_class_override = (TC.global.configuratorVer >= 2.5) ? '_2_5' : '';
    %>
    <div class="column interior-opt<%= version_two_five_class_override %> pkg fancy-checkboxes <%= interior_pkg.parent %>" data-code="<%= interior_pkg.code %>" id="intOptionsContainer_<%= interior_pkg.code %><%= version_two_five_class_override %>" data-parent="<%= interior_pkg.parent %>">
        <%
        var has_options = interior_pkg.has_options && !_.isEmpty(interior_pkg.options);
        if ( has_options ) {
            _.each(interior_pkg.options, function(opt_data, opt_code) {
        %>
        <div class="cb_interiorms_<%= opt_data.category.toLowerCase() %>" data-code="<%= opt_data.code %>">
            <label for="cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" class="label_fancy_check" id="label_cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" data-code="<%= opt_data.code %>" >
                <span id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_fancy" class="fancy_check" style="">
                    <input type="checkbox" name="cb_interiorms_<%= opt_data.category.toLowerCase() %>" id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" class="hidden" value="<%= opt_data.code %>">
                </span>
                <h2>
                    <%= opt_data.name %>
                    <span class="price cash-price">
                    <%
                    if ( opt_data.getPrice() !== 0 ) {
                    %>
                    <%= TC.externalInterface.formatCurrency(opt_data.getPrice(), true, false) %></span>
                    <%
                    }
                    else {
                    %>
                    <%= opt_data.price_indicator %></span>
                    <%
                    }
                    %>
                </h2>
                <%
                if (opt_code != 'PI01') {
                %>
                <a class="infoButton" href="#"></a>
                <%
                } else {
                %>
                <br />
                <%
                }
                %>
                <p class="description">
                    <%= opt_data.description %>
                </p>
            </label>
        </div>

        <%
            });
        }
        %>
    </div>
</script>
<script id="template-optionslist" type="text/template">
    <div class="category-group" id="options_category_<%= optionslist.category %>"></div>
    <%
    /***************************************************
    Namespace: optionslist
    
    Description: optionslist is the parent object with the data for each category/module (as the template is called) in the main body section of the Design Studio (e.g. C_PERF, C_BODY, C_BAT, etc.)
    
    Update: As of late July 2013, there are now two (2) configurators to account for, for the layout.
    Configurator 2 layout (template) exists from around line 37-ish to 270-ish. Configurator 1.x exists after that.
    
    Debugging: debug.log/error/warning don't currently work in _.underscore templates. Use (temporarily) console.log/dir etc if needing to tail data in the browser console
    
    File that calls this template, e.g. model_s.options.optionsList.js
    
    To Do (after 2.0 release): Clean-up variable names (for consistency, redo data architecture)
    ***************************************************/
    %>
</script>

<script id="template-optionslist-items" type="text/template">
    <%
    
    var description_text  = optionslist.description === null ? "" : "<p>" + optionslist.description + "</p>";
    var num_options_class = (optionslist.numOptions === 1 ? "solo" : "");
    
    %>
    <h2><%= optionslist.name %></h2>
        <%= description_text %>
        <div class="option-list clearfix <%= num_options_class %>">
        <% _.each(optionslist.sub_option, function(option) { %>
            <%
            var class_parent           = option.isParent() ? 'parent' : '';
            var parent_child_group     = option.isParent() ? 'parent-child-group' : '';
            var class_option_checkbox  = option.markup.classes.option_cb;
            var class_selected_state   = option.markup.classes.option;
            var swatch_path            = option.markup.atts.swatch_path;
            var data_code              = option.markup.atts.data_code;
            
            var option_name            = option.name;
            var option_description     = option.description;
            var option_disclaimer      = option.disclaimer;
            var option_price_cash      = TC.modelSOptions.price(option, false);
            var option_price_finance   = TC.modelSOptions.price(option, true);
            
            var swatch_length          = _.keys(option.swatch).length;
            var overlay_style          = ( swatch_length > 1 && _.isObject(option.swatch[0]) );
            var class_overlay_style    = (overlay_style) ? "overlay" : "nooverlay";
        %>
            <%
            if ( Tesla.isConfiguratorVersionGreaterThan(2) ) {
                // Commenting out per WEB-16279. Since the Usability Configurator project is refreshing the UI price indicator, class state, etc. (not redrawing the markup), we may not need this anymore. Keep around for a week or so, just in case.
                // if ( !_.isEmpty(option.dependent_overrides) ) {
                //     if (option.dependent_overrides.indicator === "Included") {
                //         option_price_cash = option.dependent_overrides.price_indicator;
                //         option_disclaimer = option.dependent_overrides.disclaimer;
                //     }
                //     else {
                //         option_price_cash = TC.externalInterface.formatCurrency(option.dependent_overrides.price, true, false);
                //     }
                // }
                if ( option.ui_pair ) {
                        var class_initial_selected_pair     = option.markup.classes.option_paired;
                        var class_initial_selected_ui_pair  = option.markup.classes.option_ui_paired;
                        var class_ui_pair_selected_checkbox = option.markup.classes.option_cb_ui_paired;
                        
                        var swatch_ui_path                  = option.markup.atts.swatch_path_ui_pair;
                        var data_code_ui_pair               = option.markup.atts.data_code_ui_pair;
                        
                        var swatch_ui_length                = _.keys(option.swatch).length;
                        var overlay_ui_style                = ( swatch_ui_length > 1 && _.isObject(option.swatch[0]) ) ? true : false;
                        var class_overlay_ui_style          = (overlay_ui_style) ? "overlay" : "";
                        
                        var ui_option_price_cash            = TC.modelSOptions.price(option.option_ui_pair, false);
                        var ui_option_price_finance         = TC.modelSOptions.price(option.option_ui_pair, true);
                        
                        var option_ui_name                  = option.option_ui_pair.name;
                        var option_ui_description           = option.option_ui_pair.description;
                        var option_ui_disclaimer            = option.option_ui_pair.disclaimer;
                %>
                    <div class="option option-pair clearfix">
                        <div class="clearfix paired-option shadow <%= class_initial_selected_pair %> " data-code="<%= data_code %>">
                            <div class="inner-shadow clearfix">
                                <div class="option-select">
                                    <div class="option-footer">
                                        <div class="checkbox"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= option_name %></h3>
                                        <p><%= option_description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                            <p class="disclaimer"><%= option_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                            <div class="option-image <%= class_overlay_style %>">
                            <%
                                var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                            %>
                                <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                    <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if( overlay_style ){
                                    var counter = 0;
                                %>
                                <div class="thumbs <%= class_overlay_style %>">
                                    <%
                                    var firstElement = true;
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        var class_active_thumb = (counter < 1) ? "current active" : "";
                                        var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                        var swatch_link_path   = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                        class_active_thumb     = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                    %>
                                        <a href="<%= swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                            <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                        </a>
                                    <%
                                        counter++;
                                        firstElement = false;
                                    });
                                    %>
                                </div> <!-- . thumbs -->
                                <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                    <%
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                        %>
                                        <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                        <%
                                        }
                                        else {
                                        %>
                                        <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                        <%
                                        }
                                        %>
                                    <%
                                    });
                                    %>
                                </div> . slides -->
                                <%
                                }
                                %>
                            </div>

                            </div>
                        </div>

                        <div class="clearfix paired-option ui-pair shadow <%= class_initial_selected_ui_pair %>" data-code="<%= data_code_ui_pair %>">
                            <div class="inner-shadow clearfix">

                                <div class="option-select" data-code="<%= data_code %>">
                                    <div class="option-footer">
                                        <div class="checkbox <%= class_ui_pair_selected_checkbox %>"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= option_ui_name %></h3>
                                        <p><%= option_ui_description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= ui_option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= ui_option_price_finance %></h4>
                                            <p class="disclaimer"><%= option_ui_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="option-image <%= class_overlay_style %>">
                                <%
                                    var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                                %>
                                    <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                        <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad) {
                                                var md = TC.modelSOptions.getMediumImage(swatch_path);
                                                TC.modelSOptions.mediumDefault.push(md);
                                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                    var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                    TC.modelSOptions.largeDefault.push(ld);
                                                }
                                            }
                                        %>
                                    </a>
                                    <%
                                    if( overlay_style ){
                                        var counter = 0;
                                    %>
                                    <div class="thumbs <%= class_overlay_style %>">
                                        <%
                                        var firstElement = true;
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            var class_active_thumb = (counter < 1) ? "current active" : "";
                                            var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                            var swatch_link_path = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                            class_active_thumb = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                        %>
                                            <a href="<%= swatch_thumbs.path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                                <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                            </a>
                                        <%
                                            counter++;
                                            firstElement = false;
                                        });
                                        %>
                                    </div> <!-- . thumbs -->
                                    <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                        <%
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                            %>
                                            <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                            <%
                                            }
                                            else {
                                            %>
                                            <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                            <%
                                            }
                                            %>
                                        <%
                                        });
                                        %>
                                    </div> . slides -->
                                    <%
                                    }
                                    %>
                                </div>
                            </div>
                        </div>
                    </div>
                <%
                }
                else {
                %>
                    <div class="option-package <%= parent_child_group %>">
                        <% if ( option.isParent() ) {%>
                        <div class="shadow-container">
                        <div class="parent-wrapper-div">
                        <% } %>
                        <div class="option clearfix shadow <%= class_selected_state   %> <%= class_parent %> <%= option.invalid %>" data-code="<%= data_code %>">
                            <div class="inner-shadow">

                                <div class="option-select" data-code="<%= data_code %>">
                                    <div class="option-footer">
                                        <div class="checkbox"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= option_name %></h3>
                                        <p><%= option_description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                            <p class="disclaimer"><%= option_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="option-image <%= class_overlay_style %>">
                                <%
                                    var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                                %>
                                    <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                        <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad) {
                                                var md = TC.modelSOptions.getMediumImage(swatch_path);
                                                TC.modelSOptions.mediumDefault.push(md);
                                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                    var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                    TC.modelSOptions.largeDefault.push(ld);
                                                }
                                            }
                                        %>
                                    </a>
                                    <%
                                    if( overlay_style ){
                                        var counter = 0;
                                    %>
                                    <div class="thumbs <%= class_overlay_style %>">
                                        <%
                                        var firstElement = true;
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            var class_active_thumb = (counter < 1) ? "current active" : "";
                                            var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                            var swatch_link_path   = ( !(typeof(swatch_thumb_video) !== undefined) ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                            class_active_thumb     = ( !(typeof(swatch_thumb_video) !== undefined) ) ? class_active_thumb + " video" : class_active_thumb;
                                        %>
                                            <a href="<%=swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                                <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                            </a>
                                        <%
                                            counter++;
                                            firstElement = false;
                                        });
                                        %>
                                    </div> <!-- . thumbs -->
                                    <%
                                    }
                                    %>
                                </div>
                            </div>
                        </div>
                        <% if ( option.isParent() ) {%>
                        </div>
                        <% } %>
                    <% if ( option.isParent() ) {
                        var loop_count  = 0;
                        var child_count = _.size(option.option_ui_children);
                        _.each(option.option_ui_children, function(child_option, child_opt_code) {
                            var child_data_code            = child_option.markup.atts.data_code;
                            var child_select_state         = child_option.markup.classes.child_select_state;
                            var child_option_price_cash    = TC.modelSOptions.price(child_option, false);
                            var child_option_price_finance = TC.modelSOptions.price(child_option, true);
                            var child_option_disclaimer    = child_option.disclaimer;
                            var swatch_length              = child_option.getAssets().length;
                            var overlay_style              = swatch_length > 1;
                            var class_overlay_style        = (overlay_style) ? "overlay" : "nooverlay";
                            var class_last_child           = '';
                            loop_count++;
                            if (loop_count === child_count) {
                                class_last_child            = 'last';
                            }
                        %>
                        <!-- ***************************** START CHILDREN OPTS ********************************** -->
                        <div class='child-wrapper-div'>
                        <div class="option clearfix shadow <%= child_select_state %> child <%= class_last_child %>" data-code="<%= child_data_code %>" data-original-opt-code="<%= child_data_code %>">
                            <div class="inner-shadow">

                                <div class="option-select" data-code="<%= child_data_code %>" data-original-opt-code="<%= child_data_code %>">
                                    <div class="option-footer">
                                        <div class="checkbox"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= child_option.name %></h3>
                                        <p><%= child_option.description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= child_option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= child_option_price_finance %></h4>
                                            <p class="disclaimer"><%= child_option_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="option-image <%= class_overlay_style %>">
                                <%
                                    // var swatch_path = (overlay_style) ? child_option.markup.atts.swatch[0].path : child_option.markup.atts.swatch.path;
                                    var swatch_path = child_option.markup.atts.swatch_path;
                                %>
                                    <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= child_option.code %> large" data-code="<%= child_data_code %>">
                                        <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                                TC.modelSOptions.mediumDefault.push(md);
                                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                    var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                    TC.modelSOptions.largeDefault.push(ld);
                                                }
                                            }
                                        %>
                                    </a>
                                    <%
                                    if( overlay_style ){
                                        var counter = 0;
                                    %>
                                    <div class="thumbs <%= class_overlay_style %>">
                                        <%
                                        var firstElement = true;
                                        _.each(child_option.markup.atts.swatch, function(swatch_thumbs, index, swatch_list) {
                                            var class_active_thumb = (counter < 1) ? "current active" : "";
                                            var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                            var swatch_link_path = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                            class_active_thumb = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                        %>
                                            <a href="<%=swatch_link_path %>" class="<%= class_overlay_style %><%= child_option.code %>" data-code="<%= child_data_code %>">
                                                <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                            </a>
                                        <%
                                            counter++;
                                            firstElement = false;
                                        });
                                        %>
                                    </div> <!-- . thumbs -->
                                    <%
                                    }
                                    %>
                                </div>
                            </div>
                        </div>
                        </div>
                        <!-- ***************************** END CHILDREN OPTS ********************************** -->
                    <%  });
                      } %>
                      <% if ( option.isParent() ) {%>
                         </div>
                      <% } %>
                    </div>
                <%
                }
            }
            else {
                if (option.ui_pair) {
                        var class_initial_selected_pair     = option.markup.classes.option_paired;
                        var class_initial_selected_ui_pair  = option.markup.classes.option_ui_paired;
                        var class_ui_pair_selected_checkbox = option.markup.classes.option_cb_ui_paired;
                        
                        var swatch_ui_path                  = option.option_ui_pairSwatch.path;
                        var data_code_ui_pair               = option.markup.atts.data_code_ui_pair;
                        
                        var swatch_ui_length                = _.keys(option.swatch).length;
                        var overlay_ui_style                = ( swatch_ui_length > 1 && _.isObject(option.swatch[0]) ) ? true : false;
                        var class_overlay_ui_style          = (overlay_ui_style) ? "overlay" : "";
                        
                        var ui_option_price_cash            = TC.modelSOptions.price(option.option_ui_pair, false);
                        var ui_option_price_finance         = TC.modelSOptions.price(option.option_ui_pair, true);
                        
                        var option_ui_name                  = (option.option_ui_pair.name ? option.option_ui_pair.name : "");
                        var option_ui_description           = (option.option_ui_pair.description ? option.option_ui_pair.description : "");
                        var option_ui_disclaimer            = (option.option_ui_pair.disclaimer ? option.option_ui_pair.disclaimer : "");
                %>
                    <div class="option option-pair clearfix">
                        <div class="clearfix paired-option shadow <%= class_initial_selected_pair %> " data-code="<%= data_code %>">
                            <div class="inner-shadow clearfix">
                                <div class="option-image <%= class_overlay_style %>">
                                    <img src="<%= option.swatch.path %>">
                                </div>
                                <div class="option-details">
                                    <h3><%= option_name %></h3>
                                    <p><%= option_description %></p>
                                </div>
                                <div class="option-footer">
                                    <div class="option-meta">
                                        <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                        <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                        <div class="checkbox"></div>
                                        <p class="disclaimer"><%= option_disclaimer %></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="clearfix paired-option ui-pair shadow <%= class_initial_selected_ui_pair %>" data-code="<%= data_code_ui_pair %>">
                            <div class="inner-shadow clearfix">
                                <div class="option-image">
                                    <img src="<%= swatch_ui_path %>">
                                </div>
                                <div class="option-details">
                                    <h3><%= option_ui_name %></h3>
                                    <p><%= option_ui_description %></p>
                                </div>
                                <div class="option-footer">
                                    <div class="option-meta">
                                        <h4 class="cash-price hidden"><%= ui_option_price_cash %></h4>
                                        <h4 class="financed-price hidden"><%= ui_option_price_finance %></h4>
                                        <div class="checkbox <%= class_ui_pair_selected_checkbox %>"></div>
                                        <p class="disclaimer"><%= option_ui_disclaimer %></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <%
                }
                else {
                %>
                    <div class="option clearfix shadow <%= class_selected_state   %> ver_1_5" data-code="<%= data_code %>">
                        <div class="inner-shadow">

                            <div class="option-image">
                                <img src="<%= option.swatch.path %>">
                            </div>
                            <div class="option-details">
                                <h3><%= option_name %></h3>
                                <p><%= option_description %></p>
                            </div>
                            <div class="option-footer">
                                <div class="option-meta">
                                    <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                    <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                    <div class="checkbox"></div>
                                    <p class="disclaimer"><%= option_disclaimer %></p>
                                </div>
                            </div>

                        </div>
                    </div>
                <%
                }
            }
            %>
        <% }); %>
        </div>

</script>
<script id="template-performance" type="text/template">

<div class="category-group" id="options_category_<%= performance.category %>"></div>

</script>

<script id="template-performance-items" type="text/template">
    <%
        // outer params
        // @category
        // @description
        // @disclaimer
        // @numOptions

        var descriptionText = (performance.description === null) ? "" : "<p>" + performance.description + "</p>";
        var numOptionsClass = (performance.numOptions === 1) ? "solo" : "";
    %>
    
    <h2><%= performance.name %></h2>
        <%= descriptionText %>
        <div class="option-list clearfix <%= numOptionsClass %>">
            <div class="option-package">
            <%
            _.each(performance.sub_option, function(option) {
            %>
            <%
                var class_option_checkbox  = option.markup.classes.option_cb;
                var class_initial_selected = option.markup.classes.option;
                var swatch_path            = option.markup.atts.swatch_path;
                var data_code              = option.markup.atts.data_code;

                //--
                var option_name            = (option.name ? option.name : "");
                var option_description     = (option.description ? option.description : "");
                var option_disclaimer      = (option.disclaimer ? option.disclaimer : "");
                var option_price_cash      = TC.modelSOptions.price(option, false);
                var option_price_finance   = TC.modelSOptions.price(option, true);

                //--
                var swatch_length       = _.keys(option.swatch).length;
                var overlay_style       = ( swatch_length > 1 && _.isObject(option.swatch[0]) );
                var class_overlay_style = (overlay_style) ? "overlay" : "nooverlay";
            %>
                <%
                if (option.ui_pair) {
                        var class_ui_pair                  = option.markup.classes.option_paired;
                        var class_ui_pair_initial_selected = option.markup.classes.option_ui_paired;
                        var class_ui_pair_checkbox         = option.markup.classes.option_ui_paired_cb;

                        //--
                        var swatch_ui_path        = option.markup.atts.swatch_path_ui_pair;
                        var data_code_ui_pair     = option.markup.atts.data_code_ui_pair;
                        var swatch_ui_length      = _.keys(option.swatch).length;
                        var overlay_ui_style      = ( swatch_ui_length > 1 && _.isObject(option.swatch[0]) ) ? true : false;
                        var overlay_ui_styleClass = (overlay_ui_style) ? "overlay" : "";

                        //--
                        var ui_option_price_cash    = TC.modelSOptions.price(option.option_ui_pair, false);
                        var ui_option_price_finance = TC.modelSOptions.price(option.option_ui_pair, true);
                        var option_ui_name          = (option.option_ui_pair.name ? option.option_ui_pair.name : "");
                        var option_ui_description   = (option.option_ui_pair.description ? option.option_ui_pair.description : "");
                        var option_ui_disclaimer    = (option.option_ui_pair.disclaimer ? option.option_ui_pair.disclaimer : "");
                %>
                    <div class="option option-pair clearfix">
                        <div class="clearfix shadow paired-option <%= class_ui_pair %> " data-code="<%= data_code %>">
                            <div class="inner-shadow clearfix">
                                <div class="option-select">
                                    <div class="option-footer">
                                        <div class="checkbox"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= option_name %></h3>
                                        <p><%= option_description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                            <p class="disclaimer"><%= option_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                            <div class="option-image <%= class_overlay_style %>">
                            <%
                                var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                            %>
                                <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                    <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if( overlay_style ){
                                    var counter = 0;
                                %>
                                <div class="thumbs <%= class_overlay_style %>">
                                    <%
                                    var firstElement = true;
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        var class_active_thumb = (counter < 1) ? "current active" : "";
                                        var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                        var swatch_link_path   = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                        class_active_thumb     = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                    %>
                                        <a href="<%= swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                            <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                        </a>
                                    <%
                                        counter++;
                                        firstElement = false;
                                    });
                                    %>
                                </div> <!-- . thumbs -->
                                <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                    <%
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                        %>
                                        <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                        <%
                                        }
                                        else {
                                        %>
                                        <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                        <%
                                        }
                                        %>
                                    <%
                                    });
                                    %>
                                </div> . slides -->
                                <%
                                }
                                %>
                            </div>

                            </div>
                        </div>

                        <div class="clearfix shadow paired-option ui-pair <%= class_ui_pair_initial_selected %>" data-code="<%= data_code_ui_pair %>">
                            <div class="inner-shadow clearfix">

                                <div class="option-select" data-code="<%= data_code %>">
                                    <div class="option-footer">
                                        <div class="checkbox"></div>
                                    </div>
                                    <div class="option-details">
                                        <h3><%= option_ui_name %></h3>
                                        <p><%= option_ui_description %></p>
                                        <div class="option-meta">
                                            <h4 class="cash-price hidden"><%= ui_option_price_cash %></h4>
                                            <h4 class="financed-price hidden"><%= ui_option_price_finance %></h4>
                                            <p class="disclaimer"><%= option_ui_disclaimer %></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="option-image <%= class_overlay_style %>">
                                <%
                                    var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                                %>
                                    <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                        <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad) {
                                                var md = TC.modelSOptions.getMediumImage(swatch_path);
                                                TC.modelSOptions.mediumDefault.push(md);
                                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                    var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                    TC.modelSOptions.largeDefault.push(ld);
                                                }
                                            }
                                        %>
                                    </a>
                                    <%
                                    if( overlay_style ){
                                        var counter = 0;
                                    %>
                                    <div class="thumbs <%= class_overlay_style %>">
                                        <%
                                        var firstElement = true;
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            var class_active_thumb = (counter < 1) ? "current active" : "";
                                            var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                            var swatch_link_path   = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                            class_active_thumb     = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                        %>
                                            <a href="<%= swatch_thumbs.path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                                <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                            </a>
                                        <%
                                            counter++;
                                            firstElement = false;
                                        });
                                        %>
                                    </div> <!-- . thumbs -->
                                    <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                        <%
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                            %>
                                            <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                            <%
                                            }
                                            else {
                                            %>
                                            <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                            <%
                                            }
                                            %>
                                        <%
                                        });
                                        %>
                                    </div> . slides -->
                                    <%
                                    }
                                    %>
                                </div>


                            </div>
                        </div>
                    </div>
                <%
                }
                else {
                %>
                    <div class="option shadow clearfix <%= class_initial_selected %>" data-code="<%= data_code %>">
                        <div class="inner-shadow">

                            <div class="option-select" data-code="<%= data_code %>">
                                <div class="option-footer">
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option-details">
                                    <h3><%= option_name %></h3>
                                    <p><%= option_description %></p>
                                    <div class="option-meta">
                                        <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                        <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                        <p class="disclaimer"><%= option_disclaimer %></p>
                                    </div>
                                </div>
                            </div>

                            <div class="option-image <%= class_overlay_style %>">
                            <%
                                var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                            %>
                                <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                    <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if( overlay_style ){
                                    var counter = 0;
                                %>
                                <div class="thumbs <%= class_overlay_style %>">
                                    <%
                                    var firstElement = true;
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        var class_active_thumb = (counter < 1) ? "current active" : "";
                                        var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                        var swatch_link_path = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                        class_active_thumb = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                    %>
                                        <a href="<%=swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                            <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                        </a>
                                    <%
                                        counter++;
                                        firstElement = false;
                                    });
                                    %>
                                </div> <!-- . thumbs -->
                                <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                    <%
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                        %>
                                        <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                        <%
                                        }
                                        else {
                                        %>
                                        <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                        <%
                                        }
                                        %>
                                    <%
                                    });
                                    %>
                                </div> . slides -->
                                <%
                                }
                                %>
                            </div>

                        </div>
                    </div>
                <%
                }
                %>
            <% }); %>
            </div>
        </div>
    </div>

</script>
<script id="template-accessory" type="text/template">
    <div class="category-group" id="options_category_<%= accessory.category %>"></div>
</script>

<script id="template-accessory-items" type="text/template">
    <%
        // outer params
        // @category
        // @description
        // @disclaimer
        // @numOptions

        var descriptionText = (accessory.description === null) ? "" : "<p>" + accessory.description + "</p>";
        var numOptionsClass = (accessory.numOptions === 1) ? "solo" : "";
    %>

    <h2><%= accessory.name %></h2>
        <% // descriptionText %>
        <div class="option-list clearfix <%= numOptionsClass %>">
            
            <%
            _.each(accessory.sub_option, function(option) {
            %>
            <%
                var class_option_cb        = option.markup.classes.option_cb;
                var class_initial_selected = option.markup.classes.option;
                var swatch_path            = option.markup.atts.swatch_path;
                var data_code              = option.markup.atts.data_code;

                var option_name          = option.name;
                var option_description   = option.description;
                var option_disclaimer    = option.disclaimer;
                var option_price_cash    = TC.modelSOptions.price(option, false);
                var option_price_finance = TC.modelSOptions.price(option, true);

                var swatch_length       = _.keys(option.swatch).length;
                var overlay_style       = ( swatch_length > 1 && _.isObject(option.swatch[0]) );
                var class_overlay_style = (overlay_style) ? "overlay" : "nooverlay";
            %>
            <div class="option-package">
            <%

                if ( !_.isEmpty(option.dependent_overrides) ) {
                    option_disclaimer = option.dependent_override_disclaimer;
                    if (option.dependent_override_indicator === "Included") {
                        option_price_cash = option.dependent_override_price_indicator;
                    }
                    else {
                        option_price_cash = TC.externalInterface.formatCurrency(option.dependent_override_price, true, false);
                    }
                }

                if ( option.ui_children ) {
                    var swatch_path = overlay_style ? option.swatch[0].path : option.swatch.path;
                    %>
                    <div class="option clearfix shadow <%= class_initial_selected %>" data-code="<%= option.data_code %>">
                        <div class="inner-shadow grouped">
                            <div class="grouped-header" style="">
                                <h3><%= option.name %></h3>
                                <p><%= option.description %></p>
                                <div class="option-meta">
                                    <p class="disclaimer"><%= option.disclaimer %></p>
                                </div>
                            </div>

                            <div class="option-image <%= class_overlay_style %>">
                                <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                    <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if ( overlay_style ) {
                                    var counter = 0;
                                    %>
                                    <div class="thumbs <%= class_overlay_style %>">
                                        <%
                                        var firstElement = true;
                                        _.each(option.swatch, function(swatch_thumbs) {
                                            var class_active_thumb = (counter < 1) ? "current active" : "";
                                            var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                            var swatch_link_path   = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                            class_active_thumb     = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                            %>
                                                <a href="<%=swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                                    <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                    <%
                                                        if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                            var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                            TC.modelSOptions.smallDefault.push(sd);
                                                            if (!firstElement) {
                                                                var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                                TC.modelSOptions.mediumNonDefault.push(mnd);
                                                                var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                                TC.modelSOptions.largeNonDefault.push(lnd);
                                                            }
                                                        }
                                                    %>
                                                </a>
                                            <%
                                            counter++;
                                            firstElement = false;
                                        });
                                        %>
                                    </div> <!-- . thumbs -->
                                    <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                        <%
                                            _.each(option.swatch, function(swatch_thumbs) {
                                                if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                                    %>
                                                    <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                                    <%
                                                }
                                            });
                                        %>
                                    </div> . slides -->
                                    <%
                                }
                                %>
                            </div>

                                <%
                                _.each(option.option_ui_children, function( child_option, child_opt_code, list ) {
                                    var option_price_cash        = TC.modelSOptions.price(child_option, false);
                                    var option_price_finance     = TC.modelSOptions.price(child_option, true);
                                    %>
                                    <div class="option-select  <%= child_option.markup.classes.child_select_state %>" data-code="<%= child_opt_code %>">
                                        <div class="option-footer">
                                            <div class="checkbox"></div>
                                        </div>
                                        <div class="option-details">
                                            <h3><%= child_option.name %></h3>
                                            <p><%= child_option.description %></p>
                                            <div class="option-meta">
                                                <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                                <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                                <p class="disclaimer"><%= child_option.disclaimer %></p>
                                            </div>
                                        </div>
                                    </div>
                                    <%
                                });
                                %>

                        </div>
                    </div>
                    <%
                }
                else {
                %>
                    <div class="option clearfix shadow <%= class_initial_selected %>" data-code="<%= data_code %>">
                        <div class="inner-shadow">

                            <div class="option-select" data-code="<%= data_code %>">
                                <div class="option-footer">
                                    <div class="checkbox"></div>
                                </div>
                                <div class="option-details">
                                    <h3><%= option_name %></h3>
                                    <p><%= option_description %></p>
                                    <div class="option-meta">
                                        <h4 class="cash-price hidden"><%= option_price_cash %></h4>
                                        <h4 class="financed-price hidden"><%= option_price_finance %></h4>
                                        <p class="disclaimer"><%= option_disclaimer %></p>
                                    </div>
                                </div>
                            </div>

                            <div class="option-image <%= class_overlay_style %>">
                            <%
                                var swatch_path = (overlay_style) ? option.swatch[0].path : option.swatch.path;
                            %>
                                <a href="<%= swatch_path %>" class="<%= class_overlay_style %><%= option.code %> large" data-code="<%= option.code %>">
                                    <img alt="" class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatch_path);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatch_path);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if( overlay_style ){
                                    var counter = 0;
                                %>
                                <div class="thumbs <%= class_overlay_style %>">
                                    <%
                                    var firstElement = true;
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        var class_active_thumb = (counter < 1) ? "current active" : "";
                                        var swatch_thumb_video = (swatch_thumbs.video) ? swatch_thumbs.video : "";
                                        var swatch_link_path = ( !(typeof(swatch_thumb_video) != "undefined") ) ? swatch_thumb_video : ( (swatch_thumbs.path) ? swatch_thumbs.path : "" );
                                        class_active_thumb = ( !(typeof(swatch_thumb_video) != "undefined") ) ? class_active_thumb + " video" : class_active_thumb;
                                    %>
                                        <a href="<%=swatch_link_path %>" class="<%= class_overlay_style %><%= option.code %>" data-code="<%= option.code %>">
                                            <img class="thumb <%= class_active_thumb %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatch_thumbs.path) %>">
                                                <%
                                                    if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                        var sd = TC.modelSOptions.getSmallImage(swatch_thumbs.path);
                                                        TC.modelSOptions.smallDefault.push(sd);
                                                        if (!firstElement) {
                                                            var mnd = TC.modelSOptions.getMediumImage(swatch_thumbs.path);
                                                            TC.modelSOptions.mediumNonDefault.push(mnd);
                                                            var lnd = TC.modelSOptions.getLargeImage(swatch_thumbs.path);
                                                            TC.modelSOptions.largeNonDefault.push(lnd);
                                                        }
                                                    }
                                                %>
                                        </a>
                                    <%
                                        counter++;
                                        firstElement = false;
                                    });
                                    %>
                                </div> <!-- . thumbs -->
                                <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                    <%
                                    _.each(option.swatch, function(swatch_thumbs) {
                                        if ( typeof(swatch_thumbs.video) != "undefined" && !($.isEmptyObject(swatch_thumbs.video)) ) {
                                        %>
                                        <iframe src="<%= swatch_thumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                        <%
                                        }
                                        else {
                                        %>
                                        <img src="<%= swatch_thumbs.path %>" alt="Tesla Design Studio Image" />
                                        <%
                                        }
                                        %>
                                    <%
                                    });
                                    %>
                                </div> . slides -->
                                <%
                                }
                                %>
                            </div>

                        </div>
                    </div>
                <%
                }
                %>
                </div>
            <% }); %>
            </div>
        </div>
    </div>

</script>

<script id="template-packages" type="text/template">
    <%
        // outer params
        // @category
        // @description
        // @disclaimer
        // @numOptions

        var descriptionText = packages.description === null ? "" : "<p>" + packages.description + "</p>";
        var numOptionsClass = (packages.numOptions === 1 ? "solo" : "");
    %>
    <div class="category-group" id="options_category_<%= packages.category %>">
    <h2><%= packages.name %></h2>
        <%= descriptionText %>
        <div class="option-list clearfix <%= numOptionsClass %>">
        <%
        _.each(packages.subOption, function(option) {
        %>
        <%
            var optionCBClass = option.markupClasses.optionCB;
            var initialSelectedClass = option.markupClasses.option;
            var swatchPath = option.markupAtts.swatchPath;
            var dataCode = option.markupAtts.dataCode;

            var optionName = (option.options.name ? option.options.name : "");
            var optionDescription = (option.options.description ? option.options.description : "");
            var optionDisclaimer = (option.options.disclaimer ? option.options.disclaimer : "");
            var modelSOptionsPriceCash = TC.modelSOptions.price(option.options, false);
            var modelSOptionsPriceFinance = TC.modelSOptions.price(option.options, true);

            var swatchLength = _.keys(option.swatch).length;
            var overlayStyle = ( swatchLength > 1 && _.isObject(option.swatch[0]) ) ? true : false;
            var overlayStyleClass = (overlayStyle) ? "overlay" : "nooverlay";
        %>
            <%
            if (option.ui_pair) {
                    var initialSelectedPairClass = option.markupClasses.optionPaired;
                    var uiPairInitialSelectedClass = option.markupClasses.optionUIPaired;
                    var uiPairOptionCBClass = option.markupClasses.optionCBUIPaired;

                    var swatchUIPath = option.markupAtts.swatchPathUIPair;
                    var dataCodeUIPair = option.markupAtts.dataCodeUIPair;

                    var swatchUILength = _.keys(option.swatch).length;
                    var overlayUIStyle = ( swatchUILength > 1 && _.isObject(option.swatch[0]) ) ? true : false;
                    var overlayUIStyleClass = (overlayUIStyle) ? "overlay" : "";

                    var uiModelSOptionsPriceCash = TC.modelSOptions.price(option.optionUIpair, false);
                    var uiModelSOptionsPriceFinance = TC.modelSOptions.price(option.optionUIpair, true);

                    var optionUIName = (option.optionUIpair.name ? option.optionUIpair.name : "");
                    var optionUIDescription = (option.optionUIpair.description ? option.optionUIpair.description : "");
                    var optionUIDisclaimer = (option.optionUIpair.disclaimer ? option.optionUIpair.disclaimer : "");
            %>
                <div class="option option-pair clearfix">
                    <div class="clearfix paired-option shadow <%= initialSelectedPairClass %> " data-code="<%= dataCode %>">
                        <div class="inner-shadow clearfix">
                            <div class="option-select">
                                <div class="option-footer">
                                    <div class="checkbox <%= optionCBClass %>"></div>
                                </div>
                                <div class="option-details">
                                    <h3><%= optionName %></h3>
                                    <p><%= optionDescription %></p>
                                    <h4 class="cash-price"><%= modelSOptionsPriceCash %></h4>
                                    <h4 class="financed-price hidden"><%= modelSOptionsPriceFinance %></h4>
                                    <p class="disclaimer"><%= optionDisclaimer %></p>
                                </div>
                            </div>

                        <div class="option-image <%= overlayStyleClass %>">
                        <%
                            var swatchPath = (overlayStyle) ? option.swatch[0].path : option.swatch.path;
                        %>
                            <a href="<%= swatchPath %>" class="<%= overlayStyleClass %><%= option.code %>" data-code="<%= option.code %>">
                                <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                                <%
                                    if (TC.modelSOptions.initLoad) {
                                        var md = TC.modelSOptions.getMediumImage(swatchPath);
                                        TC.modelSOptions.mediumDefault.push(md);
                                        if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                            var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                            TC.modelSOptions.largeDefault.push(ld);
                                        }
                                    }
                                %>
                            </a>
                            <%
                            if( overlayStyle ){
                                var counter = 0;
                            %>
                            <div class="thumbs <%= overlayStyleClass %>">
                                <%
                                var firstElement = true;
                                _.each(option.swatch, function(swatchThumbs) {
                                    var activeThumbClass = (counter < 1) ? "current active" : "";
                                    var swatchThumbVideo = (swatchThumbs.video) ? swatchThumbs.video : "";
                                    var swatchLinkPath = ( !(typeof(swatchThumbVideo) != "undefined") ) ? swatchThumbVideo : ( (swatchThumbs.path) ? swatchThumbs.path : "" );
                                    activeThumbClass = ( !(typeof(swatchThumbVideo) != "undefined") ) ? activeThumbClass + " video" : activeThumbClass;
                                %>
                                    <a href="<%= swatchLinkPath %>" class="<%= overlayStyleClass %><%= option.code %>" data-code="<%= option.code %>">
                                        <img class="thumb <%= activeThumbClass %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatchThumbs.path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var sd = TC.modelSOptions.getSmallImage(swatchThumbs.path);
                                                TC.modelSOptions.smallDefault.push(sd);
                                                if (!firstElement) {
                                                    var mnd = TC.modelSOptions.getMediumImage(swatchThumbs.path);
                                                    TC.modelSOptions.mediumNonDefault.push(mnd);
                                                    var lnd = TC.modelSOptions.getLargeImage(swatchThumbs.path);
                                                    TC.modelSOptions.largeNonDefault.push(lnd);
                                                }
                                            }
                                        %>
                                    </a>
                                <%
                                    counter++;
                                    firstElement = false;
                                });
                                %>
                            </div> <!-- . thumbs -->
                            <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                <%
                                _.each(option.swatch, function(swatchThumbs) {
                                    if ( typeof(swatchThumbs.video) != "undefined" && !($.isEmptyObject(swatchThumbs.video)) ) {
                                    %>
                                    <iframe src="<%= swatchThumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                    <%
                                    }
                                    else {
                                    %>
                                    <img src="<%= swatchThumbs.path %>" alt="Tesla Design Studio Image" />
                                    <%
                                    }
                                    %>
                                <%
                                });
                                %>
                            </div> . slides -->
                            <%
                            }
                            %>
                        </div>

                        </div>
                    </div>

                    <div class="clearfix paired-option ui-pair shadow <%= uiPairInitialSelectedClass %>" data-code="<%= dataCodeUIPair %>">
                        <div class="inner-shadow clearfix">

                            <div class="option-select" data-code="<%= dataCode %>">
                                <div class="option-footer">
                                    <div class="checkbox <%= uiPairOptionCBClass %>"></div>
                                </div>
                                <div class="option-details">
                                    <h3><%= optionUIName %></h3>
                                    <p><%= optionUIDescription %></p>
                                    <h4 class="cash-price"><%= uiModelSOptionsPriceCash %></h4>
                                    <h4 class="financed-price hidden"><%= uiModelSOptionsPriceFinance %></h4>
                                    <p class="disclaimer"><%= optionUIDisclaimer %></p>
                                </div>
                            </div>

                            <div class="option-image <%= overlayStyleClass %>">
                            <%
                                var swatchPath = (overlayStyle) ? option.swatch[0].path : option.swatch.path;
                            %>
                                <a href="<%= swatchPath %>" class="<%= overlayStyleClass %><%= option.code %> large" data-code="<%= option.code %>">
                                    <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                                    <%
                                        if (TC.modelSOptions.initLoad) {
                                            var md = TC.modelSOptions.getMediumImage(swatchPath);
                                            TC.modelSOptions.mediumDefault.push(md);
                                            if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                                TC.modelSOptions.largeDefault.push(ld);
                                            }
                                        }
                                    %>
                                </a>
                                <%
                                if( overlayStyle ){
                                    var counter = 0;
                                %>
                                <div class="thumbs <%= overlayStyleClass %>">
                                    <%
                                    var firstElement = true;
                                    _.each(option.swatch, function(swatchThumbs) {
                                        var activeThumbClass = (counter < 1) ? "current active" : "";
                                        var swatchThumbVideo = (swatchThumbs.video) ? swatchThumbs.video : "";
                                        var swatchLinkPath = ( !(typeof(swatchThumbVideo) != "undefined") ) ? swatchThumbVideo : ( (swatchThumbs.path) ? swatchThumbs.path : "" );
                                        activeThumbClass = ( !(typeof(swatchThumbVideo) != "undefined") ) ? activeThumbClass + " video" : activeThumbClass;
                                    %>
                                        <a href="<%= swatchThumbs.path %>" class="<%= overlayStyleClass %><%= option.code %>" data-code="<%= option.code %>">
                                            <img class="thumb <%= activeThumbClass %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatchThumbs.path) %>">
                                            <%
                                                if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                    var sd = TC.modelSOptions.getSmallImage(swatchThumbs.path);
                                                    TC.modelSOptions.smallDefault.push(sd);
                                                    if (!firstElement) {
                                                        var mnd = TC.modelSOptions.getMediumImage(swatchThumbs.path);
                                                        TC.modelSOptions.mediumNonDefault.push(mnd);
                                                        var lnd = TC.modelSOptions.getLargeImage(swatchThumbs.path);
                                                        TC.modelSOptions.largeNonDefault.push(lnd);
                                                    }
                                                }
                                            %>
                                        </a>
                                    <%
                                        counter++;
                                        firstElement = false;
                                    });
                                    %>
                                </div> <!-- . thumbs -->
                                <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                    <%
                                    _.each(option.swatch, function(swatchThumbs) {
                                        if ( typeof(swatchThumbs.video) != "undefined" && !($.isEmptyObject(swatchThumbs.video)) ) {
                                        %>
                                        <iframe src="<%= swatchThumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                        <%
                                        }
                                        else {
                                        %>
                                        <img src="<%= swatchThumbs.path %>" alt="Tesla Design Studio Image" />
                                        <%
                                        }
                                        %>
                                    <%
                                    });
                                    %>
                                </div> . slides -->
                                <%
                                }
                                %>
                            </div>


                        </div>
                    </div>
                </div>
            <%
            }
            else {
            %>
                <div class="option clearfix shadow <%= initialSelectedClass %>" data-code="<%= dataCode %>">
                    <div class="inner-shadow">

                        <div class="option-select" data-code="<%= dataCode %>">
                            <div class="option-footer">
                                <div class="checkbox <%= optionCBClass %>"></div>
                            </div>
                            <div class="option-details">
                                <h3><%= optionName %></h3>
                                <p><%= optionDescription %></p>
                                <h4 class="cash-price"><%= modelSOptionsPriceCash %></h4>
                                <h4 class="financed-price hidden"><%= modelSOptionsPriceFinance %></h4>
                                <p class="disclaimer"><%= optionDisclaimer %></p>
                            </div>
                        </div>

                        <div class="option-image <%= overlayStyleClass %>">
                        <%
                            var swatchPath = (overlayStyle) ? option.swatch[0].path : option.swatch.path;
                        %>
                            <a href="<%= swatchPath %>" class="<%= overlayStyleClass %><%= option.code %> large" data-code="<%= option.code %>">
                                <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                                <%
                                    if (TC.modelSOptions.initLoad) {
                                        var md = TC.modelSOptions.getMediumImage(swatchPath);
                                        TC.modelSOptions.mediumDefault.push(md);
                                        if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                            var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                            TC.modelSOptions.largeDefault.push(ld);
                                        }
                                    }
                                %>
                            </a>
                            <%
                            if( overlayStyle ){
                                var counter = 0;
                            %>
                            <div class="thumbs <%= overlayStyleClass %>">
                                <%
                                var firstElement = true;
                                _.each(option.swatch, function(swatchThumbs) {
                                    var activeThumbClass = (counter < 1) ? "current active" : "";
                                    var swatchThumbVideo = (swatchThumbs.video) ? swatchThumbs.video : "";
                                    var swatchLinkPath = ( !(typeof(swatchThumbVideo) != "undefined") ) ? swatchThumbVideo : ( (swatchThumbs.path) ? swatchThumbs.path : "" );
                                    activeThumbClass = ( !(typeof(swatchThumbVideo) != "undefined") ) ? activeThumbClass + " video" : activeThumbClass;
                                %>
                                    <a href="<%=swatchLinkPath %>" class="<%= overlayStyleClass %><%= option.code %>" data-code="<%= option.code %>">
                                        <img class="thumb <%= activeThumbClass %>" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getSmallImage(swatchThumbs.path) %>">
                                        <%
                                            if (TC.modelSOptions.initLoad && !_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                                var sd = TC.modelSOptions.getSmallImage(swatchThumbs.path);
                                                TC.modelSOptions.smallDefault.push(sd);
                                                if (!firstElement) {
                                                    var mnd = TC.modelSOptions.getMediumImage(swatchThumbs.path);
                                                    TC.modelSOptions.mediumNonDefault.push(mnd);
                                                    var lnd = TC.modelSOptions.getLargeImage(swatchThumbs.path);
                                                    TC.modelSOptions.largeNonDefault.push(lnd);
                                                }
                                            }
                                        %>
                                    </a>
                                <%
                                    counter++;
                                    firstElement = false;
                                });
                                %>
                            </div> <!-- . thumbs -->
                            <!-- <div class="slides hidden" id="slides<%= option.code %>">
                                <%
                                _.each(option.swatch, function(swatchThumbs) {
                                    if ( typeof(swatchThumbs.video) != "undefined" && !($.isEmptyObject(swatchThumbs.video)) ) {
                                    %>
                                    <iframe src="<%= swatchThumbs.video %>" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                                    <%
                                    }
                                    else {
                                    %>
                                    <img src="<%= swatchThumbs.path %>" alt="Tesla Design Studio Image" />
                                    <%
                                    }
                                    %>
                                <%
                                });
                                %>
                            </div> . slides -->
                            <%
                            }
                            %>
                        </div>

                    </div>
                </div>
            <%
            }
            %>
        <% }); %>
        </div>
    </div>

</script>
<script id="template-standard_equipment" type="text/template">
    <div class="category-group clearfix" id="options_category_<%= standard_equipment.category %>">
        <h2><%= standard_equipment["name"] %></h2>
        <%
        if ( standard_equipment["asset"] !== undefined && standard_equipment["asset"]["path"] !== undefined ) {
            var swatch_path = standard_equipment["asset"]["path"];
        %>
        <div class="cat_hero option-image">
            <a href="<%= swatch_path %>" class="nooverlay <%= standard_equipment.category %> large" data-code="<%= standard_equipment.category %>">
                <img alt='Complementary image for the <%= standard_equipment["name"] %> section' class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatch_path) %>">
                <%
                    if (TC.modelSOptions.initLoad) {
                        var md = TC.modelSOptions.getMediumImage(swatch_path);
                        TC.modelSOptions.mediumDefault.push(md);
                        if (!_.contains(TC.global.overlayOpts.notActive, standard_equipment.category)) {
                            var ld = TC.modelSOptions.getLargeImage(swatch_path);
                            TC.modelSOptions.largeDefault.push(ld);
                        }
                    }
                %>
            </a>
        </div>
        <%
        }
        %>
        <p><%= standard_equipment["description"] %></p>
    </div>
</script>


<script id="template-standard_equipment_july_version" type="text/template">
    <div class="category-group clearfix" id="options_category_<%= standard_equipment.category %>">
        <h2><%= standard_equipment.name %></h2>
        <%
            _.each(standard_equipment.options, function(option) {
                var hasDescription = option.no_description ? false : true;

                if (hasDescription) {
        %>
            <div class="standard_equipment-option has-description">
                <div class="option-image">
                    <%
                        var swatchLength = _.keys(option.swatch).length;
                        var swatchPath   = ( swatchLength > 1 && _.isObject(option.swatch[0]) ) ? option.swatch[0].path : option.swatch.path;
                    %>
                    <a href="<%= swatchPath %>" class="nooverlay <%= option.code %> large" data-code="<%= option.code %>">
                        <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                        <%
                            if (TC.modelSOptions.initLoad) {
                                var md = TC.modelSOptions.getMediumImage(swatchPath);
                                TC.modelSOptions.mediumDefault.push(md);
                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                    var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                    TC.modelSOptions.largeDefault.push(ld);
                                }
                            }
                        %>
                    </a>
                </div>
                <div class="option-description">
                    <h3><%= option.name %></h3>
                    <%= option.description %>
                </div>
            </div>
        <%
                }
                else {
        %>
            <div class="standard_equipment-option">
                <div class="option-image">
                    <%
                        var swatchLength = _.keys(option.swatch).length;
                        var swatchPath   = ( swatchLength > 1 && _.isObject(option.swatch[0]) ) ? option.swatch[0].path : option.swatch.path;
                    %>
                    <a href="<%= swatchPath %>" class="nooverlay <%= option.code %> large" data-code="<%= option.code %>">
                        <img class="large" src="<%= TC.modelSOptions.blankImg %>" data-src="<%= TC.modelSOptions.getMediumImage(swatchPath) %>">
                        <%
                            if (TC.modelSOptions.initLoad) {
                                var md = TC.modelSOptions.getMediumImage(swatchPath);
                                TC.modelSOptions.mediumDefault.push(md);
                                if (!_.contains(TC.global.overlayOpts.notActive, option.code)) {
                                    var ld = TC.modelSOptions.getLargeImage(swatchPath);
                                    TC.modelSOptions.largeDefault.push(ld);
                                }
                            }
                        %>
                    </a>
                </div>
                <h3><%= option.name %></h3>
            </div>
        <% 
                }
            });
        %>
    </div>
</script>
<script id="template-summary-panel-tabs-view-ca" type="text/template">
<% 
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @market: Canada, RENA (North America)
    * @jira: WEB-18239 && WEB-18301
    * @version: Pre-October 2014 (aka Pre-Configurator Version 3)
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.summary_rena.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'>
                <%= _model.getLeasingAmount(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                _.each(lease_data.view[ locale ].mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
        </div>

        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'>
                <%= _model.getFinancingMonthlyBasePayment(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <p class='finance-amount-text'>
                <span>
                    <span class="finance-amount-text-savings"></span>
                </span>
            </p>
        </div>

        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <p class='cash-amount-text'><%= all_tabs_data.cash.strings.tag_line %></p>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-ca" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date'>
        <h3 class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</h3>
        <p class='description'><%= edd_localized_strings["description"] %></p>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-ca" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    **/

    var _model         = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab     = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      = _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <div class="top-shadow"></div>
            <ul class='emc-list'>
                <li>
                    <span class='label'><%= _strings.estimated_monthly_payment %><span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-payment'><%= _model.getLeasingAmount(true) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
                <li id="gas-savings-wrapper">
                    <span class='label'><%= _strings.gas_savings %><span class='hidden'>:</span>
                        <span class='effective-price'>- 
                            <span class='gas-savings-amount'><%= formatCurrency(gas_savings, true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
                <li class='primary'>
                    <span class='label'><%= _strings.montly_cost_with_savings %>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-cost-num'><%= formatCurrency(lease_amount, true, false ) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</script>

<script id="template-summary-non-lease-details-view-ca" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var current_battery_code            = _model.getCurrentBattery();
    var lease_amount                    = _model.getMonthlyCost();
    var monthly_base_pmt                = _model.getLeasingAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';

    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- CSS classes
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings + line-item labels
    var label_net_money               = _strings.net_price_with_incentives;
    var label_down_payment            = _strings.down_payment;
    var label_incentives_available_in = _strings.state_incentive.available_incentives;
    var label_live_in_different_state = _strings.state_incentive.different_incentive_selector;
    var label_incentive_stand_alone   = _strings.state_incentive.incentive_standalone;

    //-- Line-item labels and corresponding prices
    var amt_finance_due_at_delivery = _model.calculateFinanceDueAtDeliveryAmount();
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>
        <div class='top-shadow'></div>
        <ul class='details-list estimated-monthly-payment'>
            <li id="non-lease-estimated-monthly-payment">
                <span class='label'>
                    <span class='nld-current-battery'><%= _strings.estimated_monthly_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='emp-amount sub-total'><%= formatCurrency(_model.getFinancingMonthlyBasePayment(), true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-gas-savings">
                <span class='label'><%= _strings.gas_savings %> 
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>- 
                        <span class='gas-savings-amount'></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-grv" class='hidden'>
                <span class='label'><%= _strings.guaranteed_resale_value %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='grs-amount'>In-progress</span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-net-monthly-cost" class="primary">
                <span class='label'><%= _strings.montly_cost_with_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='nmc-amount'>- <%= formatCurrency(financing_monthly_effective_pmt, true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
        </ul>

        <div class='top-shadow incentives-list-shadow'></div>
        <ul class='details-list'>
            <li id="non-lease-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'><%= label_down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(sub_total, true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'><%= _strings.federal_tax_credit %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>- <%= formatCurrency(_model.getFederalIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-active-state" class='<%= css_class_non_lease_active_state %>'>
                <span class='label'>
                    <span class='active-non-lease-state-long-name'><%= _model.getActiveStateNonLeaseLongName() %></span> <%= label_incentive_stand_alone.toLowerCase() %> (<a class='change_state blue' style='font-size:10.5px; color:#1f88ce; cursor: pointer'><%= label_live_in_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment incentive-price'>
                        <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <%
            if ( state_incentives_for_active_tab ) {
            %>
            <li id="non-lease-state-switcher" class="<%= css_class_non_lease_active_state_switcher %>">
                <span class='label' class='hidden'>
                    <%= label_incentives_available_in %> 
                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <span class='state-incentive <%= state_incentive_code %>'><a class='blue active' data-state="<%= state_incentive_code %>"><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %></span> 
                    <%
                    }
                    %>
                </span>
            </li>
            <%
            }
            %>
            <li id='non-lease-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'><span class='net-down-payment-text'><%= label_net_money %></span></span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment due-at-delivery-amount'><%= formatCurrency(_model.calculateFinanceDueAtDeliveryAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-lease-details-view-ca" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;
    var label_incentive_stand_alone       = _strings.state_incentive.incentive_standalone;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>
        <div class="top-shadow"></div>
        <ul class='details-list'>
            <li>
                <span class='label'><%= _strings.down_payment %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(_model.getReservationPrice(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='lease-state-switcher' class='hidden'>
                <span class='label' class=''>
                    <%= label_incentives_available_in %>

                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %> 
                    <%
                    }
                    %>
                </span>
            </li>
            <li id='lease-state-incentive-wrapper' class=''>
                <span class='label'>
                    <span class='active-state-long-name'><%= _model.getActiveStateLeaseLongName() %></span> <%= label_incentive_stand_alone.toLowerCase() %> (<a class='change_state blue' style='font-size:10.5px; color:#1f88ce; cursor: pointer'><%= label_i_live_in_a_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment lease-state-incentive'>- <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='leasing-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'>
                        <span class='net-down-payment-text'><%= label_net_money_lease %></span>
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment value'></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>
<script id="template-summary-panel-tabs-view-gb" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: April 2014
    * @market: United Kingdom, REEU (European Union)
    * @jira: WEB-18248
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.summary_reeu.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'>
                <%= _model.getLeasingAmount(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                _.each(lease_data.view[ locale ].mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
        </div>

        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'>
                <%= _model.getFinancingMonthlyBasePayment(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <p class='finance-amount-text'>
                <span>
                    <span class="finance-amount-text-savings"></span>
                </span>
            </p>

            <ul class='tabs-finance-term'>
                <%
                var finance_term_class;
                var finance_data = _model._getDefaults().finance;
                var default_finance_term = finance_data.defaults.term;
                _.each(finance_data.view[ locale ].term, function(ui_friendly_term, finance_term) {
                    finance_term_class = isNodeDefault( parseInt(finance_term, 10), default_finance_term) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= finance_term %>' class='<%= finance_term_class %>'><%= ui_friendly_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='lease-term-text'><%= all_tabs_data.finance.strings.term %></p>
        </div>

        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <p class='cash-amount-text'><%= all_tabs_data.cash.strings.tag_line %></p>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-gb" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date'>
        <h3 class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</h3>
        <p class='description'><%= edd_localized_strings["description"] %></p>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-gb" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Financing and Purchase tabs
    **/

    var _model = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                 = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      = _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <div class="top-shadow"></div>
            <ul class='emc-list'>
                <li>
                    <span class='label'><%= _strings.estimated_monthly_payment %><span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-payment'><%= _model.getLeasingAmount(true) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li id="gas-savings-wrapper">
                    <span class='label'><%= _strings.gas_savings %><span class='hidden'>:</span>
                        <span class='effective-price'>- 
                            <span class='gas-savings-amount'><%= formatCurrency(gas_savings, true, false) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li class='primary'>
                    <span class='label'><%= _strings.montly_cost_with_savings %>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-cost-num'><%= formatCurrency(lease_amount, true, false ) %></span> /mo.
                        </span>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</script>

<script id="template-summary-non-lease-details-view-gb" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var lease_amount                    = _model.getMonthlyCost();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt                = _model.getLeasingAmount();
    var bool_details_shown              = _model.getDetailsVisibility();
    var current_battery_code            = _model.getCurrentBattery();
    var amt_finance_due_at_delivery     = _model.calculateFinanceDueAtDeliveryAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();

    //-- CSS classes
    var css_class_details                          = ( bool_details_shown ? '' : 'hidden' );
    var css_class_non_lease_details                = ( active_tab === 'lease' ? 'hidden' : '' );
    var css_class_non_lease_active_state           = ( _model.getActiveStateNonLease() == 'default' ? 'hidden' : '' );
    var css_class_non_lease_active_state_switcher  = ( _model.getActiveStateNonLease() == 'default' ? '' : 'hidden' );
    var css_class_congestion_charge_display        = ( _model.getActiveCityNonLeaseIncentiveAmount() === 0 ? 'hidden' : '' );
    var css_class_congestion_switcher_display      = ( css_class_congestion_charge_display === 'hidden' ? '' : 'hidden' );
    var css_class_benefit_in_kind_display          = ( _model.calculateFinanceBenefitInKindAmount() === 0 ? 'hidden' : '' );
    var css_class_benefit_in_kind_switcher_display = ( css_class_benefit_in_kind_display === 'hidden' ? '' : 'hidden' );
    
    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- Localized strings + line-item label mappings
    var label_per_month                         = _strings.per_month;
    var label_net_money                         = _strings.net_price_with_incentives;
    var label_down_payment                      = _strings.down_payment;
    var label_congestion_charge                 = _strings.congestion.congestion_charge;
    var label_incentives_available_in           = _strings.congestion.available_savings;
    var label_i_live_in_a_different_city        = _strings.congestion.different_savings_selector;
    var label_i_commute_into_city               = _strings.congestion.city_i_commute_into;
    var label_i_commute_into_city_selected      = _strings.congestion.city_i_commute_into_selected;
    var label_benefit_in_kind_charge            = _strings.benefit_in_kind.benefit_in_kind_charge;
    var label_benefit_in_kind_business_purchase = _strings.benefit_in_kind.business_purchase;
    var label_benefit_in_kind_personal_purchase = _strings.benefit_in_kind.personal_purchase;

    //-- String overrides
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- City incentives for congestion savings
    var city_incentives = _model._getCityIncentives();
    var active_tab_for_city_incentives = active_tab;
    var city_incentives_for_active_tab = city_incentives[active_tab_for_city_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>
        <div class='top-shadow'></div>
        <ul class='details-list estimated-monthly-payment'>
            <li id="non-lease-down-payment">
                <span class='label'>
                    <span class='label-finance-down-payment'><%= _strings.down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='finance-down-payment'><%= formatCurrency(_model.getFinancingDown(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-estimated-monthly-payment">
                <span class='label'>
                    <span class='nld-current-battery'><%= _strings.estimated_monthly_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='emp-amount sub-total'><%= formatCurrency(_model.getFinancingMonthlyBasePayment(), true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li id="non-lease-gas-savings">
                <span class='label'><%= _strings.gas_savings %> 
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='gas-savings-amount'><%= _model._getGasSavingsByMileage() %></span> /mo.<%= label_per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-road-tax-savings">
                <span class='label'><%= _strings.road_tax_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='road-tax-amount'><%= _model.getTaxRoadBenefit() %></span> /mo.<%= label_per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-city-switcher" class="<%= css_class_congestion_switcher_display %>">
                <span class="label" class="">
                    <%= label_congestion_charge %> 
                    (<a class="select_city blue" style="font-size:10.5px; color:#1f88ce; cursor: pointer" data-city="LN"><%= label_i_commute_into_city %></a>)
                </span>
            </li>
            <li id="non-lease-active-city-wrapper" class="<%= css_class_congestion_charge_display %>">
                <span class="label">
                    <span class="active-city-long-name"><%= _model.getActiveCityNonLeaseLongName() %></span> congestion (<a class="change_city blue" style="font-size:10.5px; color:#1f88ce; cursor: pointer"><%= label_i_live_in_a_different_city %></a>) <span class='hidden'>:</span> 
                    <span class="effective-price">
                        <span class="effective-monthly-payment non-lease-city-incentive">- <%= formatCurrency(_model.getActiveCityNonLeaseIncentiveAmount(), true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li id="non-lease-benefit-in-kind-switcher" class="<%= css_class_benefit_in_kind_switcher_display %>">
                <span class="label" class="">
                    <%= label_benefit_in_kind_charge %> 
                    (<a class="select_benefit_in_kind blue" style="font-size:10.5px; color:#1f88ce; cursor: pointer" data-benefit="true"><%= label_benefit_in_kind_business_purchase %></a>)
                </span>
            </li>
            <li id="non-lease-active-benefit-in-kind-wrapper" class="<%= css_class_benefit_in_kind_display %>">
                <span class="label">
                    <span class="active-benefit-in-kind"><%= label_benefit_in_kind_charge %></span> 
                    (<a class="change_benefit_in_kind blue" style="font-size:10.5px; color:#1f88ce; cursor: pointer" data-benefit="false"><%= label_benefit_in_kind_personal_purchase %></a>) <span class='hidden'>:</span> 
                    <span class="effective-price">
                        <span class="effective-monthly-payment non-lease-benefit-in-kind-incentive">- <%= formatCurrency(_model.getActiveCityNonLeaseIncentiveAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-net-monthly-cost" class="primary">
                <span class='label'><%= _strings.montly_cost_with_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='nmc-amount'>- <%= formatCurrency(financing_monthly_effective_pmt, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class="disclaimer">
                <span class="label"><a href="#finance_disclaimer">Explanation of Assumptions</a></span>
            </li>
        </ul>

        <div class='top-shadow'></div>
        <ul class='details-list down-payment-list-items'>
            <li id="non-lease-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'><%= label_down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(sub_total, true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'><%= _strings.federal_tax_credit %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>- <%= formatCurrency(_model.getFederalIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='non-lease-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'><span class='net-down-payment-text'><%= label_net_money %></span></span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment due-at-delivery-amount'><%= formatCurrency(_model.calculateFinanceDueAtDeliveryAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-lease-details-view-gb" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>
        <div class="top-shadow"></div>
        <ul class='details-list'>
            <li>
                <span class='label'><%= _strings.down_payment %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(_model.getReservationPrice(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='lease-state-switcher' class='hidden'>
                <span class='label' class=''>
                    <%= label_incentives_available_in %>

                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %> 
                    <%
                    }
                    %>
                </span>
            </li>
            <li id='lease-state-incentive-wrapper' class=''>
                <span class='label'>
                    <span class='active-state-long-name'><%= _model.getActiveStateLeaseLongName() %></span> incentive (<a class='change_state blue' style='font-size:10.5px; color:#1f88ce; cursor: pointer'><%= label_i_live_in_a_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment lease-state-incentive'>- <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='leasing-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'>
                        <span class='net-down-payment-text'><%= label_net_money_lease %></span>
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment value'></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>
<script id="template-summary-panel-tabs-view-us" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: April 2014
    * @market: United States, RENA (North America)
    * @jira: WEB-12099
    * @version: Pre-October 2014 (aka Pre-Configurator Version 3)
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.summary_rena.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'>
                <%= _model.getLeasingAmount(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                _.each(lease_data.view[ locale ].mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
        </div>

        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'>
                <%= _model.getFinancingMonthlyBasePayment(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <p class='finance-amount-text'>
                <span>
                    <span class="finance-amount-text-savings"></span>
                </span>
            </p>
        </div>

        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <p class='cash-amount-text'><%= all_tabs_data.cash.strings.tag_line %></p>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-us" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date' class='hidden'>
        <h3 class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</h3>
        <p class='description'><%= edd_localized_strings["description"] %></p>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-us" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    **/

    var _model = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                 = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      = _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <div class="top-shadow"></div>
            <ul class='emc-list'>
                <li>
                    <span class='label'><%= _strings.estimated_monthly_payment %><span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-payment'><%= _model.getLeasingAmount(true) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li id="gas-savings-wrapper">
                    <span class='label'><%= _strings.gas_savings %><span class='hidden'>:</span>
                        <span class='effective-price'>- 
                            <span class='gas-savings-amount'><%= formatCurrency(gas_savings, true, false) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li class='primary'>
                    <span class='label'><%= _strings.montly_cost_with_savings %>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-cost-num'><%= formatCurrency(lease_amount, true, false ) %></span> /mo.
                        </span>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</script>

<script id="template-summary-non-lease-details-view-us" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var current_battery_code            = _model.getCurrentBattery();
    var lease_amount                    = _model.getMonthlyCost();
    var monthly_base_pmt                = _model.getLeasingAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';

    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- CSS classes
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings + line-item labels
    var label_net_money               = _strings.net_price_with_incentives;
    var label_down_payment            = _strings.down_payment;
    var label_incentives_available_in = _strings.state_incentive.available_incentives;
    var label_live_in_different_state = _strings.state_incentive.different_incentive_selector;

    //-- Line-item labels and corresponding prices
    var amt_finance_due_at_delivery = _model.calculateFinanceDueAtDeliveryAmount();
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>
        <div class='top-shadow'></div>
        <ul class='details-list estimated-monthly-payment'>
            <li id="non-lease-estimated-monthly-payment">
                <span class='label'>
                    <span class='nld-current-battery'><%= _strings.estimated_monthly_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='emp-amount sub-total'><%= formatCurrency(_model.getFinancingMonthlyBasePayment(), true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li id="non-lease-gas-savings">
                <span class='label'><%= _strings.gas_savings %> 
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>- 
                        <span class='gas-savings-amount'></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-grv">
                <span class='label'><%= _strings.guaranteed_resale_value %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='grs-amount'>In-progress</span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-net-monthly-cost" class="primary">
                <span class='label'><%= _strings.montly_cost_with_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='nmc-amount'>- <%= formatCurrency(financing_monthly_effective_pmt, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
        </ul>

        <div class='top-shadow'></div>
        <ul class='details-list'>
            <li id="non-lease-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'><%= label_down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(sub_total, true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'><%= _strings.federal_tax_credit %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>- <%= formatCurrency(_model.getFederalIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-active-state" class='<%= css_class_non_lease_active_state %>'>
                <span class='label'>
                    <span class='active-non-lease-state-long-name'><%= _model.getActiveStateNonLeaseLongName() %></span> incentive (<a class='change_state blue' style='font-size:10.5px; color:#1f88ce; cursor: pointer'><%= label_live_in_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment incentive-price'>
                        <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <%
            if ( state_incentives_for_active_tab ) {
            %>
            <li id="non-lease-state-switcher" class="<%= css_class_non_lease_active_state_switcher %>">
                <span class='label' class='hidden'>
                    <%= label_incentives_available_in %> 
                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <span class='state-incentive <%= state_incentive_code %>'><a class='blue active' data-state="<%= state_incentive_code %>"><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %></span> 
                    <%
                    }
                    %>
                </span>
            </li>
            <%
            }
            %>
            <li id='non-lease-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'><span class='net-down-payment-text'><%= label_net_money %></span></span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment due-at-delivery-amount'><%= formatCurrency(_model.calculateFinanceDueAtDeliveryAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-lease-details-view-us" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>
        <div class="top-shadow"></div>
        <ul class='details-list'>
            <li>
                <span class='label'><%= _strings.due_at_signing %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment calculated-down-payment'><%= _model.getLeasingDownPayment(true) %></span>
                    </span>
                </span>
            </li>
            <li id='lease-state-switcher' class='hidden'>
                <span class='label' class=''>
                    <%= label_incentives_available_in %>

                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %> 
                    <%
                    }
                    %>
                </span>
            </li>
            <li id='lease-state-incentive-wrapper' class=''>
                <span class='label'>
                    <span class='active-state-long-name'><%= _model.getActiveStateLeaseLongName() %></span> incentive (<a class='change_state blue' style='font-size:10.5px; color:#1f88ce; cursor: pointer'><%= label_i_live_in_a_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment lease-state-incentive'>- <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='leasing-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'>
                        <span class='net-down-payment-text'><%= label_net_money_lease %></span>
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment value'></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>
<script id="template-summary-lease-cash-view-cn" type="text/template">
<%
    /**
    *
    * @author: manny, yabo
    * @overview: Main template for new summary panel layout with Financing and Cash tabs
    *
    **/

    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= newCNSummaryLayout.financeTabText %></a></li>
            <li><a href='#cash'><%= newCNSummaryLayout.cashTabText %></a></li>
        </ul>
        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'><%= newCNSummaryLayout.getFinancingAmount(true) %></span> /月</h3>
            <p class='finance-amount-text'>实际购置成本</p>
            <ul class='tabs-finance-term'>
                <%
                var finance_term_class;
                var default_term_length = newCNSummaryLayout.defaults.finance.term;
                _.each(newCNSummaryLayout.views.finance.term, function(ui_friendly_finance_term, term_length) {
                    finance_term_class = isNodeDefault( parseInt(term_length, 10), default_term_length) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= term_length %>' class='<%= finance_term_class %>'><%= ui_friendly_finance_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='finance-term-text'><%= newCNSummaryLayout.termText %></p>

            <ul class='tabs-down'>
                <%
                var finance_down_class;
                var default_down_length = newCNSummaryLayout.defaults.finance.down;
                _.each(newCNSummaryLayout.views.finance.down, function(ui_friendly_finance_down, down_amount) {
                    finance_down_class = isNodeDefault(down_amount, default_down_length) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= down_amount %>' class='<%= finance_down_class %>'><%= ui_friendly_finance_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newCNSummaryLayout.downText %></p>

        </div>
        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= newCNSummaryLayout.getCashAmount(true) %></span></h3>
            <p class='cash-amount-text'><%= newCNSummaryLayout.cashAmountText %></p>
            <p class='vat-amount-text'><%= newCNSummaryLayout.vatAmountText %></p>
        </div>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-cn" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    *
    **/

    var modelEMC = newEffectiveMonthlyCost;
    var fiveToSixHomeFormat = Tesla.fiveToSixHomeFormat;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab = modelEMC._modelSummary.activeTab;
    var emc_line_item_text = 'Monthly cost';
    var showStateSaving = modelEMC.stateSavingsOn ? '' : 'hidden' ;
    var showStateSavingSwitcher = modelEMC.stateSavingsOn ? 'hidden' : '';
    var currentState = modelEMC._modelSummary.currentState;
    var currentCity = currentState ? modelEMC._modelSummary.stateSavingsMap[currentState].city : '';

%>
    <div id='summary-lease-cash-effective-monthly-cost' class="<%= modelEMC._modelSummary.activeTab %>">
        <ul class='emc-list'>
            <li>
                <span class='label'>月供<span class='hidden'>:</span>
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(fiveToSixHomeFormat(modelEMC.monthlyLeasePayment), true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>节省燃油费<span class='hidden'>:</span>
                    <span class='effective-price'>
                        <span class='effective-monthly-gas-savings'><%= formatCurrency(fiveToSixHomeFormat(modelEMC.gasSavings), true, false) %></span> /月
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>节省车船使用税<span class='hidden'>:</span>
                    <span class='effective-price'>
                        <span class='effective-monthly-bus-tax-benefit'><%= formatCurrency(fiveToSixHomeFormat(modelEMC.busCarTaxBenefit), true, false) %></span> /月
                    </span>
                </span>
            </li>
            <li id="non-lease-active-state" class="<%= showStateSaving %>">
                <span class='label'>
                    <span class='active-non-lease-state-long-name'></span><%= currentCity %>居民免上牌费 (<a class='change_state blue' style='color:#1f88ce; cursor: pointer'>我住在别的城市</a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment incentive-price'>
                        <%= formatCurrency(fiveToSixHomeFormat(modelEMC.stateSavings), true, false) %></span> /月
                    </span>
                </span>
            </li>
            <li id="non-lease-state-switcher" class="<%= showStateSavingSwitcher %>">
                <span class='label' class='hidden'>
                    牌照费用减免城市(
                    <%
                    var modelEMC = newEffectiveMonthlyCost;
                    var cityNumber = _.keys(modelEMC._modelSummary.stateSavingsMap).length;
                    var counter = 1;
                    _.each(modelEMC._modelSummary.stateSavingsMap, function(cityItem, key){
                        
                    %>
                        <a class='blue active' data-state="<%= key %>"><%= cityItem.city %></a>
                        <% if (counter < cityNumber) { %>､<% } %>
                    <%
                        counter++;
                    });
                    %>
                    )</a>
                </span>
            </li>
            <li class='primary'>
                <span class='label'>实际购置成本<span class='hidden'>:</span>
                    <span class='effective-price'>
                        <span class='effective-monthly-cost-num'><%= formatCurrency(fiveToSixHomeFormat(modelEMC.monthlyCost), true, false ) %></span> /月
                    </span>
                </span>
            </li>
            <li class='disclaimer'>
                <span class='label'><a href='#general_disclaimer'>我们如何计算这些数字的?</a></span>
            </li>
        </ul>
    </div>
</script>
<script id="template-summary-lease-cash-view-de" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs
    *
    **/

    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= newDESummaryLayout.financeTabText %></a></li>
            <li><a href='#lease'><%= newDESummaryLayout.leaseTabText %></a></li>
            <li><a href='#cash'><%= newDESummaryLayout.cashTabText %></a></li>
        </ul>
        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'><%= newDESummaryLayout.getFinancingAmount(true) %></span> mtl.</h3>
            <p class='finance-amount-text'><%= newDESummaryLayout.financeAmountText %></p>
        </div>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'><%= newDESummaryLayout.getLeasingAmount(true) %></span> mtl.</h3>
            <p class='lease-amount-text'><%= newDESummaryLayout.leaseAmountText %></p>
            <ul class='tabs-lease-term'>
                <%
                var lease_term_class;
                var default_lease_term = newDESummaryLayout.defaults.leasing.term;
                _.each(newDESummaryLayout.views.leasing.term, function(ui_friendly_leasing_term, lease_term) {
                    lease_term_class = isNodeDefault( parseInt(lease_term, 10), default_lease_term) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= lease_term %>' class='<%= lease_term_class %>'><%= ui_friendly_leasing_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='lease-term-text'><%= newDESummaryLayout.termText %></p>

            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var default_lease_mileage = newDESummaryLayout.defaults.leasing.mileage;
                _.each(newDESummaryLayout.views.leasing.mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a></li>
                <%
                });
                %>
            </ul>
            <p class='mileage-text'><%= newDESummaryLayout.mileageText %></p>

            <ul class='tabs-lease-down'>
                <%
                var lease_down_class;
                var default_lease_down = newDESummaryLayout.defaults.leasing.down;
                _.each(newDESummaryLayout.views.leasing.down, function(ui_friendly_leasing_down, lease_down) {
                    lease_down_class = isNodeDefault(parseInt(lease_down, 10), default_lease_down) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= lease_down %>' class='<%= lease_down_class %>'><%= ui_friendly_leasing_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newDESummaryLayout.downText %></p>

        </div>
        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= newDESummaryLayout.getCashAmount(true) %></span></h3>
            <p class='cash-amount-text'><%= newDESummaryLayout.cashAmountText %></p>
            <p class='vat-amount-text'><%= newDESummaryLayout.vatAmountText %></p>
        </div>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-de" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    *
    **/

    var modelEMC = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab = modelEMC._modelSummary.activeTab;
    var emc_line_item_text = ( active_tab == 'lease' ) ? 'Leasingrate' : 'Monatsrate';
%>
    <div id='summary-lease-cash-effective-monthly-cost' class="<%= modelEMC._modelSummary.activeTab %>">
        <ul class='emc-list'>
            <li>
                <span class='label'><%= emc_line_item_text %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(modelEMC.monthlyLeasePayment, true, false) %></span> mtl.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Benzinkostenersparnis<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-gas-savings'><%= formatCurrency(modelEMC.gasSavings, true, false) %></span> mtl.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>KfZ Steuer<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-road-tax-benefit'><%= formatCurrency(modelEMC.roadTaxBenefit, true, false) %></span> mtl.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Steuervorteil für private Nutzer<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-bus-tax-benefit'><%= formatCurrency(modelEMC.busCarTaxBenefit, true, false) %></span> mtl.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Energiewende Prämie<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-sustainable-energy-savings'><%= formatCurrency(modelEMC.sustainableSavings, true, false) %></span> mtl.
                    </span>
                </span>
            </li>
            <li class='primary'>
                <span class='label'>Effektive monatliche Kosten<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-cost-num'><%= formatCurrency(modelEMC.monthlyCost, true, false ) %></span> mtl.
                    </span>
                </span>
            </li>
            <li class='disclaimer'>
                <span class='label'><a href='#general_disclaimer'>Wie werden diese Werte errechnet?</a></span>
            </li>
        </ul>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-de" type="text/template">
    <div id="summary-lease-cash-delivery-date">
        <span class="delivery-date"></span>
    </div>
</script>

<script id="template-summary-lease-cash-view-fr" type="text/template">
<%
    /**
    * 
    * @author: manny
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs
    *
    **/
    var web_20915;
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    // localized strings
    var strings = newFRSummaryLayout._getLocalizedStrings();
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#lease'><%= newFRSummaryLayout.leaseTabText %></a></li>
            <li><a href='#finance'><%= newFRSummaryLayout.financeTabText %></a></li>
            <li><a href='#cash'><%= newFRSummaryLayout.cashTabText %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <div class="section">
            <h3 class='lease-amount'><span class='lease-amount-num'><%= newFRSummaryLayout.getLeasingAmount(true) %></span>/<%= strings.symbols.month %> </h3>
            <p class="lease-amount-text"><%= strings.lease.term %></p>
            <p class="tag-line"><span><%= strings.lease.estimated_monthly_payment %></span></p>
            </div>
        </div>
        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'><%= newFRSummaryLayout.getFinancingAmount(true) %></span>/<%= strings.symbols.month %> </h3>
            <p class='finance-amount-text'><%= strings.finance.term %></p>
             <p class="tag-line"><span><%= strings.finance.estimated_monthly_payment %></span></p>
        </div>
        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= newFRSummaryLayout.getCashAmount(true) %></span></h3>
            <p class='cash-amount-text'><%= newFRSummaryLayout.cashAmountText %></p>
            <p class='vat-amount-text'><%= newFRSummaryLayout.vatAmountText %></p>
        </div>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-fr" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    *
    **/

    var modelEMC = newEffectiveMonthlyCost,
        active_tab = modelEMC._modelSummary.activeTab,
        // localized strings
        computed = modelEMC.computed,
        strings = modelEMC._modelSummary._getLocalizedStrings(),
        symbols = strings.symbols,
        emc = strings.effective_monthly_cost;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>

        <div class="lease tab-content">
            <div class="section">
              <h3 class='lease-amount'><span class='lease-amount-num'><%= computed.lease.monthly_effective_pmt %></span> /<%= symbols.month %> </h3>
              <p class="tag-line"><%= computed.description %></p>
            </div>
            <div class="section inset">
                <p><%= computed.lease.down_payment %></p>
                <p class="tag-line"><%= computed.lease.total_lease_amount %></p>
            </div>
        </div>
        <div class="finance tab-content">
            <div class="section">
              <h3 class='finance-amount'><span class='finance-amount-num'><%= computed.finance.monthly_effective_pmt %></span> /<%= symbols.month %> </h3>
              <p class="tag-line"><%= computed.description %></p>
            </div>
            <div class="section inset">
                <p><%= computed.finance.down_payment_after_incentives %></p>
                <p class="tag-line"><%= computed.finance.grand_total %></p>
            </div>
        </div>        
    </div>
</script>

<script id="template-fr-summary-disclaimer" type="text/template">
<%
    /**
    * part of WEB-20915
    * Disclaimer text change for lease and finance options
    * @author Frank
    */
    // this seems bad, but it works, yay!
    var model = arguments[0]._modelSummary || arguments[0]; 
    var strings = model._getLocalizedStrings() || {};    
    var computed = model._getComputedStrings() || {};
%>
    <div id="fr-summary-disclaimer-text">
    <div class="lease">
        <p><%= computed.lease.disclaimer_p1 %></p>
        <p><%= strings.lease.disclaimer_p2 %></p>
        <p><%= strings.lease.disclaimer_p3 %></p>
    </div>
    <div class="finance">
        <p><%= computed.finance.disclaimer_p1 %></p>
        <p><%= strings.finance.disclaimer_p2 %></p>
        <p><%= strings.finance.disclaimer_p3 %></p>
    </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-fr" type="text/template">
    <div id="summary-lease-cash-delivery-date">
        <span class="delivery-date"></span>
    </div>
</script>
<script id="template-summary-lease-cash-view-ch" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for new Swiss Summary Panel layout with Leasing, Financing and Cash tabs
    *
    **/

    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#lease'><%= newCHSummaryLayout.leaseTabText %></a></li>
            <li class='hidden'><a href='#finance'><%= newCHSummaryLayout.financeTabText %></a></li>
            <li><a href='#cash'><%= newCHSummaryLayout.cashTabText %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'><%= newCHSummaryLayout.getLeasingAmount(true) %></span> <%= newCHSummaryLayout.perMonthText %></h3>
            <p class='lease-amount-text'><%= newCHSummaryLayout.leaseAmountText %></p>
            <ul class='tabs-lease-term'>
                <%
                var lease_term_class;
                var default_lease_term = newCHSummaryLayout.defaults.leasing.term;
                _.each(newCHSummaryLayout.views.leasing.term, function(ui_friendly_leasing_term, lease_term) {
                    lease_term_class = isNodeDefault( parseInt(lease_term, 10), default_lease_term) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= lease_term %>' class='<%= lease_term_class %>'><%= ui_friendly_leasing_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='lease-term-text'><%= newCHSummaryLayout.termText %></p>

            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var default_lease_mileage = newCHSummaryLayout.defaults.leasing.mileage;
                _.each(newCHSummaryLayout.views.leasing.mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a></li>
                <%
                });
                %>
            </ul>
            <p class='mileage-text'><%= newCHSummaryLayout.mileageText %></p>

            <ul class='tabs-lease-down'>
                <%
                var lease_down_class;
                var default_lease_down = newCHSummaryLayout.defaults.leasing.down;
                _.each(newCHSummaryLayout.views.leasing.down, function(ui_friendly_leasing_down, lease_down) {
                    lease_down_class = isNodeDefault(parseInt(lease_down, 10), default_lease_down) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= lease_down %>' class='<%= lease_down_class %>'><%= ui_friendly_leasing_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newCHSummaryLayout.downText %></p>

        </div>
        <div id='finance' class='tab-content hidden'>
            <h3 class='finance-amount'><span class='finance-amount-num'><%= newCHSummaryLayout.getFinancingAmount(true) %></span> /mo.</h3>
            <p class='finance-amount-text'><%= newCHSummaryLayout.leaseAmountText %></p>
            <ul class='tabs-finance-term'>
                <%
                var finance_term_class;
                var default_term_length = newCHSummaryLayout.defaults.finance.term;
                _.each(newCHSummaryLayout.views.finance.term, function(ui_friendly_finance_term, term_length) {
                    finance_term_class = isNodeDefault(term_length, default_term_length) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= term_length %>' class='<%= finance_term_class %>'><%= ui_friendly_finance_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='finance-term-text'><%= newCHSummaryLayout.termText %></p>

            <ul class='tabs-down'>
                <%
                var finance_down_class;
                var default_down_length = newCHSummaryLayout.defaults.finance.down;
                _.each(newCHSummaryLayout.views.finance.down, function(ui_friendly_finance_down, down_amount) {
                    finance_down_class = isNodeDefault(down_amount, default_down_length) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= down_amount %>' class='<%= finance_down_class %>'><%= ui_friendly_finance_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newCHSummaryLayout.downText %></p>

        </div>
        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= newCHSummaryLayout.getCashAmount(true) %></span></h3>
            <p class='cash-amount-text'><%= newCHSummaryLayout.cashAmountText %></p>
            <p class='vat-amount-text'><%= newCHSummaryLayout.vatText %></p>
        </div>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-ch" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    *
    **/

    var modelEMC = newEffectiveMonthlyCost;
    var _currency_code = ENGINE.configSet.currency_code;
    var _market = ENGINE.configSet.market;
    var formatCurrency = TC.externalInterface.formatCurrency;
%>
    <div id='summary-lease-cash-effective-monthly-cost' class="<%= modelEMC._modelSummary.activeTab %>">
        <ul class='emc-list'>
            <li>
                <span class='label'><%= modelEMC.monthlyLeaseRateLabel %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>
                            <span class='ep-currency'>
                                <%= _currency_code %>
                            </span>
                            <span class="ep-value">
                                <%= ENGINE.formatCurrency(modelEMC.monthlyLeasePayment, false, _market, false) %>
                            </span>
                        </span> <%= modelEMC.perMonthText %>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'><%= modelEMC.gasolineSavingsLabel %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='ep-currency'>
                            <%= _currency_code %>
                        </span>
                        <span class="ep-value">
                            <%= ENGINE.formatCurrency(modelEMC.gasSavings, false, _market, false) %>
                        </span> <%= modelEMC.perMonthText %>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'><%= modelEMC.roadTaxBenefitLabel %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='ep-currency'>
                            <%= _currency_code %>
                        </span>
                        <span class="ep-value">
                            <%= ENGINE.formatCurrency(modelEMC.roadTaxBenefit, false, _market, false) %>
                        </span> <%= modelEMC.perMonthText %>
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'>Steuervorteil für private Nutzer<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-bus-tax-benefit'><%= formatCurrency(modelEMC.busCarTaxBenefit, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'>Energiewende Prämie<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-sustainable-energy-savings'><%= formatCurrency(modelEMC.sustainableSavings, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class='primary'>
                <span class='label'><%= modelEMC.effectiveMonthlyCostLabel %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='ep-currency'>
                            <%= _currency_code %>
                        </span>
                        <span class="ep-value">
                            <%= ENGINE.formatCurrency(modelEMC.monthlyCost, false, _market, false) %>
                        </span> <%= modelEMC.perMonthText %>
                    </span>
                </span>
            </li>
            <li class='disclaimer'>
                <span class='label'><a href='#general_disclaimer'><%= modelEMC.howText %></a></span>
            </li>
        </ul>
    </div>
</script>
<script id="template-summary-lease-cash-view-au" type="text/template">
<%
    /**
    *
    * @author: Santiago y Manny
    * @overview: Main template for new summary panel layout for Australia
    *
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <div id='cash' class='tab-content summary-panel'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= _lm.getDriveAwayPrice(true) %></span></h3>
            <p class='cash-amount-text'>
            <span><%= _lm.getDriveAwayAmountText() %> <!--<span class='territory-friendly-name-ui'><%= _lm.getTerritoryFriendlyName() %></span>--></span>
            </p>
            <ul class='list-territories'>
                <%
                var territory_class;
                var default_territory = _lm.getTerritory();
                _.each(_lm.defaults.views, function(ui_friendly_territory_name, territory) {
                    territory_class = isNodeDefault(territory, default_territory) ? 'default active' : '';
                %>
                    <li class='<%= territory_class %>'><a href='#' data-territory='<%= territory %>'><%= territory %></a></li>
                <%
                });
                %>
            </ul>
            <p class='territory-list-text'><%= _lm.getTerritoryListText() %></p>

        </div>
    </div>
</script>


<script id="template-summary-estimated-delivery-date-view-au" type="text/template">
    <%
    /**
     * Estimated Delivery Date Data. 
     * View Refreshes based on current battery in configuration
     */
    %>
    <div id='summary-lease-cash-delivery-date-au'>
        <h3 class='delivery-date'>March 2014</h3>
        <p class='description'>Estimated delivery date</p>
    </div>
</script>


<script id="template-summary-cost-details-view-au" type="text/template">
    <%
    // Cost Details Section
    var formatCurrency = TC.externalInterface.formatCurrency;
    %>
    <div id='summary-cost-details'>
        <div class='top-shadow'></div>
        <ul class='details-list'>
            <li id="cost-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'>Your <%= ENGINE.configuration.getModelName() %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(ENGINE.configuration.getSubTotal(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Luxury Car Tax <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='luxury-car-tax'><%= formatCurrency(_cdp.getLuxuryCarTax(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Local Registration Costs <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='luxury-registration-costs'><%= formatCurrency(_cdp.getLocalRegCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='local-ctp-row' style="display:none;">
                <span class='label'>Local CTP <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='local-ctp'><%= formatCurrency(_cdp.getLocalCTPCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='local-stamp-duty-row' style="display:none;">
                <span class='label'>Local Stamp Duty <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='local-stamp-duty'><%= formatCurrency(_cdp.getLocalStampDutyCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='primary'>
                <span class='label'>Total Price in <span class='territory-friendly-name-ui'>the <%= _cdp.getTerritoryFriendlyName() %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='total-price'><%= _cdp.getDriveAwayPrice(true) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script><script id="template-summary-lease-cash-view-hk" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs
    *
    **/

    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( parseInt(nodeToCheck, 10) === parseInt(nodeDefault, 10) );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li class='hidden'><a href='#lease'><%= newDESummaryLayout.leaseTabText %></a></li>
            <li><a href='#finance'><%= newDESummaryLayout.financeTabText %></a></li>
            <li><a href='#cash'><%= newDESummaryLayout.cashTabText %></a></li>
        </ul>
        <div id='lease' class='tab-content hidden'>
            <h3 class='lease-amount'><span class='lease-amount-num'><%= newDESummaryLayout.getLeasingAmount(true) %></span> /mo.</h3>
            <p class='lease-amount-text'><%= newDESummaryLayout.leaseAmountText %></p>
            <ul class='tabs-lease-term'>
                <%
                var lease_term_class;
                var default_lease_term = newDESummaryLayout.defaults.leasing.term;
                _.each(newDESummaryLayout.views.leasing.term, function(ui_friendly_leasing_term, lease_term) {
                    lease_term_class = isNodeDefault( parseInt(lease_term, 10), default_lease_term) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= lease_term %>' class='<%= lease_term_class %>'><%= ui_friendly_leasing_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='lease-term-text'><%= newDESummaryLayout.termText %></p>

            <ul class='tabs-mileage hidden'>
                <%
                var lease_mileage_class;
                var default_lease_mileage = newDESummaryLayout.defaults.leasing.mileage;
                _.each(newDESummaryLayout.views.leasing.mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a></li>
                <%
                });
                %>
            </ul>
            <p class='mileage-text hidden'><%= newDESummaryLayout.mileageText %></p>

            <ul class='tabs-lease-down'>
                <%
                var lease_down_class;
                var default_lease_down = newDESummaryLayout.defaults.leasing.down;
                _.each(newDESummaryLayout.views.leasing.down, function(ui_friendly_leasing_down, lease_down) {
                    lease_down_class = isNodeDefault(parseInt(lease_down, 10), default_lease_down) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= lease_down %>' class='<%= lease_down_class %>'><%= ui_friendly_leasing_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newDESummaryLayout.downText %></p>

        </div>
        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'><%= newDESummaryLayout.getFinancingAmount(true) %></span> /mo.</h3>
            <p class='finance-amount-text'><%= newDESummaryLayout.leaseAmountText %></p>
            <ul class='tabs-finance-term'>
                <%
                var finance_term_class;
                var default_term_length = newDESummaryLayout.defaults.finance.term;
                _.each(newDESummaryLayout.views.finance.term, function(ui_friendly_finance_term, term_length) {
                    finance_term_class = isNodeDefault( parseInt(term_length, 10), default_term_length) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= term_length %>' class='<%= finance_term_class %>'><%= ui_friendly_finance_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='finance-term-text'><%= newDESummaryLayout.termText %></p>

            <ul class='tabs-down'>
                <%
                var finance_down_class;
                var default_down_length = newDESummaryLayout.defaults.finance.down;
                _.each(newDESummaryLayout.views.finance.down, function(ui_friendly_finance_down, down_amount) {
                    finance_down_class = isNodeDefault(down_amount, parseInt(default_down_length, 10)) ? 'default active' : '';
                %>
                    <li><a href='#' data-down='<%= down_amount %>' class='<%= finance_down_class %>'><%= ui_friendly_finance_down %></a></li>
                <%
                });
                %>
            </ul>
            <p class='down-text'><%= newDESummaryLayout.downText %></p>

        </div>
        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= newDESummaryLayout.getCashAmount(true) %></span></h3>
            <p class='cash-amount-text'><%= newDESummaryLayout.cashAmountText %></p>
            <p class='vat-amount-text hidden'><%= newDESummaryLayout.vatAmountText %></p>
        </div>
    </div>
    <div id='summary-lease-cash-delivery-date'>
        <h3 class='delivery-date'>{April 2014}</h3>
        <p class='description'>{Estimated delivery date}</p>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-hk" type="text/template">
<%
    /**
    *
    * @author: manny
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    *
    **/

    var modelEMC = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab = modelEMC._modelSummary.getActiveTab();
    var is_lease_tab = ( active_tab == 'lease' );
    var tco_values = is_lease_tab ? modelEMC._modelSummary.getLeasingTCOValues() : modelEMC._modelSummary.getHirePaymentHKTCOValues();
    // var emc_line_item_text = is_lease_tab ? 'Finance Payment' : 'Hire Purchase Payment';
    var emc_line_item_text = 'Finance Payment';
%>
    <div id='summary-lease-cash-effective-monthly-cost' class='<%= modelEMC._modelSummary.activeTab %>'>
        <ul class='emc-list'>
            <li>
                <span class='label'><%= emc_line_item_text %><span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(tco_values.financial_lease, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'>Financed Amount <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-gas-savings'><%= formatCurrency(tco_values.financed_amount, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Gasoline Savings<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-road-tax-benefit'><%= formatCurrency(tco_values.energy_savings, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>License Fee Savings<span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-bus-tax-benefit'><%= formatCurrency(tco_values.license_fee_savings, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class='primary'>
                <span class='label'>Efffective Monthly Cost
                    <span class='assumptions'>
                        (<a href='#lease_disclaimer' class='blue'>Assumptions</a>)
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-cost-num'><%= formatCurrency(tco_values.monthly_effective_pmt, true, false ) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class='disclaimer hidden'>
                <span class='label'><a href='#general_disclaimer'>How are these values calculated?</a></span>
            </li>
        </ul>

        <div class='lease-details-wrapper'>
            <div class='top-shadow'></div>
            <ul class='details-list'>
                <li id='lease-down-payment-wrapper'>
                    <span class='label'>Down Payment <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='value'><%= formatCurrency(modelEMC._modelSummary.calculateLeaseDownPayment(), true, false) %></span>
                        </span>
                    </span>
                </li>
                <li id='lease-prepayment-wrapper'>
                    <span class='label'><span class='prepayment_term'>6</span> Month Advance Payment <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='value'><%= formatCurrency(modelEMC._modelSummary.getHKPrepaymentAmount(), true, false) %></span>
                        </span>
                    </span>
                </li>
                <li id='lease-due-at-signing-wrapper' class='primary'>
                    <span class='label'>
                        <span class='due-at-signing'><span class='net-down-payment-text'>Due at Signing</span></span>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='value'>-<%= formatCurrency(2, true, false) %></span>
                        </span>
                    </span>
                </li>
            </ul>
        </div>

    </div>
</script>
<script type="text/template" id="template-summary-header-nl">
<div id='summary-header' class='clearfix'>
   <a class="bookButton us-ca-done" href="#">
        <div><h3><%= data.reserve %></h3></div>
   </a>
   <div class='reserve-button-info' style='margin: 0px 0px 0px 5px; background-image: none;'></div>
</div>
</script>

<script id="template-summary-panel-content-lease-nl" type="text/template">
<div class="tab-content-section">
<h2 class='price-label primary-price-label'>
    <%= data.monthly_base_pmt %>
</h2>
<p class='secondary-tag-line'>
    <%= data.term %>
</p>   
<p class='tag-line'>
    <%= data.financial_lease_payment %>
</p>    
</div>
<div class="tab-content-section effective_monthly_price">
    <h4 class='price-label secondary-price-label'><%= data.monthly_effective_pmt %></h4>
    <p class='secondary-tag-line'><%= data.savings %></p>
    <p class='tag-line'><%= data.bijtelling_percent %></p>
    
</div>
<div class="tab-content-section footer">
     <p class='secondary-tag-line'><%= data.vat_paid%></p>
    <p class='tag-line'><%= data.footer %></p>
</div>
</script>

<script id="template-summary-panel-content-cash-nl" type="text/template">
    <div class="tab-content-section">
         <h2 class='price-label primary-price-label'> <%= data.full_price %> </h2>
         <p class='tag-line'><%= data.tag_line %></p>
    </div>
</script><script id="template-summary-panel-base" type="text/template">
<%
    /**
    * @author: Frank
    * @date: Feb 2015
    * 
    * @note: Base abstract templates for summary panel 
    *        Renders the tabs and tab-content divs for summary panel
    *        use partial templates for the content of each tab
    * 
    *        I'm aware that this will likely only work for simple summary panels,
    *        but it's a start
    **/
%>
<div id='summary-lease-cash-wrapper'>
    <ul class='tabs'></ul>
</div>
</script>
    
<script id="template-summary-panel-base-tabs" type="text/template">
<% _.each(data.tabs, function(tab){ %>
       <li><a class="<%= tab.id %>" href='#<%= tab.id %>'><%= tab.label %></a></li>
<% }); %>
</script>
    
<script id="template-summary-panel-tab-content" type="text/template">
    <% _.each(data.tabs, function(tab){ %>
        <div id="<%= tab.id %>" class="tab-content <%= tab.id %>"></div>
    <% }); %>
</script><script id="template-fr-disclaimer-table" type="text/template">
    <p>
        Les renseignements présentés sur ce site Internet sont basés sur les données disponibles au moment de sa rédaction. Le design, les caractéristiques techniques, les tarifs et les dates de production sont modifiables sans préavis et concernent uniquement les véhicules américains. Il est possible que certaines caractéristiques et options ne soient pas disponibles lorsque votre véhicule entre en production. Dans le calcul du coût mensuel effectif de financement, nous avons comparé le coût de détention de la Model S avec le coût de détention d’une berline familiale, et ce sur la base  de 15,000 km parcourus par an.
    </p>
    <p>
        Le fait de détenir et conduire un véhicule à moteur à combustion, comparable à la Model S, coûte chaque année 1.883 € pour 15.000 km parcourus, cette estimation étant basée sur une consommation de carburant de 8,0 litres pour 100 km et un prix moyen du carburant de 1,57 €  par litre. Le coût de l'électricité nécessaire pour conduire la Model S à 183Wh par kilomètre pour la même distance est de 245 €, en supposant que vous rechargez 40 % de la voiture à domicile (à 0,16 € par kWh), 30% au travail (à 0,09 € par kWh) et 30 % à l'aide du réseau gratuit de Superchargeurs. Les propriétaires de Model S économisent également une moyenne de 830 € sur la carte grisedu véhicule et environ 4.000 € du fait de l’exonération de la taxe liée aux émissions de CO2. En tant que véhicule de société, vous bénéficierez d'une éxonération supplémentaire de la taxe sur les véhicules de société (TVS) à hauteur de 3.348 € par an, basé sur une émission moyenne de 186 g / km de dioxyde de carbone.
    </p>
    <p>
        Lorsque l'on considère les économies réalisées grâce au coût de l'électricité plus faible que celui de l'essence, les économies sur le certificat d’immatriculation du véhicule, et l’éxonération de la taxe sur le CO2, nous estimons que vous pouvez économiser environ 271 € par mois par rapport à une berline à essence. Toutefois, nous vous encourageons à réfléchir sur le véritable coût de détention d’ une Model S en effectuant vos propres calculs ou en obtenant des conseils professionnels, y compris sur les autres options de financement.
    </p>

<p class='disclaimer-text-large'>
(1) Exemple  de location avec option d'achat aux conditions suivantes: 1er loyer majoré suivi de 35 loyers mensuels dont frais de dossier étalés du 2ème au 4ème loyer: 750 €. 
</p>
<p>
Exemple hors « Assurance des Personnes » facultative: coût mensuel de 52,29 €/mois qui s’ajoutent au montant de l’échéance, soit un montant total dû de 1 893,24 € au titre de cette assurance sur la durée totale du financement (3).
</p>
<p>
(2) Sous réserve d’acceptation du dossier par CGL, Compagnie Générale de Location d’Équipements - SA au capital de 58 606 156 € - 69 avenue de Flandre 59700 Marcq-en-Baroeul - SIREN N° 303 236 186 RCS Lille Métropole.
<br />
(3) Tarification pour la garantie de base pour une personne âgée de 18 à 74 ans inclus au jour de la demande d’adhésion et sous réserve de remplir les conditions d’adhésion.
</p>
<p>
(1) Exemple  de crédit hors « Assurance des Personnes » facultative. Taux Annuel Effectif Assurance (TAEA) 2,73 %, soit 57,06 €/mois qui s’ajoutent au montant de l’échéance, soit un montant total dû de 3 423,60 € au titre de cette assurance sur la durée totale du financement (3).
</p>

<p class='disclaimer-text-large'>
<strong>Un crédit vous engage et doit être remboursé. Vérifiez vos capacités de remboursement avant de vous engager.</strong>
</p>


<p>
        Les loyers mensuels du Crédit ont été calculés par Tesla Motors SA à partir
de données fournies par CGL - Compagnie Générale de Location d’Equipements - SA. Ces estimations ont été calculées sur une base mensuelle pour la Tesla Model S 60kWh sur une période de 60 mois, avec l'option d’un premier apport à 10 % ou 20 % et un taux d’intérêt annuel de 4.9%.

    </p>
    <table class="disclaimer-table">
        <tr>
            <th colspan="8" class="main-header">Apport de 10%</th>
        </tr>
        <tr>
            <th>Prix Catalogue</th>
            <td>59.440,00&euro;</td>
            <td>70.000,00&euro;</td>
            <td>80.000,00&euro;</td>
            <td>90.000,00&euro;</td>
            <td>100.000,00&euro;</td>
            <td>110.000,00&euro;</td>
            <td>121.230,00&euro;</td>
        </tr>
        <tr>
            <th>Montant Finance</th>
            <td>53.496,00&euro;</td>
            <td>63.000,00&euro;</td>
            <td>72.000,00&euro;</td>
            <td>81.000,00&euro;</td>
            <td>90.000,00&euro;</td>
            <td>99.000,00&euro;</td>
            <td>109.107,00&euro;</td>
        </tr>
        <tr>
            <th>Montant Total Du</th>
            <td>66.212,61&euro;</td>
            <td>77.975,82&euro;</td>
            <td>89.115,23&euro;</td>
            <td>100.254,63&euro;</td>
            <td>111.394,03&euro;</td>
            <td>122.533,44&euro;</td>
            <td>135.042,99&euro;</td>
        </tr>
    </table>
    <table class="disclaimer-table twenty-percent">
        <tr>
            <th colspan="8" class="main-header">Apport de 20%</th>
        </tr>
        <tr>
            <th>Prix Catalogue</th>
            <td>59.440,00&euro;</td>
            <td>70.000,00&euro;</td>
            <td>80.000,00&euro;</td>
            <td>90.000,00&euro;</td>
            <td>100.000,00&euro;</td>
            <td>110.000,00&euro;</td>
            <td>121.230,00&euro;</td>
        </tr>
        <tr>
            <th>Montant Finance</th>
            <td>47.552,00&euro;</td>
            <td>56.000,00&euro;</td>
            <td>64.000,00&euro;</td>
            <td>72.000,00&euro;</td>
            <td>80.000,00&euro;</td>
            <td>88.000,00&euro;</td>
            <td>96.984,00&euro;</td>
        </tr>
        <tr>
            <th>Montant Total Du</th>
            <td>65.460,10&euro;</td>
            <td>77.089,62&euro;</td>
            <td>88.102,42&euro;</td>
            <td>99.115,23&euro;</td>
            <td>110.128,03&euro;</td>
            <td>121.140,83&euro;</td>
            <td>133.508,21&euro;</td>
        </tr>
    </table>
    <p>
        Toutes les offres sont sous réserve de l’approbation à la seule discrétion de CGL - Compagnie Générale de Location d’Equipements - SA. Veuillez s'il vous plaît vous reporter à CGL - Compagnie Générale de Location d’Equipements - SA pour les détails complets des conditions générales du Crédit.
    </p>
</script>
<script id="template-configurator-three-paint-wrap" type="text/template">
    <%
    /**
    *
    * wrapper for paint (color) tray
    * namespace: paint_wrap
    *
    **/
    %>
    <div class="detail_pane paint_container tray_container <%= paint_wrap.code %> clearfix" id="detail_pane_<%= paint_wrap.code %>">
    </div>
</script>

<script id="template-configurator-three-paint-base-container" type="text/template">
    <%
    /**
    *
    * base (category wrapper) for each paint (color) sub-category,
    * namespace: paint_base
    *
    **/
    var container_class = "menu_options_container";
    var version_three_class_override = (ENGINE.getConfiguratorVersion() >= 3) ? '_3' : '';
    %>
    <div class="<%= container_class %> paint_container tray_container <%= paint_base.code %>" id="menu_options_container_<%= paint_base.code %><%= version_three_class_override %>" data-group="<%= paint_base.code %>">
    </div>
</script>

<script id="template-configurator-three-paint-options-container" type="text/template">
    <%
    /**
    *
    * parse each paint (color) tray option
    e.g. COl1-PBSB, COL3-PPMR etc.
    namespace: paint_options
    *
    **/
    var container_class = "menu_options_subcontainer";
    var version_three_class_override = (ENGINE.getConfiguratorVersion() >= 3) ? '_3' : '';
    %>

    <div class="<%= container_class %><%= version_three_class_override %> radioGroup<%= version_three_class_override %> paint_container tray_container <%= paint_options.code %>" id="menu_options_container_<%= paint_options.code %><%= version_three_class_override %>" data-group="<%= paint_options.code %>">
        <%
        if ( paint_options.has_options ) {
        %>
        <ul class="swatch_list">
            <%
            _.each(paint_options.options, function(opt_data, opt_code) {
                if ( ENGINE.isOptionVisible( opt_code ) && opt_data.value_list !== undefined ) {
                    _.each(opt_data.value_list, function(value_data, value_code) {
                        var does_paint_sub_option_have_no_ui = _.has(value_data, 'no_ui');
                        if ( !does_paint_sub_option_have_no_ui ) {
                            var swatches = ENGINE.getOption( opt_code ).getAssets({ value: value_code });
                            var swatch_data = _.findWhere(swatches, {'view': 'UI_SWAT_THREE'});
                            var option_price_indicator = TC.modelSOptions.price( opt_data );
                            var are_we_showing_pricing_indicator = ( opt_data.price !== 0 );
            %>
                    <li class="" data-code="<%= opt_code %>-<%= value_code %>" data-value="<%= value_code %>">
                        <a href="#" class="swatch" id="<%= opt_code %>-<%= value_code %>" name="<%= value_data.name %>" data-code="<%= opt_code %>" data-value="<%= value_code %>">
                            <div class="outline"></div>
                            <div class="swatch_mask">
                                <img src="<%= swatch_data.path %>" style="margin-left:<%= swatch_data.x_offset %>px">
                            </div>
                            <h4 class='opt-name-price-indicator'>
                                <span class="opt-name"><%= value_data.long_name %></span>
                                <%
                                if ( are_we_showing_pricing_indicator ) {
                                %>
                                <span class="opt-price cash-price"><%= option_price_indicator %></span>
                                <%
                                }
                                %>
                            </h4>
                        </a>
                    </li>
            <%
                        }
                    });
                }
            });
            %>
        </ul>
        <%
        }
        %>
    </div>

</script>
<script id="template-configurator-three-roof-and-wheels-wrap" type="text/template">
    <%
    /**
    *
    * wrapper for roof and wheels (body) tray
    * namespace: body_wrap
    *
    **/
    %>
    <div class="detail_pane body_container tray_container <%= body_wrap.code %> clearfix" id="detail_pane_<%= body_wrap.code %>"></div>
</script>

<script id="template-configurator-three-roof-and-wheels-base-container" type="text/template">
    <%
    /**
    *
    * base (category wrapper) for each interior sub-category,
    * e.g. C_RF_ONE, C_RF_TWO, etc.
    * namespace: body_base
    *
    **/
    var container_class = "menu_options_container";
    var version_three_class_override = (ENGINE.getConfiguratorVersion() >= 3) ? '_3' : '';
    %>
    <div class="<%= container_class %> body_container tray_container <%= body_base.code %>" id="menu_options_container_<%= body_base.code %><%= version_three_class_override %>" data-group="<%= body_base.code %>">
    </div>
</script>

<script id="template-configurator-three-roof-and-wheels-options-container" type="text/template">
    <%
    /**
    *
    * parse each body (roof and wheel) tray option
    e.g. RFPO, WT19, X019, etc.
    namespace: body_options
    *
    **/
    var container_class = "menu_options_subcontainer";
    var version_three_class_override = (ENGINE.getConfiguratorVersion() >= 3) ? '_3' : '';
    %>

    <div class="<%= container_class %><%= version_three_class_override %> radioGroup<%= version_three_class_override %> body_container tray_container <%= body_options.code %>" id="menu_options_container_<%= body_options.code %><%= version_three_class_override %>" data-group="<%= body_options.code %>">
        <!-- <h4><span class="cat-title"><%= body_options.name %></span></h4> -->
        <%
        if ( body_options.has_options ) {
        %>
        <ul class="swatch_list">
            <%
            _.each(body_options.options, function(opt_data, opt_code) {
                if ( ENGINE.isOptionVisible( opt_code ) ) {
                    var disclaimer = opt_data.disclaimer || "";
                    var swatch = ENGINE.getOption( opt_code ).getAssets({'view': 'UI_SWAT_THREE'})[0];
                    var option_price_indicator = TC.modelSOptions.price( opt_data );
                    var are_we_showing_pricing_indicator = ( opt_data.getPrice() !== 0 );
                %>
                    <li class="" data-code="<%= opt_code %>">
                        <a href="#" class="swatch" id="<%= opt_data.category %>-<%= opt_code %>" name="<%= opt_data.name %>" data-code="<%= opt_code %>">
                            <div class="outline"></div>
                            <div class="swatch_mask">
                                <img src="<%= swatch.path %>" style="margin-left:<%= swatch.x_offset %>px;">
                            </div>
                        </a>
                        <h4 class='opt-name-price-indicator'>
                            <div class="cash-price-inidcator-with-name">
                                <span class="opt-name"><%= opt_data.long_name %></span>
                                <%
                                if ( are_we_showing_pricing_indicator ) {
                                %>
                                <span class="opt-price cash-price"><%= option_price_indicator %></span>
                                <%
                                }
                                %>
                            </div>
                            <p class="opt-disclaimer"><%= disclaimer %></p>
                        </h4>
                    </li>
                    <%
                }
            });
            %>
        </ul>
        <%
        }
        %>
    </div>

</script>
<script id="template-configurator-three-interior-wrap" type="text/template">
    <%
    /**
    *
    * wrapper for interiorms tray
    * namespace: interior_wrap
    *
    **/
    %>
    <div class="detail_pane interior_container tray_container <%= interior_wrap.code %> clearfix" id="detail_pane_<%= interior_wrap.code %>"></div>
</script>

<script id="template-configurator-three-interior-base-container" type="text/template">
    <%
    /**
    *
    * base (category wrapper) for each interior sub-category,
    * e.g. C_INTBASE_PREMIUM, C_INTBASE_CUSTOM, C_INTBASE_PREMIUM
    * namespace: interior_base
    *
    **/
    var container_class = "menu_options_container";
    var signature_class = interior_base.is_signature ? 'signature' : '';
    %>
    <div class="<%= container_class %> interior_container tray_container <%= interior_base.code %> <%= signature_class %> " id="<%= container_class %>_<%= interior_base.code %>" data-group="<%= interior_base.code %>">
    </div>
</script>

<script id="template-configurator-three-interior-options-container" type="text/template">
    <%
    /**
    *
    * parse each interior tray option
    e.g. IPMB, IPMT, etc.
    namespace: interior
    *
    **/
    var container_class = "menu_options_subcontainer";
    var signature_class = interior_options.is_signature ? 'signature' : '';
    %>

    <div class="<%= container_class %> interior_container tray_container <%= interior_options.code %> <%= signature_class %>" id="menu_options_container_<%= interior_options.code %>" data-group="<%= interior_options.code %>">
        <h4><span class="cat-title"><%= interior_options.name %></span></h4>
        <%
        if ( interior_options.has_options ) {
        %>
        <ul class="swatch_list">
            <%
            try {
            var model_code = ENGINE.getModelCode();

            //- For rough-cut purposes, hard-code price book value to NOVEMBER
            var our_current_price_book = ENGINE.getPriceBook();

            _.each(interior_options.options, function(opt_data, opt_code) {
                if ( ENGINE.isOptionVisible( opt_code ) ) {
                    var swatches = ENGINE.getOption( opt_code ).getAssets();
                    var imgClass = 'v3_2_interior_swatches';
                    var assetPricebook = null;

                    if ( (/OCTOBER/.test(our_current_price_book)) ) {
                        imgClass = '';
                        assetPricebook = '2014 OCTOBER';
                    } 

                    var swatch_data = _.findWhere(swatches, { 'view': 'UI_SWAT_THREE', 'price_book': assetPricebook });

                    %>
                    <li class="<%= model_code %>" data-code="<%= opt_code %>">
                        <a href="#" class="swatch" id="<%= opt_data.category %>-<%= opt_code %>" name="<%= opt_data.name %>" data-code="<%= opt_code %>">
                            <div class="outline"></div>
                            <div class="swatch_mask">
                                <img class="<%= imgClass %>" src="<%= swatch_data.path %>" style="margin-left:<%= swatch_data.x_offset %>px; margin-top:<%= swatch_data.y_offset %>px">
                            </div>
                            <h4><%= opt_data.name %></h4>
                        </a>
                    </li>
                    <%
                }
            });
            }
            catch( err ) {
                debug.log("Error with interior template", err);
            }
            %>
        </ul>
        <%
        }
        %>
    </div>

</script>

<script id="template-configurator-three-interior-upgrades" type="text/template">
    <%
    /**
    *
    * parse each upgrade option (checkbox)
    * e.g. SX01, SX03, etc.
    * namespace: interior_upgrades
    * data-upgrade attribute displays the corresponding interior category
    *
    **/
    var non_us_pricing_class = (ENGINE.showPricingMS() && ENGINE.getPricingCountry() != 'US' ) ? '' : 'finance-cash-hidden';
    %>
    <div class="column interior-opt upgrades fancy-checkboxes <%= interior_upgrades.parent %>" data-code="<%= interior_upgrades.code %>" data-toggle="<%= interior_upgrades.toggle_pair %>" data-parent="<%= interior_upgrades.parent %>">
        <%
        var has_options = interior_upgrades.has_options && !_.isEmpty(interior_upgrades.options);
        if ( has_options ) {
            _.each(interior_upgrades.options, function(opt_data, opt_code) {
        %>

        <label for="cb_interiorms_<%= opt_data.category.toLowerCase() %>" class="label_fancy_check" id="label_cb_interiorms_<%= opt_data.category.toLowerCase() %>" data-code="<%= opt_data.code %>"data-oncode="<%= opt_data.code %>" data-offcode="<%= opt_data.toggle_pair %>" data-toggle="<%= opt_data.toggle_pair %>" >
            <span id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_fancy" class="fancy_check" style="">
                <input type="checkbox" name="cb_interiorms_<%= opt_data.category.toLowerCase() %>" id="cb_interiorms_<%= opt_data.category.toLowerCase() %>" class="hidden" value="<%= opt_data.code %>">
            </span>
            <h2>
                <%= opt_data.name %>
                <% if ( /YF01/.test(opt_data.code) ) { %>
                    <a class="infoButton right" href="#"></a>
                <% } %>
                <%
                if ( opt_data.price != 0 ) {
                %>
                <span class="opt-price price cash-price <%= non_us_pricing_class %>"><%= TC.externalInterface.formatCurrency(opt_data.price, true, false) %></span>
                <%
                }
                %>
            </h2>
        </label>
        <%
            });
        }
        %>
    </div>
</script>

<script id="template-configurator-three-interior-pkg" type="text/template">
    <%
    /**
    *
    * parse each package option (checkbox)
    * e.g. PI01, PI02, PI03.
    * namespace: interior_pkg
    * data-upgrade attribute displays the corresponding interior category
    *
    **/
    var non_us_pricing_class = (ENGINE.showPricingMS() && ENGINE.getPricingCountry() != 'US' ) ? '' : 'finance-cash-hidden';
    %>
    <div class="column interior-opt pkg fancy-checkboxes <%= interior_pkg.parent %>" data-code="<%= interior_pkg.code %>" id="menu_options_container_<%= interior_pkg.code %>" data-parent="<%= interior_pkg.parent %>">
        <%
        var has_options = interior_pkg.has_options && !_.isEmpty(interior_pkg.options);
        if ( has_options ) {
            _.each(interior_pkg.options, function(opt_data, opt_code) {
        %>
        <div class="cb_interiorms_<%= opt_data.category.toLowerCase() %>" data-code="<%= opt_data.code %>">
            <label for="cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" class="label_fancy_check" id="label_cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" data-code="<%= opt_data.code %>" >
                <span id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_fancy" class="fancy_check" style="">
                    <input type="checkbox" name="cb_interiorms_<%= opt_data.category.toLowerCase() %>" id="cb_interiorms_<%= opt_data.category.toLowerCase() %>_<%= opt_data.code %>" class="hidden" value="<%= opt_data.code %>">
                </span>
                <h2>
                    <%= opt_data.name %>
                    <span class="price cash-price">
                    <%
                    if ( opt_data.getPrice() !== 0 ) {
                    %>
                    <%= TC.externalInterface.formatCurrency(opt_data.getPrice(), true, false) %></span>
                    <%
                    }
                    else {
                    %>
                    <%= opt_data.price_indicator %></span>
                    <%
                    }
                    %>
                </h2>
                <%
                if (opt_code != 'PI01') {
                %>
                <a class="infoButton" href="#"></a>
                <%
                } else {
                %>
                <br />
                <%
                }
                %>
                <p class="description">
                    <%= opt_data.description %>
                </p>
            </label>
        </div>

        <%
            });
        }
        %>
    </div>
</script>
<script id="template-configurator-three-battery" type="text/template">
    <%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @market: All markets
    * @jira: WEB-18124
    * @version: October 2014 (aka Configurator Version 3)
    * @overview: Main template for battery layout
    * @front-end module: menu.configurator_three_battery.js
    * 
    **/
    %>
    <div class="category-group" id="options_category_<%= battery['category'] %>">
    </div>
</script>

<script id="template-configurator-three-battery-items" type="text/template">
    <%
        var text_description  = ( battery["description"] === null ) ? "" : "<p>" + battery["description"] + "</p>";
        var class_num_options = ( battery["numOptions"] === 1 ) ? "solo" : "";
    %>
    <h2><%= battery["name"] %></h2>
        <%= text_description %>
        <div class="battery-list clearfix <%= class_num_options %>">
        <%
        _.each(battery["sub_battery"], function(option) {
            var is_battery_selected = ( ENGINE.isOptionSet(option.code) ? " selected" : "" );
            var swatch_path         = (option.swatch.path === "" ? "https://web.archive.org/web/20150215162246/http://placehold.it/85x30" : option.swatch.path);
            var swatch_x_offset     = String(Number(option.swatch.x));
            var option_disclaimer   = ( option.disclaimer || "" );
        %>
            <div class="battery-option clearfix <%= is_battery_selected %>" data-code="<%= option.code %>">
                <div class="inner-shadow">
                    <div class="battery-option-image <%= option.code %>">
                        <img src="<%= swatch_path %>" style="margin-left: <%= swatch_x_offset %>px">
                    </div>
                    <div class="battery-option-details">
                        <h3><%= option.name %></h3>
                        <div class="battery-option-description"><%= option["description"] %></div>
                    </div>
                    <div class="battery-option-footer">
                        <h4 class="cash-price hidden"><%= option["price_cash"] %></h4>
                        <h4 class="financed-price hidden"><%= option["price_finance"] %></h4>
                        <p class="disclaimer"><%= option_disclaimer %></p>
                    </div>
                </div>
            </div>
        <% }); %>
        </div>
        <p class="cat-disclaimer"><%= battery["disclaimer"] %></p>
</script>

<script id="template-configurator-three-drive-train" type="text/template">
    <%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @market: All markets
    * @jira: WEB-18124
    * @version: October 2014 (aka Configurator Version 3)
    * @overview: Main template for drive train layout
    * @front-end module: menu.configurator_three_drive_train.js
    * @last_revised: November 7, 2014
    * 
    **/
    %>
    <div class="category-group" id="options_category_<%= drive_train['category'] %>">
    </div>
</script>

<script id="template-configurator-three-drive-train-items" type="text/template">
    <%
        var current_battery   = ENGINE.getCurrentBatteryOption();
        var text_description  = ( drive_train["description"] === null ) ? "" : "<p>" + drive_train["description"] + "</p>";
        var class_num_options = ( drive_train["numOptions"] === 1 ) ? "solo" : "";
    %>
    <h2><%= drive_train["name"] %></h2>
        <%= text_description %>
        <div class="drive-train-list clearfix <%= class_num_options %>">
        <%
        _.each(drive_train["sub_drive_train"], function(option) {
            var is_drive_train_selected = ( ENGINE.isOptionSet(option.code) ? " selected" : "" );
            var option_name       = ( option["long_name"] || option["name"] );
            var option_disclaimer = ( option["disclaimer"] || "" );

            //-- Define our swatch(es)
            var swatch_path       = "https://web.archive.org/web/20150215162246/http://placehold.it/85x30";
            var swatch_x_offset   = 0;
            if ( option.swatch !== undefined ) {
                if ( option.swatch.path !== undefined ) {
                    swatch_path     = option.swatch.path;
                    swatch_x_offset = String(Number(option.swatch.x));
                }
                else if ( option.swatch[0] !== undefined ) {
                    swatch_path     = option.swatch[0].path;
                    swatch_x_offset = String(Number(option.swatch[0].x));
                }

                //-- Let's account for any price book specific assets we are needing to use
                var price_book_specific_assets;
                var use_price_book_asset = option.use_pricebook_asset || null;
                if ( use_price_book_asset !== null && use_price_book_asset !== "" ) {

                    price_book_specific_assets = _.findWhere(option.assets, {price_book: use_price_book_asset});
                    if ( price_book_specific_assets ) {
                        swatch_path = price_book_specific_assets.path || swatch_path;
                        swatch_x_offset = String(Number(price_book_specific_assets["x"])) || swatch_x_offset;
                    }

                }

            }

            //-- One-off for Nick/Henry/EM
            var price_cash = ( option["price_cash"] == 'Included' ? 'Standard' : option["price_cash"]  );
            var price_finance = ( option["price_finance"] == 'Included' ? 'Standard' : option["price_finance"]  );
        %>
            <div class="drive-train-option option-select clearfix <%= is_drive_train_selected %> <%= drive_train['classes']['wrapper'] %>" data-code="<%= option.code %>">
                <div class="inner-shadow">
                    <div class="drive-train-option-image <%= option.code %>" data-battery="<%= current_battery %>">
                        <%
                        if ( drive_train.is_legacy ) {
                        %>
                        <img src="<%= swatch_path %>" style="margin-left: <%= swatch_x_offset %>px" class="main-asset">
                        <%
                        }
                        %>
                    </div>
                    <div class="drive-train-option-details">
                        <h3 class="option-name">
                            <span class="copy"><%= option_name %></span>
                        </h3>
                        <!-- <div class="drive-train-option-description"><%= option["description"] %></div> -->
                    </div>
                    <div class="drive-train-option-footer">
                        <h4 class="cash-price hidden"><%= price_cash %></h4>
                        <h4 class="financed-price hidden"><%= price_finance %></h4>
                        <p class="disclaimer"><%= option_disclaimer %></p>
                    </div>
                </div>
            </div>
        <% }); %>
        </div>
        <p><%= drive_train["disclaimer"] %></p>
</script>
<script id="template-summary-lease-cash-view-au-v3" type="text/template">
<%
    /**
    *
    * @author: Santiago y Manny
    * @overview: Main template for new summary panel layout for Australia
    *
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
%>
    <div id='summary-lease-cash-wrapper'>
        <div id='cash' class='tab-content summary-panel'>
            <h3 class='cash-amount'><span class='cash-amount-num'><%= _lm.getDriveAwayPrice(true) %></span></h3>
            <p class='cash-amount-text'>
            <span><%= _lm.getDriveAwayAmountText() %> <!--<span class='territory-friendly-name-ui'><%= _lm.getTerritoryFriendlyName() %></span>--></span>
            </p>
            <ul class='list-territories'>
                <%
                var territory_class;
                var default_territory = _lm.getTerritory();
                _.each(_lm.defaults.views, function(ui_friendly_territory_name, territory) {
                    territory_class = isNodeDefault(territory, default_territory) ? 'default active' : '';
                %>
                    <li class='<%= territory_class %>'><a href='#' data-territory='<%= territory %>'><%= territory %></a></li>
                <%
                });
                %>
            </ul>
            <p class='territory-list-text'><%= _lm.getTerritoryListText() %></p>

        </div>
    </div>
</script>


<script id="template-summary-estimated-delivery-date-view-au-v3" type="text/template">
    <%
    /**
     * Estimated Delivery Date Data. 
     * View Refreshes based on current battery in configuration
     */
    %>
    <div id='summary-lease-cash-delivery-date-au'>
        <h3 class='delivery-date'>March 2014</h3>
        <p class='description'>Estimated delivery date</p>
    </div>
</script>


<script id="template-summary-cost-details-view-au-v3" type="text/template">
    <%
    // Cost Details Section
    var formatCurrency = TC.externalInterface.formatCurrency;
    %>
    <div id='summary-cost-details'>
        <ul class='details-list'>
            <li id="cost-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'>Your <%= ENGINE.configuration.getModelName() %> <span class='hidden'>:</span> </span>
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(ENGINE.configuration.getSubTotal(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Luxury Car Tax <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='luxury-car-tax'><%= formatCurrency(_cdp.getLuxuryCarTax(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li>
                <span class='label'>Local Registration Costs <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='luxury-registration-costs'><%= formatCurrency(_cdp.getLocalRegCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='local-ctp-row' style="display:none;">
                <span class='label'>Local CTP <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='local-ctp'><%= formatCurrency(_cdp.getLocalCTPCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='local-stamp-duty-row' style="display:none;">
                <span class='label'>Local Stamp Duty <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='local-stamp-duty'><%= formatCurrency(_cdp.getLocalStampDutyCost(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='primary'>
                <span class='label'>Total Price in <span class='territory-friendly-name-ui'>the <%= _cdp.getTerritoryFriendlyName() %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span id='total-price'><%= _cdp.getDriveAwayPrice(true) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>
<script id="template-summary-panel-tabs-view-gb-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: April 2014
    * @market: United Kingdom, REEU (European Union)
    * @jira: WEB-18248
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.configurator_three_summary_reeu.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'>
                <%= _model.getLeasingAmount(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                _.each(lease_data.view[ locale ].mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
        </div>

        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'>
                <%= _model.getFinancingMonthlyBasePayment(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <p class='finance-amount-text'>
                <span>
                    <span class="finance-amount-text-savings"></span>
                </span>
            </p>

            <ul class='tabs-finance-term'>
                <%
                var finance_term_class;
                var finance_data = _model._getDefaults().finance;
                var default_finance_term = finance_data.defaults.term;
                _.each(finance_data.view[ locale ].term, function(ui_friendly_term, finance_term) {
                    finance_term_class = isNodeDefault( parseInt(finance_term, 10), default_finance_term) ? 'default active' : '';
                %>
                    <li><a href='#' data-term='<%= finance_term %>' class='<%= finance_term_class %>'><%= ui_friendly_term %></a></li>
                <%
                });
                %>
            </ul>
            <p class='lease-term-text'><%= all_tabs_data.finance.strings.term %></p>
        </div>

        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <p class='cash-amount-text'><%= all_tabs_data.cash.strings.tag_line %></p>
        </div>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-gb-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Financing and Purchase tabs
    **/

    var _model = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                 = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      = _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <ul class='emc-list'>
                <li>
                    <span class='label'><%= _strings.estimated_monthly_payment %><span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-payment'><%= _model.getLeasingAmount(true) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li id="gas-savings-wrapper">
                    <span class='label'><%= _strings.gas_savings %><span class='hidden'>:</span>
                        <span class='effective-price'>- 
                            <span class='gas-savings-amount'><%= formatCurrency(gas_savings, true, false) %></span> /mo.
                        </span>
                    </span>
                </li>
                <li class='primary'>
                    <span class='label'><%= _strings.montly_cost_with_savings %>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-cost-num'><%= formatCurrency(lease_amount, true, false ) %></span> /mo.
                        </span>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</script>

<script id="template-summary-non-lease-details-view-gb-v3" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var lease_amount                    = _model.getMonthlyCost();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt                = _model.getLeasingAmount();
    var bool_details_shown              = _model.getDetailsVisibility();
    var current_battery_code            = _model.getCurrentBattery();
    var amt_finance_due_at_delivery     = _model.calculateFinanceDueAtDeliveryAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();

    //-- CSS classes
    var css_class_details                          = ( bool_details_shown ? '' : 'hidden' );
    var css_class_non_lease_details                = ( active_tab === 'lease' ? 'hidden' : '' );
    var css_class_non_lease_active_state           = ( _model.getActiveStateNonLease() == 'default' ? 'hidden' : '' );
    var css_class_non_lease_active_state_switcher  = ( _model.getActiveStateNonLease() == 'default' ? '' : 'hidden' );
    var css_class_congestion_charge_display        = ( _model.getActiveCityNonLeaseIncentiveAmount() === 0 ? 'hidden' : '' );
    var css_class_congestion_switcher_display      = ( css_class_congestion_charge_display === 'hidden' ? '' : 'hidden' );
    var css_class_benefit_in_kind_display          = ( _model.calculateFinanceBenefitInKindAmount() === 0 ? 'hidden' : '' );
    var css_class_benefit_in_kind_switcher_display = ( css_class_benefit_in_kind_display === 'hidden' ? '' : 'hidden' );
    
    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- Localized strings + line-item label mappings
    var label_per_month                         = _strings.per_month;
    var label_net_money                         = _strings.net_price_with_incentives;
    var label_down_payment                      = _strings.down_payment;
    var label_congestion_charge                 = _strings.congestion.congestion_charge;
    var label_incentives_available_in           = _strings.congestion.available_savings;
    var label_i_live_in_a_different_city        = _strings.congestion.different_savings_selector;
    var label_i_commute_into_city               = _strings.congestion.city_i_commute_into;
    var label_i_commute_into_city_selected      = _strings.congestion.city_i_commute_into_selected;
    var label_benefit_in_kind_charge            = _strings.benefit_in_kind.benefit_in_kind_charge;
    var label_benefit_in_kind_business_purchase = _strings.benefit_in_kind.business_purchase;
    var label_benefit_in_kind_personal_purchase = _strings.benefit_in_kind.personal_purchase;

    //-- String overrides
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- City incentives for congestion savings
    var city_incentives = _model._getCityIncentives();
    var active_tab_for_city_incentives = active_tab;
    var city_incentives_for_active_tab = city_incentives[active_tab_for_city_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>
        <ul class='details-list estimated-monthly-payment'>
            <li id="non-lease-down-payment">
                <span class='label'>
                    <span class='label-finance-down-payment'><%= _strings.down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='finance-down-payment'><%= formatCurrency(_model.getFinancingDown(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-estimated-monthly-payment">
                <span class='label'>
                    <span class='nld-current-battery'><%= _strings.estimated_monthly_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='emp-amount sub-total'><%= formatCurrency(_model.getFinancingMonthlyBasePayment(), true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li id="non-lease-gas-savings">
                <span class='label'><%= _strings.gas_savings %> 
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='gas-savings-amount'><%= _model._getGasSavingsByMileage() %></span> /mo.<%= label_per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-road-tax-savings">
                <span class='label'><%= _strings.road_tax_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='road-tax-amount'><%= _model.getTaxRoadBenefit() %></span> /mo.<%= label_per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-city-switcher" class="<%= css_class_congestion_switcher_display %>">
                <span class="label" class="">
                    <%= label_congestion_charge %> 
                    (<a class="select_city blue" data-city="LN"><%= label_i_commute_into_city %></a>)
                </span>
            </li>
            <li id="non-lease-active-city-wrapper" class="<%= css_class_congestion_charge_display %>">
                <span class="label">
                    <span class="active-city-long-name"><%= _model.getActiveCityNonLeaseLongName() %></span> congestion (<a class="change_city blue"><%= label_i_live_in_a_different_city %></a>) <span class='hidden'>:</span> 
                    <span class="effective-price">
                        <span class="effective-monthly-payment non-lease-city-incentive">- <%= formatCurrency(_model.getActiveCityNonLeaseIncentiveAmount(), true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li id="non-lease-benefit-in-kind-switcher" class="<%= css_class_benefit_in_kind_switcher_display %>">
                <span class="label" class="">
                    <%= label_benefit_in_kind_charge %> 
                    (<a class="select_benefit_in_kind blue" data-benefit="true"><%= label_benefit_in_kind_business_purchase %></a>)
                </span>
            </li>
            <li id="non-lease-active-benefit-in-kind-wrapper" class="<%= css_class_benefit_in_kind_display %>">
                <span class="label">
                    <span class="active-benefit-in-kind"><%= label_benefit_in_kind_charge %></span> 
                    (<a class="change_benefit_in_kind blue" data-benefit="false"><%= label_benefit_in_kind_personal_purchase %></a>) <span class='hidden'>:</span> 
                    <span class="effective-price">
                        <span class="effective-monthly-payment non-lease-benefit-in-kind-incentive">- <%= formatCurrency(_model.getActiveCityNonLeaseIncentiveAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-net-monthly-cost" class="primary">
                <span class='label'><%= _strings.montly_cost_with_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='nmc-amount'>- <%= formatCurrency(financing_monthly_effective_pmt, true, false) %></span> /mo.
                    </span>
                </span>
            </li>
            <li class="disclaimer">
                <span class="label"><a href="#finance_disclaimer">Explanation of Assumptions</a></span>
            </li>
        </ul>

        <ul class='details-list down-payment-list-items'>
            <li id="non-lease-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'><%= label_down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(sub_total, true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'><%= _strings.federal_tax_credit %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>- <%= formatCurrency(_model.getFederalIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='non-lease-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'><span class='net-down-payment-text'><%= label_net_money %></span></span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment due-at-delivery-amount'><%= formatCurrency(_model.calculateFinanceDueAtDeliveryAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-lease-details-view-gb-v3" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>
        <ul class='details-list'>
            <li>
                <span class='label'><%= _strings.down_payment %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(_model.getReservationPrice(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='lease-state-switcher' class='hidden'>
                <span class='label' class=''>
                    <%= label_incentives_available_in %>

                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %> 
                    <%
                    }
                    %>
                </span>
            </li>
            <li id='lease-state-incentive-wrapper' class=''>
                <span class='label'>
                    <span class='active-state-long-name'><%= _model.getActiveStateLeaseLongName() %></span> incentive (<a class='change_state blue'><%= label_i_live_in_a_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment lease-state-incentive'>- <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='leasing-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'>
                        <span class='net-down-payment-text'><%= label_net_money_lease %></span>
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment value'></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>
<script id="template-summary-panel-tabs-view-no-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @market: Norway
    * @jira: WEB-19453
    * @version: October 2014 and moving forward (aka Configurator Version 3+)
    * @overview: Main template for new summary panel layout with Financing and Cash tabs.
    * @front-end module: model_s.summary_rena.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    //-- Localized strings
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var active_tab = _model.getActiveTab();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
    var current_tab_strings = all_tabs_data[ active_tab ].strings;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li class='active'><a href='#finance' class='active'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='finance' class='tab-content finance'>
            <h3 class='finance-amount primary-price-label'>
                <span class='finance-amount-num'>
                    <%= _model.getFinancingMonthlyBasePayment(true) %>
                </span> 
                <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <h4 class='secondary-price-label'>
                <span class='finance-term-length lower'>
                    <%= ( _model.getFinancingTerm() / 12 ) %><span class="lower"><%= current_tab_strings.year_loan %></span>,
                </span> 
                <span class='finance-apr lower'>
                    <%
                    var loan_rate = _model.getFinancingRate();
                    %>
                    <%= loan_rate %>% 
                    <%= current_tab_strings.annual_percent_rate_suffix %>
                </span>
            </h4>
            <h4 class='finance-amount-text tag-line'>
                <span class="finance-amount-text-savings"></span>
            </h4>
        </div>

        <div id='cash' class='tab-content cash'>
            <h3 class='cash-amount primary-price-label'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <h4 class='tag-line'>
                <%= all_tabs_data.cash.strings.tag_line %>
            </h4>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-no-v3" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date'>
        <span class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</span>
    </div>
</script>

<script id="template-summary-non-lease-details-view-no-v3" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var current_battery_code            = _model.getCurrentBattery();
    var lease_amount                    = _model.getMonthlyCost();
    var monthly_base_pmt                = _model.getLeasingAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var bool_details_shown              = _model.getDetailsVisibility();

    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- CSS classes
    var css_class_details           = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';

    //-- Localized strings + line-item labels
    var label_net_money                 = _strings.net_price_with_incentives;
    var label_down_payment              = _strings.down_payment;
    var label_cash_ev_exemption_notice  = _strings.tag_line_ev_exemption;
    var label_cash_including_incentives = _strings.net_price_with_incentives;

    //-- Line-item labels and corresponding prices
    var amt_finance_due_at_delivery = _model.calculateFinanceDueAtDeliveryAmount();
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;
    %>

    <div id='summary-non-lease-cash-details' class='tab-primary-section'>

        <div class='summary-non-lease-cash-details-finance'>

            <div class='monthly-effective-payment-wrapper finance'>
                <h3 id='non-lease-net-monthly-cost' class='monthly-effective-payment primary-price-label'>
                    <span class='nmc-amount'>
                        <%= formatCurrency(financing_monthly_effective_pmt, true, false) %>
                    </span> pr. måned
                </h3>
                <p class='tag-line'>
                    <%= _strings.montly_cost_with_savings %>
                </p>
            </div>
            <div class='finance secondary-line-items-wrapper'>
                <h4 id="non-lease-details-current-battery" class='secondary-price-label <%= active_tab %>' >
                    <span class='effective-monthly-payment sub-total'>
                        <%= formatCurrency(sub_total, true, false) %>
                    </span>
                    <span class='label lower'>
                        <%= label_down_payment %>
                    </span>
                    <span class='loan-ev-exemption-tag-line'>
                        <%= label_cash_ev_exemption_notice %>
                    </span>
                </h4>
            </div>

        </div> <!-- summary-non-lease-cash-details-finance -->

        <div class='summary-non-lease-cash-details-cash monthly-effective-payment-wrapper'>

            <div class='cash secondary-line-items-wrapper'>
                <h4 class=' <%= active_tab %> secondary-price-label'>
                    <span class='cash-ev-exemption-tag-line'>
                        <%= _strings.tag_line_ev_exemption %>
                    </span>
                </h4>
            </div>

        </div> <!-- summary-non-lease-cash-details-cash -->

    </div>

</script>

<script id="template-summary-disclaimer-notice" type="text/template">
    <%
    var _model = disclaimerModel;

    //-- Localized strings
    var active_tab = _model.getActiveTab();
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;
    %>

    <div id='summary-disclaimer-notice'>
        <p>
            <%= _strings.disclaimer_notice %>
        </p>
    </div>

</script>

<script id="template-summary-panel-tabs-view-ca-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @market: Canada, RENA (North America)
    * @jira: WEB-18239 && WEB-18301
    * @version: Pre-October 2014 (aka Pre-Configurator Version 3)
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.summary_rena.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content'>
            <h3 class='lease-amount'><span class='lease-amount-num'>
                <%= _model.getLeasingAmount(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                _.each(lease_data.view[ locale ].mileage, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
        </div>

        <div id='finance' class='tab-content'>
            <h3 class='finance-amount'><span class='finance-amount-num'>
                <%= _model.getFinancingMonthlyBasePayment(true) %></span> <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <p class='finance-amount-text'>
                <span>
                    <span class="finance-amount-text-savings"></span>
                </span>
            </p>
        </div>

        <div id='cash' class='tab-content'>
            <h3 class='cash-amount'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <p class='cash-amount-text'><%= all_tabs_data.cash.strings.tag_line %></p>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-ca-v3" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date'>
        <span class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</span>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-ca-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    **/

    var _model         = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab     = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      = _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <ul class='emc-list'>
                <li>
                    <span class='label'><%= _strings.estimated_monthly_payment %><span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-payment'><%= _model.getLeasingAmount(true) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
                <li id="gas-savings-wrapper">
                    <span class='label'><%= _strings.gas_savings %><span class='hidden'>:</span>
                        <span class='effective-price'>- 
                            <span class='gas-savings-amount'><%= formatCurrency(gas_savings, true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
                <li class='primary'>
                    <span class='label'><%= _strings.montly_cost_with_savings %>
                        <span class='hidden'>:</span> 
                        <span class='effective-price'>
                            <span class='effective-monthly-cost-num'><%= formatCurrency(lease_amount, true, false ) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                        </span>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</script>

<script id="template-summary-non-lease-details-view-ca-v3" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var current_battery_code            = _model.getCurrentBattery();
    var lease_amount                    = _model.getMonthlyCost();
    var monthly_base_pmt                = _model.getLeasingAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';

    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- CSS classes
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings + line-item labels
    var label_net_money               = _strings.net_price_with_incentives;
    var label_down_payment            = _strings.down_payment;
    var label_incentives_available_in = _strings.state_incentive.available_incentives;
    var label_live_in_different_state = _strings.state_incentive.different_incentive_selector;
    var label_incentive_stand_alone   = _strings.state_incentive.incentive_standalone;
    var label_incentive_seperator     = _strings.state_incentive.incentive_seperator;

    //-- Line-item labels and corresponding prices
    var amt_finance_due_at_delivery = _model.calculateFinanceDueAtDeliveryAmount();
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>
        <ul class='details-list estimated-monthly-payment'>
            <li id="non-lease-estimated-monthly-payment" class="hidden">
                <span class='label'>
                    <span class='nld-current-battery'><%= _strings.estimated_monthly_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='emp-amount sub-total'><%= formatCurrency(_model.getFinancingMonthlyBasePayment(), true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-gas-savings">
                <span class='label'><%= _strings.gas_savings %> 
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>- 
                        <span class='gas-savings-amount'></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-grv" class='hidden'>
                <span class='label'><%= _strings.guaranteed_resale_value %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='grs-amount'>In-progress</span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
            <li id="non-lease-net-monthly-cost" class="primary">
                <span class='label'><%= _strings.montly_cost_with_savings %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='nmc-amount'>- <%= formatCurrency(financing_monthly_effective_pmt, true, false) %></span> <%= view_data.tabs[ active_tab ].strings.per_month %>
                    </span>
                </span>
            </li>
        </ul>

        <ul class='details-list'>
            <li id="non-lease-details-current-battery">
                <span class='label'>
                    <span class='nld-current-battery'><%= label_down_payment %></span> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment sub-total'><%= formatCurrency(sub_total, true, false) %></span>
                    </span>
                </span>
            </li>
            <li class='hidden'>
                <span class='label'><%= _strings.federal_tax_credit %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'>- <%= formatCurrency(_model.getFederalIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id="non-lease-active-state" class='<%= css_class_non_lease_active_state %> non-lease-active-state'>
                <span class='label'>
                    <span class='active-non-lease-state-long-name'><%= _model.getActiveStateNonLeaseLongName() %></span> <%= label_incentive_stand_alone.toLowerCase() %> (<a class='change_state blue' style='font-size:12px;'><%= label_live_in_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment incentive-price'>
                        <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <%
            if ( state_incentives_for_active_tab ) {
            %>
            <li id="non-lease-state-switcher" class="<%= css_class_non_lease_active_state_switcher %> non-lease-state-switcher">
                <span class='label' class='hidden'>
                    <%= label_incentives_available_in %> 
                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <span class='state-incentive <%= state_incentive_code %>'><a class='blue active' data-state="<%= state_incentive_code %>"><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %> <%= _strings.state_incentive.incentive_seperator %><% } %></span> 
                    <%
                    }
                    %>
                </span>
            </li>
            <%
            }
            %>
            <li id='non-lease-due-at-delivery-wrapper'>
                <span class='label'>
                    <span class='net-down-payment'><span class='net-down-payment-text'><%= label_net_money %></span></span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment due-at-delivery-amount'><%= formatCurrency(_model.calculateFinanceDueAtDeliveryAmount(), true, false) %></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-lease-details-view-ca-v3" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;
    var label_incentive_stand_alone       = _strings.state_incentive.incentive_standalone;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>
        <ul class='details-list'>
            <li>
                <span class='label'><%= _strings.down_payment %> <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment'><%= formatCurrency(_model.getReservationPrice(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='lease-state-switcher' class='hidden'>
                <span class='label' class=''>
                    <%= label_incentives_available_in %>

                    <%
                    var state_incentive_list = _.keys(state_incentives_for_active_tab);
                    var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                        return state_abbreviation !== 'other';
                    });
                    var state_incentive_list_length = filtered_state_incentive_list.length;
                    for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                        var state_incentive_code = filtered_state_incentive_list[ state_index ];
                        if ( state_incentive_code === undefined ) {
                            continue;
                        }
                        var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                    %>
                    <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %> <%= _strings.state_incentive.incentive_seperator %><% } %>
                    <%
                    }
                    %>
                </span>
            </li>
            <li id='lease-state-incentive-wrapper' class=''>
                <span class='label'>
                    <span class='active-state-long-name'><%= _model.getActiveStateLeaseLongName() %></span> <%= label_incentive_stand_alone.toLowerCase() %> (<a class='change_state blue' style='font-size:12px;'><%= label_i_live_in_a_different_state %></a>) <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment lease-state-incentive'>- <%= formatCurrency(_model.getStateIncentive(), true, false) %></span>
                    </span>
                </span>
            </li>
            <li id='leasing-due-at-delivery-wrapper' class='primary'>
                <span class='label'>
                    <span class='net-down-payment'>
                        <span class='net-down-payment-text'><%= label_net_money_lease %></span>
                    </span>
                    <span class='hidden'>:</span> 
                    <span class='effective-price'>
                        <span class='effective-monthly-payment value'></span>
                    </span>
                </span>
            </li>
        </ul>
    </div>

</script>


<script id="template-summary-panel-tabs-view-us-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: April 2014
    * @market: United States, RENA (North America)
    * @jira: WEB-12099
    * @version: October 2014 and moving forward (aka Configurator Version 3+)
    * @overview: Main template for new summary panel layout with Leasing, Financing and Cash tabs.
    * @front-end module: model_s.summary_rena.js
    **/
    var isNodeDefault = function(nodeDefault, nodeToCheck) {
        var is_default;
        is_default = ( nodeToCheck === nodeDefault );
        return is_default;
    };
    //-- Localized strings
    var _model = newSummaryLayout;
    var locale = _model.getLocale();
    var active_tab = _model.getActiveTab();
    var view_data = _model._getViews();
    var all_tabs_data = view_data.tabs;
    var current_tab_strings = all_tabs_data[ active_tab ].strings;
%>
    <div id='summary-lease-cash-wrapper'>
        <ul class='tabs'>
            <li><a href='#lease'><%= all_tabs_data.lease.strings.tab %></a></li>
            <li><a href='#finance'><%= all_tabs_data.finance.strings.tab %></a></li>
            <li><a href='#cash'><%= all_tabs_data.cash.strings.tab %></a></li>
        </ul>
        <div id='lease' class='tab-content lease'>
            <h3 class='lease-amount primary-price-label'>
                <span class='lease-amount-num'>
                    <%= _model.getLeasingAmount(true) %>
                </span> 
                <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <ul class='tabs-mileage'>
                <%
                var lease_mileage_class;
                var lease_data = _model._getDefaults().lease;
                var default_lease_mileage = lease_data.defaults.mileage;
                var mileage_view_ui_elements = lease_data.view[ locale ].mileage;
                var mileage_view_ui_element_keys = _.keys(mileage_view_ui_elements);
                _.each(mileage_view_ui_elements, function(ui_friendly_leasing_mileage, lease_mileage) {
                    lease_mileage_class = isNodeDefault( parseInt(lease_mileage, 10), default_lease_mileage) ? 'default active' : '';
                %>
                    <li><a href='#' data-mileage='<%= lease_mileage %>' class='<%= lease_mileage_class %>'><%= ui_friendly_leasing_mileage %></a><%= all_tabs_data.lease.strings.per_year %></li>
                <%
                });
                %>
            </ul>
            <p class='tag-line'>
                <span>
                    <%= current_tab_strings.tag_line %>
                </span>
            </p>
        </div>

        <div id='finance' class='tab-content finance'>
            <h3 class='finance-amount primary-price-label'>
                <span class='finance-amount-num'>
                    <%= _model.getFinancingMonthlyBasePayment(true) %>
                </span> 
                <%= all_tabs_data.lease.strings.per_month %>
            </h3>
            <h4 class='secondary-price-label'>
                <span class='finance-term-length'>
                    <%= _model.getFinancingTerm() %> <span class="lower"><%= current_tab_strings.month_loan %></span>,
                </span> 
                <span class='finance-apr'>
                    <%
                    var loan_rate = _model.getFinancingRate();
                    var formatted_loan_rate = parseInt(loan_rate).toFixed(2);
                    %>
                    <%= formatted_loan_rate %>% 
                    <%= current_tab_strings.annual_percent_rate_suffix %>
                </span>
            </h4>
            <h4 class='finance-amount-text tag-line'>
                <span class="finance-amount-text-savings"></span>
            </h4>
        </div>

        <div id='cash' class='tab-content cash'>
            <h3 class='cash-amount primary-price-label'>
                <span class='cash-amount-num'><%= _model.getCashAmount(true) %></span>
            </h3>
            <h4 class='tag-line'>
                <%= all_tabs_data.cash.strings.tag_line %>
            </h4>
        </div>
    </div>
</script>

<script id="template-summary-estimated-delivery-date-view-us-v3" type="text/template">
    <%
    var _model = eddSummaryPanel;
    var edd_localized_strings = _model._getLocalizedStrings('est_delivery_date');
    %>
    <div id='summary-lease-cash-delivery-date'>
        <span class='delivery-date'>{{AUTO-POPULATED-FROM-VIEW-CONTROLLER}}</span>
    </div>
</script>

<script id="template-summary-effective-monthly-cost-view-us-v3" type="text/template">
<%
    /**
    *
    * @author: Manny
    * @date: October 2014
    * @overview: Main template for effective monthly cost panel that is tied to the new summary layout with Leasing, Financing and Cash tabs
    **/

    var _model = newEffectiveMonthlyCost;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                 = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                  = ENGINE.configuration.getSubTotal();
    var lease_amount               = _model.getMonthlyCost();
    var monthly_base_pmt           = _model.getLeasingTotalMonthlyPayment(true);
    var monthly_effective_pmt      = _model.getLeasingTotalMonthlyEffectivePayment(true);
    var tax_benefit                = _model.getLeasingTotal().tax_benefit;
    var gas_savings                = _model.calculateGasSavings();
    var active_lease_state         =  _model.getActiveStateLease();
    var eligible_lease_states      =    _model.getActiveStatesEligibleForLeasing();
    var current_battery_code       = ENGINE.getCurrentBatteryOption();
    var state_incentive_lease_down = -_model.getLeasingTotal().down_incentive_term;
    var state_incentive_lease_term = _model.getLeasingTotal().state_incentive_term;

    //-- CSS classes
    var bool_details_shown              = _model.getDetailsVisibility();
    var css_class_details               = bool_details_shown ? '' : 'hidden';
    var css_class_details_list          = _.contains( eligible_lease_states, active_lease_state ) ? '' : ''; // 'hidden';
    css_class_details_list              = 'hidden';
    var css_class_lease_details         = active_tab === 'lease' ? '' : 'hidden';
    var css_class_finance_details       = active_tab === 'finance' ? '' : 'hidden';
    var css_class_lease_incentives_list = _.contains( eligible_lease_states, active_lease_state ) ? '' : 'hidden';

    //-- Localized strings
    var locale                   = _model.getLocale();
    var view_data                = _model._getViews();
    var all_emc_data             = view_data.effective_monthly_cost;
    var all_ems_current_tab_data = all_emc_data[ active_tab ];
    var _strings                 = all_ems_current_tab_data.strings;
%>
    <div id='summary-lease-cash-effective-monthly-cost'>
        <div id='summary-lease-cash-details' class='<% //= css_class_details %>'>
            <div class='monthly-effective-payment-wrapper <%= css_class_lease_details %>'>
                <h3 class='monthly-effective-payment primary-price-label'>
                    <span class='monthly-effective-payment-amount'>
                        <%= monthly_effective_pmt %>
                    </span> <%= _strings.per_month %>
                </h3>
                <p class='tag-line'>
                    <%= _strings.gas_savings %>
                </p>
            </div>
        </div>
    </div>

</script>

<script id="template-summary-non-lease-details-view-us-v3" type="text/template">
    <%
    var _model = nldSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab                      = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total                       = ENGINE.configuration.getSubTotal();
    var current_battery_code            = _model.getCurrentBattery();
    var lease_amount                    = _model.getMonthlyCost();
    var monthly_base_pmt                = _model.getLeasingAmount();
    var financing_monthly_effective_pmt = _model.getFinancingMonthlyEffectivePayment();
    var tax_benefit                     = _model.getLeasingTotal().tax_benefit;
    var bool_details_shown              = _model.getDetailsVisibility();

    //-- Localized strings
    var locale                         = _model.getLocale();
    var view_data                      = _model._getViews();
    var all_non_lease_data             = view_data.effective_monthly_cost;
    var all_non_lease_current_tab_data = all_non_lease_data[ active_tab ];
    var _strings                       = all_non_lease_current_tab_data.strings;

    //-- CSS classes
    var css_class_details           = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings + line-item labels
    var label_net_money                 = _strings.net_price_with_incentives;
    var label_down_payment              = _strings.down_payment;
    var label_cash_including_incentives = _strings.net_price_with_incentives;
    var label_incentives_available_in   = _strings.state_incentive.available_incentives;
    var label_live_in_different_state   = _strings.state_incentive.different_incentive_selector;

    //-- Line-item labels and corresponding prices
    var amt_finance_due_at_delivery = _model.calculateFinanceDueAtDeliveryAmount();
    label_net_money = (amt_finance_due_at_delivery < 0) && active_tab !== 'cash' ? _strings.remaining_incentives : label_net_money;

    //-- State and Federal incentives
    var state_incentive_amount          = _model.getStateNonLeaseIncentive();
    var federal_tax_incentive_amount    = _model.getFederalIncentive();
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-non-lease-cash-details' class='<%= css_class_non_lease_details %>'>

        <div class='summary-non-lease-cash-details-finance'>

            <div class='monthly-effective-payment-wrapper'>
                <h3 id='non-lease-net-monthly-cost' class='monthly-effective-payment primary-price-label'>
                    <span class='nmc-amount'>
                        <%= formatCurrency(financing_monthly_effective_pmt, true, false) %>
                    </span> /mo.
                </h3>
                <p class='tag-line'>
                    <%= _strings.montly_cost_with_savings %>
                </p>
            </div>
            <div class='finance secondary-line-items-wrapper'>
                <h4 id="non-lease-details-current-battery" class='secondary-price-label <%= active_tab %>' >
                    <span class='effective-monthly-payment sub-total'>
                        <%= formatCurrency(sub_total, true, false) %>
                    </span>
                    <span class='label lower'>
                        <%= label_down_payment %>
                    </span>
                </h4>
                <h4 id='non-lease-state-switcher' class='hidden secondary-price-label non-lease-state-switcher'>
                    <p>
                        <span class='label' class='hidden'>
                            <%= label_incentives_available_in %> 
                            <%
                            var state_incentive_list = _.keys(state_incentives_for_active_tab);
                            var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                                return state_abbreviation !== 'other';
                            });
                            var state_incentive_list_length = filtered_state_incentive_list.length;
                            for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                                var state_incentive_code = filtered_state_incentive_list[ state_index ];
                                if ( state_incentive_code === undefined ) {
                                    continue;
                                }
                                var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                            %>
                            <span class='state-incentive <%= state_incentive_code %>'><a class='blue active' data-state="<%= state_incentive_code %>"><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %></span> 
                            <%
                            }
                            %>
                        </span>
                    </p>
                </h4>
                <h4 id='non-lease-active-state' class='secondary-price-label non-lease-active-state'>
                    <p class='non-lease-state-incentive-amount-and-notice'>/p>
                </h4>
            </div>

        </div> <!-- summary-non-lease-cash-details-finance -->

        <div class='summary-non-lease-cash-details-cash'>

            <div class='cash-incentives-wrapper'>
                <h4 class='federal-tax-credit secondary-price-label'>
                    <span class='ftc-amount primary'>
                        - <%= formatCurrency(federal_tax_incentive_amount, true, false) %>
                    </span>
                    <span class='label'>
                        <%= _strings.federal_tax_credit %>
                    </span>
                </h4>

                <h4 id='cash-non-lease-state-switcher' class='hidden secondary-price-label non-lease-state-switcher cash'>
                    <span class='label' class='hidden'>
                        <%= label_incentives_available_in %><br />
                        <%
                        var state_incentive_list = _.keys(state_incentives_for_active_tab);
                        var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                            return state_abbreviation !== 'other';
                        });
                        var state_incentive_list_length = filtered_state_incentive_list.length;
                        for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                            var state_incentive_code = filtered_state_incentive_list[ state_index ];
                            if ( state_incentive_code === undefined ) {
                                continue;
                            }
                            var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                        %>
                        <span class='state-incentive <%= state_incentive_code %>'><a class='blue active' data-state="<%= state_incentive_code %>"><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %></span> 
                        <%
                        }
                        %>
                    </span>
                </h4>
                <h4 id='cash-non-lease-active-state' class='secondary-price-label non-lease-active-state cash'>
                   <span class='cash-active-state-incentive-amount primary'>
                        - <%= formatCurrency(state_incentive_amount, true, false) %>
                    </span>
                    <span class='label'>
                        <span class='cash-active-state-incentive-name'>
                            <%= _strings.state_active_incentive %>
                        </span> 
                        (<a href='#' class='change_state lower blue'><%= _strings.change_state %></a>)
                    </span>
                </h4>

            </div> <!-- cash-incentives-wrapper -->

            <div class='cash secondary-line-items-wrapper'>
                <h4 id='non-lease-due-at-delivery-wrapper' class=' <%= active_tab %> primary-price-label'>
                    <span class='due-at-delivery-amount'>
                        <%= formatCurrency(sub_total, true, false) %>
                    </span>
                </h4>
                <h5 class='secondary-price-label tag-line'>
                    <span class='net-down-payment-text'>
                        <%= label_cash_including_incentives %>
                    </span>
                </h5>
            </div>

        </div> <!-- summary-non-lease-cash-details-cash -->

    </div>

</script>


<script id="template-summary-lease-details-view-us-v3" type="text/template">
    <%
    var _model = ldvSummaryPanel;
    var formatCurrency = TC.externalInterface.formatCurrency;
    var active_tab       = _model.getActiveTab();

    //-- Amounts, savings, etc.
    var sub_total            = ENGINE.configuration.getSubTotal();
    var lease_amount         = _model.getMonthlyCost();
    var tax_benefit          = _model.getLeasingTotal().tax_benefit;
    var monthly_base_pmt     = _model.getLeasingAmount();
    var bool_details_shown   = _model.getDetailsVisibility();
    var current_battery_code = ENGINE.getCurrentBatteryOption();

    //-- CSS classes
    var css_class_details    = bool_details_shown ? '' : 'hidden';
    var css_class_non_lease_details = active_tab === 'lease' ? 'hidden' : '';
    var css_class_non_lease_active_state   = _model.getActiveStateNonLease() == 'default' ? 'hidden' : '';
    var css_class_non_lease_active_state_switcher = _model.getActiveStateNonLease() == 'default' ? '' : 'hidden';

    //-- Localized strings
    var locale                     = _model.getLocale();
    var view_data                  = _model._getViews();
    var all_lease_data             = view_data.effective_monthly_cost;
    var all_lease_current_tab_data = all_lease_data[ active_tab ];
    var _strings                   = all_lease_current_tab_data.strings;

    //-- Line-item labels and corresponding prices
    var label_net_money_lease             = _strings.net_money_down;
    var label_incentives_available_in     = _strings.state_incentive.available_incentives;
    var label_i_live_in_a_different_state = _strings.state_incentive.different_incentive_selector;

    //-- State incentives
    var active_tab_for_state_incentives = active_tab == 'finance' ? 'non_lease' : active_tab;
    var state_incentives = _model._getIncentives().states;
    var state_incentives_for_active_tab = state_incentives[active_tab_for_state_incentives];
    %>

    <div id='summary-lease-details-list' class='<%= css_class_non_lease_details %>'>

        <h4 class='secondary-price-label'>
            <span class='current-lease-term lower'>
                <%= (_model.getLeasingTerm() / 12) %> 
                <%= _strings.term_length %>
            </span>, 
            <span class='effective-monthly-payment calculated-down-payment'>
                <%= _model.getLeasingDownPayment(true) %>
            </span> 
            <span class='label lower'>
                <%= _strings.due_at_signing %>
            </span>
        </h4>

        <h4 id='lease-state-switcher' class='hidden secondary-price-label'>
            <p><span class='label' class=''>
                <%= label_incentives_available_in %>

                <%
                var state_incentive_list = _.keys(state_incentives_for_active_tab);
                var filtered_state_incentive_list = _.filter(state_incentive_list, function(state_abbreviation){
                    return state_abbreviation !== 'other';
                });
                var state_incentive_list_length = filtered_state_incentive_list.length;
                for ( state_index = 0; state_index <= state_incentive_list_length; state_index++ ) {
                    var state_incentive_code = filtered_state_incentive_list[ state_index ];
                    if ( state_incentive_code === undefined ) {
                        continue;
                    }
                    var is_state_last_item = (state_incentive_list_length - 1) == state_index;
                %>
                <a href='#' data-state='<%= state_incentive_code %>' class='blue active'><%= state_incentive_code %></a><% if ( !is_state_last_item ) { %>,<% } %> 
                <%
                }
                %>
            </span></p>
        </h4>

        <h4 id='lease-state-incentive-wrapper' class='secondary-price-label'>
            <p class='state-incentive-amount-and-notice'>/p>
            <p class='different-state-link hidden'><a class='change_state blue'><%= label_i_live_in_a_different_state %></a></p>
        </h4>

    </div>

</script>


<script id="template-summary-estimated-delivery-date" type="text/template">
    <%
    /**
    *
    * Standard (Generic) Template for the Estimated Delivery Date Summary Sub-module
    * @Author ~ Manny
    * @Date ~ November 2014
    * @Notes ~ Carry this over to the re-architectured/factored, required.js driven framework I have in the works.
    *
    **/
    %>
    <%
    //-- Uncomment and use the module_data object (key-value pairs as needed in the markup)
    // var module_data = _edd_module;
    %>
    <div id="summary-lease-cash-delivery-date">
        <span class="delivery-date"></span>
    </div>
</script>
  </div>

  
  </div>
</div>
  </div>
</div>
                                </div>

                        </div> <!-- / main -->

                        
                        
                <div class="clear-block"></div>

                </div> <!-- / page -->

     



<div class="push"></div>
</div> <!-- End content wrapper-->
     </div> <!-- End wrapper -->
<!-- ###################### FOOTER #################### -->
        <div id="locale_pop" class="blip">
            <p>
                    <a href="#" class="close">X</a> <span id="locale_welcome"></span><span id="locale_msg"></span> <a href="/web/20150215162246/http://www.tesla.cn/" id="locale_link" class="locale-link plain first" rel="">Deutschland Site Besuchen</a>
            </p>
    </div>
        <footer>
             <div id="footer-region">
                
<div id="footer-wrapper" class="region">
    <div id="footermap">
        <ul class="car-links">
            <li><a href="/web/20150215162246/http://www.tesla.cn/models">Model S</a></li>
            <li><a href="/web/20150215162246/http://www.tesla.cn/modelx">Model X</a></li>
                        <li>
                <ul id="social">
                                    <li class="social-icon"><a class="ir weibo" href="https://web.archive.org/web/20150215162246/http://weibo.com/teslaofficial" target="_blank">Weibo</a></li>
                    <li class="social-icon">
                        <span class="ir wechat">WeChat</span>
                        <span class="popover top">
                            <img src="/web/20150215162246im_/http://www.tesla.cn/tesla_theme/images/wechat-qrcode-service-account.jpg" width="215" alt="WeChat">
                        </span>
                    </li>
                                </ul>
            </li>
        </ul>
        <ul><li class="menu-6568 header-only menu-model-s"><a href="/web/20150215162246/http://www.tesla.cn/models" class="header-only menu-model-s">Model S</a>
<ul><li class="menu-6569"><a href="/web/20150215162246/http://www.tesla.cn/models/design" class="active">订购</a>
</li>
<li class="menu-6576"><a href="/web/20150215162246/http://www.tesla.cn/models/drive">试驾</a>
</li>
<li class="menu-6575 menu-specs"><a href="/web/20150215162246/http://www.tesla.cn/models/specs" class="menu-specs">规格</a>
</li>
<li class="menu-6572 menu-gallery"><a href="/web/20150215162246/http://www.tesla.cn/models/photo-gallery" class="menu-gallery">图集</a>
</li>
<li class="menu-6573"><a href="/web/20150215162246/http://www.tesla.cn/models/walkthrough">视频</a>
</li>
</ul></li>
<li class="menu-6579 menu-model-x header-only"><a href="/web/20150215162246/http://www.tesla.cn/modelx" class="menu-model-x header-only">Model X</a>
<ul><li class="menu-6580"><a href="/web/20150215162246/http://www.tesla.cn/modelx">特性</a>
</li>
</ul></li>
<li class="menu-7249"><a href="/web/20150215162246/http://www.tesla.cn/supercharger">充电服务</a>
<ul><li class="menu-0572"><a href="/web/20150215162246/http://www.tesla.cn/supercharger">超级充电站</a>
</li>
<li class="menu-0573"><a href="/web/20150215162246/http://www.tesla.cn/destinationcharger">目的地充电站</a>
</li>
<li class="menu-0574"><a href="/web/20150215162246/http://www.tesla.cn/homecharger">家庭充电</a>
</li>
</ul></li>
<li class="menu-6584 menu-enthusiasts"><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-enthusiasts">发现更多</a>
<ul><li class="menu-6585 menu-blog"><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-blog">博客</a>
</li>
<li class="menu-6586"><a href="/web/20150215162246/http://www.tesla.cn/gallery">相片和视频</a>
</li>
<li class="menu-6587"><a href="/web/20150215162246/http://www.tesla.cn/events">活动</a>
</li>
<li class="menu-2738"><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/enthusiasts/blogs/tag/customers">车主故事</a>
</li>
</ul></li>
<li class="menu-6589"><a href="/web/20150215162246/http://www.tesla.cn/findus">找到我们</a>
<ul><li class="menu-6590"><a href="/web/20150215162246/http://www.tesla.cn/findus/stores">体验中心</a>
</li>
<li class="menu-6591"><a href="/web/20150215162246/http://www.tesla.cn/findus/service">服务中心</a>
</li>
<li class="menu-6592 menu-contact"><a href="/web/20150215162246/http://www.tesla.cn/contact" class="menu-contact">联系我们</a>
</li>
</ul></li>
<li class="menu-6593"><a href="/web/20150215162246/http://www.tesla.cn/order">购买</a>
<ul><li class="menu-6594"><a href="/web/20150215162246/http://www.tesla.cn/order">订购您的特斯拉</a>
</li>
<li class="menu-6595"><a href="/web/20150215162246/http://www.tesla.cn/incentives">激励政策</a>
</li>
<li class="menu-6597"><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/sites/default/files/pdfs/accessories_digital_brochure_cn.pdf" target="_blank">原厂附件</a>
</li>
<li class="menu-7577"><a href="/web/20150215162246/http://www.tesla.cn/financing/faq">金融常见问题解答</a>
</li>
</ul></li>
<li class="menu-6603 menu-roadster hidden"><a href="/web/20150215162246/http://www.tesla.cn/roadster" class="menu-roadster hidden">Roadster</a>
<ul><li class="menu-6613"><a href="/web/20150215162246/http://www.tesla.cn/roadster/gallery">Gallery</a>
</li>
<li class="menu-6614"><a href="/web/20150215162246/http://www.tesla.cn/roadster/charging">Charging</a>
</li>
</ul></li>
<li class="menu-6620 menu-about-tesla footer-only"><a href="/web/20150215162246/http://www.tesla.cn/about" class="menu-about-tesla footer-only">关于特斯拉汽车公司</a>
<ul><li class="menu-6621 menu-executives footer-only"><a href="/web/20150215162246/http://www.tesla.cn/executives" class="menu-executives footer-only">管理团队</a>
</li>
<li class="menu-6622 menu-press footer-only"><a href="/web/20150215162246/http://www.tesla.cn/blog-and-press-releases" class="menu-press footer-only">新闻中心</a>
</li>
<li class="menu-6623"><a href="/web/20150215162246/http://www.tesla.cn/careers">工作机会</a>
</li>
<li class="menu-6624 menu-investors footer-only"><a href="https://web.archive.org/web/20150215162246/http://ir.teslamotors.com/" class="menu-investors footer-only" target="_blank">投资者关系</a>
</li>
<li class="menu-6625 menu-suppliers footer-only"><a href="https://web.archive.org/web/20150215162246/https://suppliers.teslamotors.com/" class="menu-suppliers footer-only" target="_blank">供应商</a>
</li>
</ul></li>
</ul>    </div>
    <!-- End footermap -->

    <div id="secondary-centered">
        <ul class="links"><li class=" first"><span id="copyright" title="">Copyright © 2015 Tesla Motors, Inc. 沪ICP备14038430号</span></li><li class=""><a href="/web/20150215162246/http://www.tesla.cn/about/legal" title="">法律和隐私</a></li></li><li class=""><a href="/web/20150215162246/http://www.tesla.cn/firstresponders" title="">应急中心</a></li></li><li class="locale-selector"><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/models/design" class="locale-selector" id="choose-locale">选择地区</a></li></li><li class=" last"><div id="left-border"></div><ul id="mytesla-button-menu"><li><a href="/web/20150215162246/http://www.tesla.cn/mytesla"><span>MY TESLA</span></a> &nbsp;&nbsp;|</li><li>&nbsp;&nbsp;<a href="/web/20150215162246/http://www.tesla.cn/contact">联系我们</a> &nbsp;&nbsp;|</li><li>&nbsp;&nbsp;<a href="/web/20150215162246/http://www.tesla.cn/mytesla" id="mytesla-button">登录</a></li></ul><div id="right-border"></div></li></ul>    </div>
</div>

<div id="select-locale-overlay"></div>

<div id="locale-select-wrapper">
    <a href="" class="close" id="locale-close-button"></a>
    
<div id="locale-select">

    <h2 class="northamerica"><span class="notranslate">North America</span></h2>
    <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/en_CA/models/design" class="locale-link ca first plain" rel="en_CA">Canada (English)</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/fr_CA/models/design" class="locale-link ca plain" rel="fr_CA" style="margin-left: 3.1em">Canada (Français)</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/models/design" class="locale-link us plain" rel="en_US" style="margin-left: 2.3em">United States</a>

    <h2 class="europe"><span class="notranslate">Europe</span></h2>
    <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/fr_BE/models/design" class="locale-link be first plain" rel="fr_BE">Belgique</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/nl_BE/models/design" class="locale-link be plain" rel="nl_BE">Belgi&euml;</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/da_DK/models/design" class="locale-link dk plain" rel="da_DK">Danmark</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/de_DE/models/design" class="locale-link de plain" rel="de_DE">Deutschland</a><br/>

    <div class="row">
        <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/fr_FR/models/design" class="locale-link fr first plain" rel="fr_FR">France</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/en_GB/models/design" class="locale-link gb plain" rel="en_GB">Great Britain</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/it_IT/models/design" class="locale-link it plain" rel="it_IT">Italia</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/nl_NL/models/design" class="locale-link nl plain" rel="nl_NL">Nederland</a><br/>
    </div>

    <div class="row">
        <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/no_NO/models/design" class="locale-link no first plain" rel="no_NO">Norge</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/de_AT/models/design" class="locale-link at plain" rel="de_AT">Österreich</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/de_CH/models/design" class="locale-link ch plain" rel="de_CH">Schweiz</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/fr_CH/models/design" class="locale-link ch  plain" rel="fr_CH">Suisse</a><br/>
    </div>

    <div class="row">
        <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/it_CH/models/design" class="locale-link ch first plain" rel="it_CH">Svizzera</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/sv_SE/models/design" class="locale-link se plain" rel="sv_SE">Sverige</a><!--//
        //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/en_EU/models/design" class="locale-link eu plain" rel="en_EU">Other Europe</a><br/>
    </div>

    <h2 class="apac"><span class="notranslate">Asia Pacific</span></h2>
    <a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/en_AU/models/design" class="locale-link au first plain" rel="en_AU">Australia</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.tesla.cn/models/design" class="locale-link cn plain" rel="zh_CN">中国</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/en_HK/models/design" class="locale-link hk plain" rel="en_HK">Hong Kong</a><!--//
    //--><a href="https://web.archive.org/web/20150215162246/http://www.teslamotors.com/jp/models/design" class="locale-link jp plain" rel="ja_JP">日本</a>

</div><!-- End locale-select -->
</div>
             </div>
        </footer>







    

    <!-- LB.12 --> 

    <!-- www.tesla.cn --> 

    <!-- [BUILD_TAG_rc_d6_cn_20150212_d6_cn_r_20150212_beta.r1] -->

</body>
</html>
<!--
     FILE ARCHIVED ON 16:22:46 Feb 15, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 07:35:59 Feb 19, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 83.427
  exclusion.robots: 0.094
  exclusion.robots.policy: 0.081
  RedisCDXSource: 0.646
  esindex: 0.008
  LoadShardBlock: 60.663 (3)
  PetaboxLoader3.datanode: 102.877 (4)
  load_resource: 148.452
  PetaboxLoader3.resolve: 64.2
-->